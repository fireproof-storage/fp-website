var $C=Object.defineProperty;var DC=(e,t,n)=>t in e?$C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var jt=(e,t,n)=>(DC(e,typeof t!="symbol"?t+"":t,n),n),zf=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var te=(e,t,n)=>(zf(e,t,"read from private field"),n?n.call(e):t.get(e)),Ze=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},bn=(e,t,n,i)=>(zf(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);var Ot=(e,t,n)=>(zf(e,t,"access private method"),n);function MC(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(e,a,u.get?u:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var Su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function BC(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){if(this instanceof i){var a=[null];a.push.apply(a,arguments);var u=Function.bind.apply(t,a);return new u}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),n}var $a={},jC={get exports(){return $a},set exports(e){$a=e}},nd={},J={},UC={get exports(){return J},set exports(e){J=e}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var al=Symbol.for("react.element"),zC=Symbol.for("react.portal"),FC=Symbol.for("react.fragment"),VC=Symbol.for("react.strict_mode"),WC=Symbol.for("react.profiler"),ZC=Symbol.for("react.provider"),HC=Symbol.for("react.context"),KC=Symbol.for("react.forward_ref"),GC=Symbol.for("react.suspense"),QC=Symbol.for("react.memo"),qC=Symbol.for("react.lazy"),rv=Symbol.iterator;function JC(e){return e===null||typeof e!="object"?null:(e=rv&&e[rv]||e["@@iterator"],typeof e=="function"?e:null)}var i1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o1=Object.assign,s1={};function ys(e,t,n){this.props=e,this.context=t,this.refs=s1,this.updater=n||i1}ys.prototype.isReactComponent={};ys.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ys.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function a1(){}a1.prototype=ys.prototype;function Wp(e,t,n){this.props=e,this.context=t,this.refs=s1,this.updater=n||i1}var Zp=Wp.prototype=new a1;Zp.constructor=Wp;o1(Zp,ys.prototype);Zp.isPureReactComponent=!0;var iv=Array.isArray,l1=Object.prototype.hasOwnProperty,Hp={current:null},u1={key:!0,ref:!0,__self:!0,__source:!0};function c1(e,t,n){var i,a={},u=null,c=null;if(t!=null)for(i in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(u=""+t.key),t)l1.call(t,i)&&!u1.hasOwnProperty(i)&&(a[i]=t[i]);var f=arguments.length-2;if(f===1)a.children=n;else if(1<f){for(var p=Array(f),m=0;m<f;m++)p[m]=arguments[m+2];a.children=p}if(e&&e.defaultProps)for(i in f=e.defaultProps,f)a[i]===void 0&&(a[i]=f[i]);return{$$typeof:al,type:e,key:u,ref:c,props:a,_owner:Hp.current}}function YC(e,t){return{$$typeof:al,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kp(e){return typeof e=="object"&&e!==null&&e.$$typeof===al}function XC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ov=/\/+/g;function Ff(e,t){return typeof e=="object"&&e!==null&&e.key!=null?XC(""+e.key):t.toString(36)}function Hu(e,t,n,i,a){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(u){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case al:case zC:c=!0}}if(c)return c=e,a=a(c),e=i===""?"."+Ff(c,0):i,iv(a)?(n="",e!=null&&(n=e.replace(ov,"$&/")+"/"),Hu(a,t,n,"",function(m){return m})):a!=null&&(Kp(a)&&(a=YC(a,n+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(ov,"$&/")+"/")+e)),t.push(a)),1;if(c=0,i=i===""?".":i+":",iv(e))for(var f=0;f<e.length;f++){u=e[f];var p=i+Ff(u,f);c+=Hu(u,t,n,p,a)}else if(p=JC(e),typeof p=="function")for(e=p.call(e),f=0;!(u=e.next()).done;)u=u.value,p=i+Ff(u,f++),c+=Hu(u,t,n,p,a);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function _u(e,t,n){if(e==null)return e;var i=[],a=0;return Hu(e,i,"","",function(u){return t.call(n,u,a++)}),i}function e3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qt={current:null},Ku={transition:null},t3={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:Ku,ReactCurrentOwner:Hp};Oe.Children={map:_u,forEach:function(e,t,n){_u(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _u(e,function(){t++}),t},toArray:function(e){return _u(e,function(t){return t})||[]},only:function(e){if(!Kp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Oe.Component=ys;Oe.Fragment=FC;Oe.Profiler=WC;Oe.PureComponent=Wp;Oe.StrictMode=VC;Oe.Suspense=GC;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t3;Oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=o1({},e.props),a=e.key,u=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,c=Hp.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(p in t)l1.call(t,p)&&!u1.hasOwnProperty(p)&&(i[p]=t[p]===void 0&&f!==void 0?f[p]:t[p])}var p=arguments.length-2;if(p===1)i.children=n;else if(1<p){f=Array(p);for(var m=0;m<p;m++)f[m]=arguments[m+2];i.children=f}return{$$typeof:al,type:e.type,key:a,ref:u,props:i,_owner:c}};Oe.createContext=function(e){return e={$$typeof:HC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ZC,_context:e},e.Consumer=e};Oe.createElement=c1;Oe.createFactory=function(e){var t=c1.bind(null,e);return t.type=e,t};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(e){return{$$typeof:KC,render:e}};Oe.isValidElement=Kp;Oe.lazy=function(e){return{$$typeof:qC,_payload:{_status:-1,_result:e},_init:e3}};Oe.memo=function(e,t){return{$$typeof:QC,type:e,compare:t===void 0?null:t}};Oe.startTransition=function(e){var t=Ku.transition;Ku.transition={};try{e()}finally{Ku.transition=t}};Oe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Oe.useCallback=function(e,t){return Qt.current.useCallback(e,t)};Oe.useContext=function(e){return Qt.current.useContext(e)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(e){return Qt.current.useDeferredValue(e)};Oe.useEffect=function(e,t){return Qt.current.useEffect(e,t)};Oe.useId=function(){return Qt.current.useId()};Oe.useImperativeHandle=function(e,t,n){return Qt.current.useImperativeHandle(e,t,n)};Oe.useInsertionEffect=function(e,t){return Qt.current.useInsertionEffect(e,t)};Oe.useLayoutEffect=function(e,t){return Qt.current.useLayoutEffect(e,t)};Oe.useMemo=function(e,t){return Qt.current.useMemo(e,t)};Oe.useReducer=function(e,t,n){return Qt.current.useReducer(e,t,n)};Oe.useRef=function(e){return Qt.current.useRef(e)};Oe.useState=function(e){return Qt.current.useState(e)};Oe.useSyncExternalStore=function(e,t,n){return Qt.current.useSyncExternalStore(e,t,n)};Oe.useTransition=function(){return Qt.current.useTransition()};Oe.version="18.2.0";(function(e){e.exports=Oe})(UC);const n3=r1(J),Sh=MC({__proto__:null,default:n3},[J]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r3=J,i3=Symbol.for("react.element"),o3=Symbol.for("react.fragment"),s3=Object.prototype.hasOwnProperty,a3=r3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l3={key:!0,ref:!0,__self:!0,__source:!0};function d1(e,t,n){var i,a={},u=null,c=null;n!==void 0&&(u=""+n),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(c=t.ref);for(i in t)s3.call(t,i)&&!l3.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:i3,type:e,key:u,ref:c,props:a,_owner:a3.current}}nd.Fragment=o3;nd.jsx=d1;nd.jsxs=d1;(function(e){e.exports=nd})(jC);const sv=$a.Fragment,oe=$a.jsx,nn=$a.jsxs;var _h={},Ch={},u3={get exports(){return Ch},set exports(e){Ch=e}},gn={},Nh={},c3={get exports(){return Nh},set exports(e){Nh=e}},f1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,de){var me=H.length;H.push(de);e:for(;0<me;){var Pe=me-1>>>1,A=H[Pe];if(0<a(A,de))H[Pe]=de,H[me]=A,me=Pe;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var de=H[0],me=H.pop();if(me!==de){H[0]=me;e:for(var Pe=0,A=H.length,U=A>>>1;Pe<U;){var St=2*(Pe+1)-1,Ni=H[St],Tn=St+1,In=H[Tn];if(0>a(Ni,me))Tn<A&&0>a(In,Ni)?(H[Pe]=In,H[Tn]=me,Pe=Tn):(H[Pe]=Ni,H[St]=me,Pe=St);else if(Tn<A&&0>a(In,me))H[Pe]=In,H[Tn]=me,Pe=Tn;else break e}}return de}function a(H,de){var me=H.sortIndex-de.sortIndex;return me!==0?me:H.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var p=[],m=[],w=1,E=null,S=3,k=!1,N=!1,T=!1,O=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(H){for(var de=n(m);de!==null;){if(de.callback===null)i(m);else if(de.startTime<=H)i(m),de.sortIndex=de.expirationTime,t(p,de);else break;de=n(m)}}function L(H){if(T=!1,C(H),!N)if(n(p)!==null)N=!0,Ee($);else{var de=n(m);de!==null&&Ne(L,de.startTime-H)}}function $(H,de){N=!1,T&&(T=!1,x(F),F=-1),k=!0;var me=S;try{for(C(de),E=n(p);E!==null&&(!(E.expirationTime>de)||H&&!$e());){var Pe=E.callback;if(typeof Pe=="function"){E.callback=null,S=E.priorityLevel;var A=Pe(E.expirationTime<=de);de=e.unstable_now(),typeof A=="function"?E.callback=A:E===n(p)&&i(p),C(de)}else i(p);E=n(p)}if(E!==null)var U=!0;else{var St=n(m);St!==null&&Ne(L,St.startTime-de),U=!1}return U}finally{E=null,S=me,k=!1}}var V=!1,W=null,F=-1,Y=5,ue=-1;function $e(){return!(e.unstable_now()-ue<Y)}function tt(){if(W!==null){var H=e.unstable_now();ue=H;var de=!0;try{de=W(!0,H)}finally{de?be():(V=!1,W=null)}}else V=!1}var be;if(typeof v=="function")be=function(){v(tt)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,_e=fe.port2;fe.port1.onmessage=tt,be=function(){_e.postMessage(null)}}else be=function(){O(tt,0)};function Ee(H){W=H,V||(V=!0,be())}function Ne(H,de){F=O(function(){H(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){N||k||(N=!0,Ee($))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return n(p)},e.unstable_next=function(H){switch(S){case 1:case 2:case 3:var de=3;break;default:de=S}var me=S;S=de;try{return H()}finally{S=me}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,de){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var me=S;S=H;try{return de()}finally{S=me}},e.unstable_scheduleCallback=function(H,de,me){var Pe=e.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Pe+me:Pe):me=Pe,H){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=me+A,H={id:w++,callback:de,priorityLevel:H,startTime:me,expirationTime:A,sortIndex:-1},me>Pe?(H.sortIndex=me,t(m,H),n(p)===null&&H===n(m)&&(T?(x(F),F=-1):T=!0,Ne(L,me-Pe))):(H.sortIndex=A,t(p,H),N||k||(N=!0,Ee($))),H},e.unstable_shouldYield=$e,e.unstable_wrapCallback=function(H){var de=S;return function(){var me=S;S=de;try{return H.apply(this,arguments)}finally{S=me}}}})(f1);(function(e){e.exports=f1})(c3);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h1=J,mn=Nh;function Z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p1=new Set,Da={};function ro(e,t){ls(e,t),ls(e+"Capture",t)}function ls(e,t){for(Da[e]=t,e=0;e<t.length;e++)p1.add(t[e])}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ah=Object.prototype.hasOwnProperty,d3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,av={},lv={};function f3(e){return Ah.call(lv,e)?!0:Ah.call(av,e)?!1:d3.test(e)?lv[e]=!0:(av[e]=!0,!1)}function h3(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function p3(e,t,n,i){if(t===null||typeof t>"u"||h3(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qt(e,t,n,i,a,u,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=c}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Dt[e]=new qt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Dt[t]=new qt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Dt[e]=new qt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Dt[e]=new qt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Dt[e]=new qt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Dt[e]=new qt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Dt[e]=new qt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Dt[e]=new qt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Dt[e]=new qt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Gp=/[\-:]([a-z])/g;function Qp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Gp,Qp);Dt[t]=new qt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Gp,Qp);Dt[t]=new qt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Gp,Qp);Dt[t]=new qt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Dt[e]=new qt(e,1,!1,e.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Dt[e]=new qt(e,1,!1,e.toLowerCase(),null,!0,!0)});function qp(e,t,n,i){var a=Dt.hasOwnProperty(t)?Dt[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(p3(t,n,a,i)&&(n=null),i||a===null?f3(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,i=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Mr=h1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cu=Symbol.for("react.element"),Ro=Symbol.for("react.portal"),$o=Symbol.for("react.fragment"),Jp=Symbol.for("react.strict_mode"),Th=Symbol.for("react.profiler"),y1=Symbol.for("react.provider"),m1=Symbol.for("react.context"),Yp=Symbol.for("react.forward_ref"),Ih=Symbol.for("react.suspense"),Lh=Symbol.for("react.suspense_list"),Xp=Symbol.for("react.memo"),ni=Symbol.for("react.lazy"),g1=Symbol.for("react.offscreen"),uv=Symbol.iterator;function la(e){return e===null||typeof e!="object"?null:(e=uv&&e[uv]||e["@@iterator"],typeof e=="function"?e:null)}var lt=Object.assign,Vf;function va(e){if(Vf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vf=t&&t[1]||""}return`
`+Vf+e}var Wf=!1;function Zf(e,t){if(!e||Wf)return"";Wf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var i=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){i=m}e.call(t.prototype)}else{try{throw Error()}catch(m){i=m}e()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),u=i.stack.split(`
`),c=a.length-1,f=u.length-1;1<=c&&0<=f&&a[c]!==u[f];)f--;for(;1<=c&&0<=f;c--,f--)if(a[c]!==u[f]){if(c!==1||f!==1)do if(c--,f--,0>f||a[c]!==u[f]){var p=`
`+a[c].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=c&&0<=f);break}}}finally{Wf=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?va(e):""}function y3(e){switch(e.tag){case 5:return va(e.type);case 16:return va("Lazy");case 13:return va("Suspense");case 19:return va("SuspenseList");case 0:case 2:case 15:return e=Zf(e.type,!1),e;case 11:return e=Zf(e.type.render,!1),e;case 1:return e=Zf(e.type,!0),e;default:return""}}function Oh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $o:return"Fragment";case Ro:return"Portal";case Th:return"Profiler";case Jp:return"StrictMode";case Ih:return"Suspense";case Lh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case m1:return(e.displayName||"Context")+".Consumer";case y1:return(e._context.displayName||"Context")+".Provider";case Yp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xp:return t=e.displayName||null,t!==null?t:Oh(e.type)||"Memo";case ni:t=e._payload,e=e._init;try{return Oh(e(t))}catch{}}return null}function m3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oh(t);case 8:return t===Jp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function w1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function g3(e){var t=w1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(c){i=""+c,u.call(this,c)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(c){i=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nu(e){e._valueTracker||(e._valueTracker=g3(e))}function v1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=w1(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function uc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ph(e,t){var n=t.checked;return lt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function cv(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=vi(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function b1(e,t){t=t.checked,t!=null&&qp(e,"checked",t,!1)}function Rh(e,t){b1(e,t);var n=vi(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$h(e,t.type,n):t.hasOwnProperty("defaultValue")&&$h(e,t.type,vi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function dv(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function $h(e,t,n){(t!=="number"||uc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ba=Array.isArray;function Go(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+vi(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Dh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Z(91));return lt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fv(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Z(92));if(ba(n)){if(1<n.length)throw Error(Z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:vi(n)}}function k1(e,t){var n=vi(t.value),i=vi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function hv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function E1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?E1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Au,x1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Au=Au||document.createElement("div"),Au.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Au.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ma(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w3=["Webkit","ms","Moz","O"];Object.keys(Sa).forEach(function(e){w3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sa[t]=Sa[e]})});function S1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Sa.hasOwnProperty(e)&&Sa[e]?(""+t).trim():t+"px"}function _1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=S1(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,a):e[n]=a}}var v3=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bh(e,t){if(t){if(v3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Z(62))}}function jh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uh=null;function ey(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zh=null,Qo=null,qo=null;function pv(e){if(e=cl(e)){if(typeof zh!="function")throw Error(Z(280));var t=e.stateNode;t&&(t=ad(t),zh(e.stateNode,e.type,t))}}function C1(e){Qo?qo?qo.push(e):qo=[e]:Qo=e}function N1(){if(Qo){var e=Qo,t=qo;if(qo=Qo=null,pv(e),t)for(e=0;e<t.length;e++)pv(t[e])}}function A1(e,t){return e(t)}function T1(){}var Hf=!1;function I1(e,t,n){if(Hf)return e(t,n);Hf=!0;try{return A1(e,t,n)}finally{Hf=!1,(Qo!==null||qo!==null)&&(T1(),N1())}}function Ba(e,t){var n=e.stateNode;if(n===null)return null;var i=ad(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Z(231,t,typeof n));return n}var Fh=!1;if(Or)try{var ua={};Object.defineProperty(ua,"passive",{get:function(){Fh=!0}}),window.addEventListener("test",ua,ua),window.removeEventListener("test",ua,ua)}catch{Fh=!1}function b3(e,t,n,i,a,u,c,f,p){var m=Array.prototype.slice.call(arguments,3);try{t.apply(n,m)}catch(w){this.onError(w)}}var _a=!1,cc=null,dc=!1,Vh=null,k3={onError:function(e){_a=!0,cc=e}};function E3(e,t,n,i,a,u,c,f,p){_a=!1,cc=null,b3.apply(k3,arguments)}function x3(e,t,n,i,a,u,c,f,p){if(E3.apply(this,arguments),_a){if(_a){var m=cc;_a=!1,cc=null}else throw Error(Z(198));dc||(dc=!0,Vh=m)}}function io(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function L1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yv(e){if(io(e)!==e)throw Error(Z(188))}function S3(e){var t=e.alternate;if(!t){if(t=io(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var u=a.alternate;if(u===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===u.child){for(u=a.child;u;){if(u===n)return yv(a),e;if(u===i)return yv(a),t;u=u.sibling}throw Error(Z(188))}if(n.return!==i.return)n=a,i=u;else{for(var c=!1,f=a.child;f;){if(f===n){c=!0,n=a,i=u;break}if(f===i){c=!0,i=a,n=u;break}f=f.sibling}if(!c){for(f=u.child;f;){if(f===n){c=!0,n=u,i=a;break}if(f===i){c=!0,i=u,n=a;break}f=f.sibling}if(!c)throw Error(Z(189))}}if(n.alternate!==i)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?e:t}function O1(e){return e=S3(e),e!==null?P1(e):null}function P1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=P1(e);if(t!==null)return t;e=e.sibling}return null}var R1=mn.unstable_scheduleCallback,mv=mn.unstable_cancelCallback,_3=mn.unstable_shouldYield,C3=mn.unstable_requestPaint,ft=mn.unstable_now,N3=mn.unstable_getCurrentPriorityLevel,ty=mn.unstable_ImmediatePriority,$1=mn.unstable_UserBlockingPriority,fc=mn.unstable_NormalPriority,A3=mn.unstable_LowPriority,D1=mn.unstable_IdlePriority,rd=null,ar=null;function T3(e){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(rd,e,void 0,(e.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:O3,I3=Math.log,L3=Math.LN2;function O3(e){return e>>>=0,e===0?32:31-(I3(e)/L3|0)|0}var Tu=64,Iu=4194304;function ka(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hc(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,a=e.suspendedLanes,u=e.pingedLanes,c=n&268435455;if(c!==0){var f=c&~a;f!==0?i=ka(f):(u&=c,u!==0&&(i=ka(u)))}else c=n&~a,c!==0?i=ka(c):u!==0&&(i=ka(u));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,u=t&-t,a>=u||a===16&&(u&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Vn(t),a=1<<n,i|=e[n],t&=~a;return i}function P3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R3(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var c=31-Vn(u),f=1<<c,p=a[c];p===-1?(!(f&n)||f&i)&&(a[c]=P3(f,t)):p<=t&&(e.expiredLanes|=f),u&=~f}}function Wh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function M1(){var e=Tu;return Tu<<=1,!(Tu&4194240)&&(Tu=64),e}function Kf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ll(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vn(t),e[t]=n}function $3(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Vn(n),u=1<<a;t[a]=0,i[a]=-1,e[a]=-1,n&=~u}}function ny(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Vn(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}var He=0;function B1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var j1,ry,U1,z1,F1,Zh=!1,Lu=[],ci=null,di=null,fi=null,ja=new Map,Ua=new Map,oi=[],D3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gv(e,t){switch(e){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":ja.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(t.pointerId)}}function ca(e,t,n,i,a,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:u,targetContainers:[a]},t!==null&&(t=cl(t),t!==null&&ry(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function M3(e,t,n,i,a){switch(t){case"focusin":return ci=ca(ci,e,t,n,i,a),!0;case"dragenter":return di=ca(di,e,t,n,i,a),!0;case"mouseover":return fi=ca(fi,e,t,n,i,a),!0;case"pointerover":var u=a.pointerId;return ja.set(u,ca(ja.get(u)||null,e,t,n,i,a)),!0;case"gotpointercapture":return u=a.pointerId,Ua.set(u,ca(Ua.get(u)||null,e,t,n,i,a)),!0}return!1}function V1(e){var t=Zi(e.target);if(t!==null){var n=io(t);if(n!==null){if(t=n.tag,t===13){if(t=L1(n),t!==null){e.blockedOn=t,F1(e.priority,function(){U1(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Hh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Uh=i,n.target.dispatchEvent(i),Uh=null}else return t=cl(n),t!==null&&ry(t),e.blockedOn=n,!1;t.shift()}return!0}function wv(e,t,n){Gu(e)&&n.delete(t)}function B3(){Zh=!1,ci!==null&&Gu(ci)&&(ci=null),di!==null&&Gu(di)&&(di=null),fi!==null&&Gu(fi)&&(fi=null),ja.forEach(wv),Ua.forEach(wv)}function da(e,t){e.blockedOn===t&&(e.blockedOn=null,Zh||(Zh=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,B3)))}function za(e){function t(a){return da(a,e)}if(0<Lu.length){da(Lu[0],e);for(var n=1;n<Lu.length;n++){var i=Lu[n];i.blockedOn===e&&(i.blockedOn=null)}}for(ci!==null&&da(ci,e),di!==null&&da(di,e),fi!==null&&da(fi,e),ja.forEach(t),Ua.forEach(t),n=0;n<oi.length;n++)i=oi[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<oi.length&&(n=oi[0],n.blockedOn===null);)V1(n),n.blockedOn===null&&oi.shift()}var Jo=Mr.ReactCurrentBatchConfig,pc=!0;function j3(e,t,n,i){var a=He,u=Jo.transition;Jo.transition=null;try{He=1,iy(e,t,n,i)}finally{He=a,Jo.transition=u}}function U3(e,t,n,i){var a=He,u=Jo.transition;Jo.transition=null;try{He=4,iy(e,t,n,i)}finally{He=a,Jo.transition=u}}function iy(e,t,n,i){if(pc){var a=Hh(e,t,n,i);if(a===null)rh(e,t,i,yc,n),gv(e,i);else if(M3(a,e,t,n,i))i.stopPropagation();else if(gv(e,i),t&4&&-1<D3.indexOf(e)){for(;a!==null;){var u=cl(a);if(u!==null&&j1(u),u=Hh(e,t,n,i),u===null&&rh(e,t,i,yc,n),u===a)break;a=u}a!==null&&i.stopPropagation()}else rh(e,t,i,null,n)}}var yc=null;function Hh(e,t,n,i){if(yc=null,e=ey(i),e=Zi(e),e!==null)if(t=io(e),t===null)e=null;else if(n=t.tag,n===13){if(e=L1(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return yc=e,null}function W1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(N3()){case ty:return 1;case $1:return 4;case fc:case A3:return 16;case D1:return 536870912;default:return 16}default:return 16}}var ai=null,oy=null,Qu=null;function Z1(){if(Qu)return Qu;var e,t=oy,n=t.length,i,a="value"in ai?ai.value:ai.textContent,u=a.length;for(e=0;e<n&&t[e]===a[e];e++);var c=n-e;for(i=1;i<=c&&t[n-i]===a[u-i];i++);return Qu=a.slice(e,1<i?1-i:void 0)}function qu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ou(){return!0}function vv(){return!1}function wn(e){function t(n,i,a,u,c){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=u,this.target=c,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(n=e[f],this[f]=n?n(u):u[f]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Ou:vv,this.isPropagationStopped=vv,this}return lt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ou)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ou)},persist:function(){},isPersistent:Ou}),t}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sy=wn(ms),ul=lt({},ms,{view:0,detail:0}),z3=wn(ul),Gf,Qf,fa,id=lt({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ay,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fa&&(fa&&e.type==="mousemove"?(Gf=e.screenX-fa.screenX,Qf=e.screenY-fa.screenY):Qf=Gf=0,fa=e),Gf)},movementY:function(e){return"movementY"in e?e.movementY:Qf}}),bv=wn(id),F3=lt({},id,{dataTransfer:0}),V3=wn(F3),W3=lt({},ul,{relatedTarget:0}),qf=wn(W3),Z3=lt({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),H3=wn(Z3),K3=lt({},ms,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),G3=wn(K3),Q3=lt({},ms,{data:0}),kv=wn(Q3),q3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Y3[e])?!!t[e]:!1}function ay(){return X3}var e4=lt({},ul,{key:function(e){if(e.key){var t=q3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?J3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ay,charCode:function(e){return e.type==="keypress"?qu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),t4=wn(e4),n4=lt({},id,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ev=wn(n4),r4=lt({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ay}),i4=wn(r4),o4=lt({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),s4=wn(o4),a4=lt({},id,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),l4=wn(a4),u4=[9,13,27,32],ly=Or&&"CompositionEvent"in window,Ca=null;Or&&"documentMode"in document&&(Ca=document.documentMode);var c4=Or&&"TextEvent"in window&&!Ca,H1=Or&&(!ly||Ca&&8<Ca&&11>=Ca),xv=String.fromCharCode(32),Sv=!1;function K1(e,t){switch(e){case"keyup":return u4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Do=!1;function d4(e,t){switch(e){case"compositionend":return G1(t);case"keypress":return t.which!==32?null:(Sv=!0,xv);case"textInput":return e=t.data,e===xv&&Sv?null:e;default:return null}}function f4(e,t){if(Do)return e==="compositionend"||!ly&&K1(e,t)?(e=Z1(),Qu=oy=ai=null,Do=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return H1&&t.locale!=="ko"?null:t.data;default:return null}}var h4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _v(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!h4[e.type]:t==="textarea"}function Q1(e,t,n,i){C1(i),t=mc(t,"onChange"),0<t.length&&(n=new sy("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Na=null,Fa=null;function p4(e){sb(e,0)}function od(e){var t=jo(e);if(v1(t))return e}function y4(e,t){if(e==="change")return t}var q1=!1;if(Or){var Jf;if(Or){var Yf="oninput"in document;if(!Yf){var Cv=document.createElement("div");Cv.setAttribute("oninput","return;"),Yf=typeof Cv.oninput=="function"}Jf=Yf}else Jf=!1;q1=Jf&&(!document.documentMode||9<document.documentMode)}function Nv(){Na&&(Na.detachEvent("onpropertychange",J1),Fa=Na=null)}function J1(e){if(e.propertyName==="value"&&od(Fa)){var t=[];Q1(t,Fa,e,ey(e)),I1(p4,t)}}function m4(e,t,n){e==="focusin"?(Nv(),Na=t,Fa=n,Na.attachEvent("onpropertychange",J1)):e==="focusout"&&Nv()}function g4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return od(Fa)}function w4(e,t){if(e==="click")return od(t)}function v4(e,t){if(e==="input"||e==="change")return od(t)}function b4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zn=typeof Object.is=="function"?Object.is:b4;function Va(e,t){if(Zn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!Ah.call(t,a)||!Zn(e[a],t[a]))return!1}return!0}function Av(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tv(e,t){var n=Av(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Av(n)}}function Y1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Y1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function X1(){for(var e=window,t=uc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=uc(e.document)}return t}function uy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function k4(e){var t=X1(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Y1(n.ownerDocument.documentElement,n)){if(i!==null&&uy(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,u=Math.min(i.start,a);i=i.end===void 0?u:Math.min(i.end,a),!e.extend&&u>i&&(a=i,i=u,u=a),a=Tv(n,u);var c=Tv(n,i);a&&c&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),u>i?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var E4=Or&&"documentMode"in document&&11>=document.documentMode,Mo=null,Kh=null,Aa=null,Gh=!1;function Iv(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gh||Mo==null||Mo!==uc(i)||(i=Mo,"selectionStart"in i&&uy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Aa&&Va(Aa,i)||(Aa=i,i=mc(Kh,"onSelect"),0<i.length&&(t=new sy("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Mo)))}function Pu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Bo={animationend:Pu("Animation","AnimationEnd"),animationiteration:Pu("Animation","AnimationIteration"),animationstart:Pu("Animation","AnimationStart"),transitionend:Pu("Transition","TransitionEnd")},Xf={},eb={};Or&&(eb=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function sd(e){if(Xf[e])return Xf[e];if(!Bo[e])return e;var t=Bo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in eb)return Xf[e]=t[n];return e}var tb=sd("animationend"),nb=sd("animationiteration"),rb=sd("animationstart"),ib=sd("transitionend"),ob=new Map,Lv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(e,t){ob.set(e,t),ro(t,[e])}for(var eh=0;eh<Lv.length;eh++){var th=Lv[eh],x4=th.toLowerCase(),S4=th[0].toUpperCase()+th.slice(1);xi(x4,"on"+S4)}xi(tb,"onAnimationEnd");xi(nb,"onAnimationIteration");xi(rb,"onAnimationStart");xi("dblclick","onDoubleClick");xi("focusin","onFocus");xi("focusout","onBlur");xi(ib,"onTransitionEnd");ls("onMouseEnter",["mouseout","mouseover"]);ls("onMouseLeave",["mouseout","mouseover"]);ls("onPointerEnter",["pointerout","pointerover"]);ls("onPointerLeave",["pointerout","pointerover"]);ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ea));function Ov(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,x3(i,t,void 0,e),e.currentTarget=null}function sb(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var c=i.length-1;0<=c;c--){var f=i[c],p=f.instance,m=f.currentTarget;if(f=f.listener,p!==u&&a.isPropagationStopped())break e;Ov(a,f,m),u=p}else for(c=0;c<i.length;c++){if(f=i[c],p=f.instance,m=f.currentTarget,f=f.listener,p!==u&&a.isPropagationStopped())break e;Ov(a,f,m),u=p}}}if(dc)throw e=Vh,dc=!1,Vh=null,e}function Xe(e,t){var n=t[Xh];n===void 0&&(n=t[Xh]=new Set);var i=e+"__bubble";n.has(i)||(ab(t,e,2,!1),n.add(i))}function nh(e,t,n){var i=0;t&&(i|=4),ab(n,e,i,t)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function Wa(e){if(!e[Ru]){e[Ru]=!0,p1.forEach(function(n){n!=="selectionchange"&&(_4.has(n)||nh(n,!1,e),nh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ru]||(t[Ru]=!0,nh("selectionchange",!1,t))}}function ab(e,t,n,i){switch(W1(t)){case 1:var a=j3;break;case 4:a=U3;break;default:a=iy}n=a.bind(null,t,n,e),a=void 0,!Fh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function rh(e,t,n,i,a){var u=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var c=i.tag;if(c===3||c===4){var f=i.stateNode.containerInfo;if(f===a||f.nodeType===8&&f.parentNode===a)break;if(c===4)for(c=i.return;c!==null;){var p=c.tag;if((p===3||p===4)&&(p=c.stateNode.containerInfo,p===a||p.nodeType===8&&p.parentNode===a))return;c=c.return}for(;f!==null;){if(c=Zi(f),c===null)return;if(p=c.tag,p===5||p===6){i=u=c;continue e}f=f.parentNode}}i=i.return}I1(function(){var m=u,w=ey(n),E=[];e:{var S=ob.get(e);if(S!==void 0){var k=sy,N=e;switch(e){case"keypress":if(qu(n)===0)break e;case"keydown":case"keyup":k=t4;break;case"focusin":N="focus",k=qf;break;case"focusout":N="blur",k=qf;break;case"beforeblur":case"afterblur":k=qf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=bv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=V3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=i4;break;case tb:case nb:case rb:k=H3;break;case ib:k=s4;break;case"scroll":k=z3;break;case"wheel":k=l4;break;case"copy":case"cut":case"paste":k=G3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Ev}var T=(t&4)!==0,O=!T&&e==="scroll",x=T?S!==null?S+"Capture":null:S;T=[];for(var v=m,C;v!==null;){C=v;var L=C.stateNode;if(C.tag===5&&L!==null&&(C=L,x!==null&&(L=Ba(v,x),L!=null&&T.push(Za(v,L,C)))),O)break;v=v.return}0<T.length&&(S=new k(S,N,null,n,w),E.push({event:S,listeners:T}))}}if(!(t&7)){e:{if(S=e==="mouseover"||e==="pointerover",k=e==="mouseout"||e==="pointerout",S&&n!==Uh&&(N=n.relatedTarget||n.fromElement)&&(Zi(N)||N[Pr]))break e;if((k||S)&&(S=w.window===w?w:(S=w.ownerDocument)?S.defaultView||S.parentWindow:window,k?(N=n.relatedTarget||n.toElement,k=m,N=N?Zi(N):null,N!==null&&(O=io(N),N!==O||N.tag!==5&&N.tag!==6)&&(N=null)):(k=null,N=m),k!==N)){if(T=bv,L="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(T=Ev,L="onPointerLeave",x="onPointerEnter",v="pointer"),O=k==null?S:jo(k),C=N==null?S:jo(N),S=new T(L,v+"leave",k,n,w),S.target=O,S.relatedTarget=C,L=null,Zi(w)===m&&(T=new T(x,v+"enter",N,n,w),T.target=C,T.relatedTarget=O,L=T),O=L,k&&N)t:{for(T=k,x=N,v=0,C=T;C;C=Io(C))v++;for(C=0,L=x;L;L=Io(L))C++;for(;0<v-C;)T=Io(T),v--;for(;0<C-v;)x=Io(x),C--;for(;v--;){if(T===x||x!==null&&T===x.alternate)break t;T=Io(T),x=Io(x)}T=null}else T=null;k!==null&&Pv(E,S,k,T,!1),N!==null&&O!==null&&Pv(E,O,N,T,!0)}}e:{if(S=m?jo(m):window,k=S.nodeName&&S.nodeName.toLowerCase(),k==="select"||k==="input"&&S.type==="file")var $=y4;else if(_v(S))if(q1)$=v4;else{$=g4;var V=m4}else(k=S.nodeName)&&k.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&($=w4);if($&&($=$(e,m))){Q1(E,$,n,w);break e}V&&V(e,S,m),e==="focusout"&&(V=S._wrapperState)&&V.controlled&&S.type==="number"&&$h(S,"number",S.value)}switch(V=m?jo(m):window,e){case"focusin":(_v(V)||V.contentEditable==="true")&&(Mo=V,Kh=m,Aa=null);break;case"focusout":Aa=Kh=Mo=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,Iv(E,n,w);break;case"selectionchange":if(E4)break;case"keydown":case"keyup":Iv(E,n,w)}var W;if(ly)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else Do?K1(e,n)&&(F="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(H1&&n.locale!=="ko"&&(Do||F!=="onCompositionStart"?F==="onCompositionEnd"&&Do&&(W=Z1()):(ai=w,oy="value"in ai?ai.value:ai.textContent,Do=!0)),V=mc(m,F),0<V.length&&(F=new kv(F,e,null,n,w),E.push({event:F,listeners:V}),W?F.data=W:(W=G1(n),W!==null&&(F.data=W)))),(W=c4?d4(e,n):f4(e,n))&&(m=mc(m,"onBeforeInput"),0<m.length&&(w=new kv("onBeforeInput","beforeinput",null,n,w),E.push({event:w,listeners:m}),w.data=W))}sb(E,t)})}function Za(e,t,n){return{instance:e,listener:t,currentTarget:n}}function mc(e,t){for(var n=t+"Capture",i=[];e!==null;){var a=e,u=a.stateNode;a.tag===5&&u!==null&&(a=u,u=Ba(e,n),u!=null&&i.unshift(Za(e,u,a)),u=Ba(e,t),u!=null&&i.push(Za(e,u,a))),e=e.return}return i}function Io(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pv(e,t,n,i,a){for(var u=t._reactName,c=[];n!==null&&n!==i;){var f=n,p=f.alternate,m=f.stateNode;if(p!==null&&p===i)break;f.tag===5&&m!==null&&(f=m,a?(p=Ba(n,u),p!=null&&c.unshift(Za(n,p,f))):a||(p=Ba(n,u),p!=null&&c.push(Za(n,p,f)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var C4=/\r\n?/g,N4=/\u0000|\uFFFD/g;function Rv(e){return(typeof e=="string"?e:""+e).replace(C4,`
`).replace(N4,"")}function $u(e,t,n){if(t=Rv(t),Rv(e)!==t&&n)throw Error(Z(425))}function gc(){}var Qh=null,qh=null;function Jh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yh=typeof setTimeout=="function"?setTimeout:void 0,A4=typeof clearTimeout=="function"?clearTimeout:void 0,$v=typeof Promise=="function"?Promise:void 0,T4=typeof queueMicrotask=="function"?queueMicrotask:typeof $v<"u"?function(e){return $v.resolve(null).then(e).catch(I4)}:Yh;function I4(e){setTimeout(function(){throw e})}function ih(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){e.removeChild(a),za(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);za(t)}function hi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gs=Math.random().toString(36).slice(2),sr="__reactFiber$"+gs,Ha="__reactProps$"+gs,Pr="__reactContainer$"+gs,Xh="__reactEvents$"+gs,L4="__reactListeners$"+gs,O4="__reactHandles$"+gs;function Zi(e){var t=e[sr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pr]||n[sr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Dv(e);e!==null;){if(n=e[sr])return n;e=Dv(e)}return t}e=n,n=e.parentNode}return null}function cl(e){return e=e[sr]||e[Pr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Z(33))}function ad(e){return e[Ha]||null}var ep=[],Uo=-1;function Si(e){return{current:e}}function et(e){0>Uo||(e.current=ep[Uo],ep[Uo]=null,Uo--)}function Je(e,t){Uo++,ep[Uo]=e.current,e.current=t}var bi={},Vt=Si(bi),rn=Si(!1),Ji=bi;function us(e,t){var n=e.type.contextTypes;if(!n)return bi;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},u;for(u in n)a[u]=t[u];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function on(e){return e=e.childContextTypes,e!=null}function wc(){et(rn),et(Vt)}function Mv(e,t,n){if(Vt.current!==bi)throw Error(Z(168));Je(Vt,t),Je(rn,n)}function lb(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(Z(108,m3(e)||"Unknown",a));return lt({},n,i)}function vc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bi,Ji=Vt.current,Je(Vt,e),Je(rn,rn.current),!0}function Bv(e,t,n){var i=e.stateNode;if(!i)throw Error(Z(169));n?(e=lb(e,t,Ji),i.__reactInternalMemoizedMergedChildContext=e,et(rn),et(Vt),Je(Vt,e)):et(rn),Je(rn,n)}var Cr=null,ld=!1,oh=!1;function ub(e){Cr===null?Cr=[e]:Cr.push(e)}function P4(e){ld=!0,ub(e)}function _i(){if(!oh&&Cr!==null){oh=!0;var e=0,t=He;try{var n=Cr;for(He=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}Cr=null,ld=!1}catch(a){throw Cr!==null&&(Cr=Cr.slice(e+1)),R1(ty,_i),a}finally{He=t,oh=!1}}return null}var zo=[],Fo=0,bc=null,kc=0,En=[],xn=0,Yi=null,Nr=1,Ar="";function Vi(e,t){zo[Fo++]=kc,zo[Fo++]=bc,bc=e,kc=t}function cb(e,t,n){En[xn++]=Nr,En[xn++]=Ar,En[xn++]=Yi,Yi=e;var i=Nr;e=Ar;var a=32-Vn(i)-1;i&=~(1<<a),n+=1;var u=32-Vn(t)+a;if(30<u){var c=a-a%5;u=(i&(1<<c)-1).toString(32),i>>=c,a-=c,Nr=1<<32-Vn(t)+a|n<<a|i,Ar=u+e}else Nr=1<<u|n<<a|i,Ar=e}function cy(e){e.return!==null&&(Vi(e,1),cb(e,1,0))}function dy(e){for(;e===bc;)bc=zo[--Fo],zo[Fo]=null,kc=zo[--Fo],zo[Fo]=null;for(;e===Yi;)Yi=En[--xn],En[xn]=null,Ar=En[--xn],En[xn]=null,Nr=En[--xn],En[xn]=null}var yn=null,pn=null,it=!1,zn=null;function db(e,t){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function jv(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yn=e,pn=hi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yn=e,pn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yi!==null?{id:Nr,overflow:Ar}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,yn=e,pn=null,!0):!1;default:return!1}}function tp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function np(e){if(it){var t=pn;if(t){var n=t;if(!jv(e,t)){if(tp(e))throw Error(Z(418));t=hi(n.nextSibling);var i=yn;t&&jv(e,t)?db(i,n):(e.flags=e.flags&-4097|2,it=!1,yn=e)}}else{if(tp(e))throw Error(Z(418));e.flags=e.flags&-4097|2,it=!1,yn=e}}}function Uv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yn=e}function Du(e){if(e!==yn)return!1;if(!it)return Uv(e),it=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jh(e.type,e.memoizedProps)),t&&(t=pn)){if(tp(e))throw fb(),Error(Z(418));for(;t;)db(e,t),t=hi(t.nextSibling)}if(Uv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){pn=hi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}pn=null}}else pn=yn?hi(e.stateNode.nextSibling):null;return!0}function fb(){for(var e=pn;e;)e=hi(e.nextSibling)}function cs(){pn=yn=null,it=!1}function fy(e){zn===null?zn=[e]:zn.push(e)}var R4=Mr.ReactCurrentBatchConfig;function jn(e,t){if(e&&e.defaultProps){t=lt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Ec=Si(null),xc=null,Vo=null,hy=null;function py(){hy=Vo=xc=null}function yy(e){var t=Ec.current;et(Ec),e._currentValue=t}function rp(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Yo(e,t){xc=e,hy=Vo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(tn=!0),e.firstContext=null)}function Cn(e){var t=e._currentValue;if(hy!==e)if(e={context:e,memoizedValue:t,next:null},Vo===null){if(xc===null)throw Error(Z(308));Vo=e,xc.dependencies={lanes:0,firstContext:e}}else Vo=Vo.next=e;return t}var Hi=null;function my(e){Hi===null?Hi=[e]:Hi.push(e)}function hb(e,t,n,i){var a=t.interleaved;return a===null?(n.next=n,my(t)):(n.next=a.next,a.next=n),t.interleaved=n,Rr(e,i)}function Rr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ri=!1;function gy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ir(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Be&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Rr(e,n)}return a=i.interleaved,a===null?(t.next=t,my(i)):(t.next=a.next,a.next=t),i.interleaved=t,Rr(e,n)}function Ju(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ny(e,n)}}function zv(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?a=u=c:u=u.next=c,n=n.next}while(n!==null);u===null?a=u=t:u=u.next=t}else a=u=t;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:u,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Sc(e,t,n,i){var a=e.updateQueue;ri=!1;var u=a.firstBaseUpdate,c=a.lastBaseUpdate,f=a.shared.pending;if(f!==null){a.shared.pending=null;var p=f,m=p.next;p.next=null,c===null?u=m:c.next=m,c=p;var w=e.alternate;w!==null&&(w=w.updateQueue,f=w.lastBaseUpdate,f!==c&&(f===null?w.firstBaseUpdate=m:f.next=m,w.lastBaseUpdate=p))}if(u!==null){var E=a.baseState;c=0,w=m=p=null,f=u;do{var S=f.lane,k=f.eventTime;if((i&S)===S){w!==null&&(w=w.next={eventTime:k,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var N=e,T=f;switch(S=t,k=n,T.tag){case 1:if(N=T.payload,typeof N=="function"){E=N.call(k,E,S);break e}E=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=T.payload,S=typeof N=="function"?N.call(k,E,S):N,S==null)break e;E=lt({},E,S);break e;case 2:ri=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,S=a.effects,S===null?a.effects=[f]:S.push(f))}else k={eventTime:k,lane:S,tag:f.tag,payload:f.payload,callback:f.callback,next:null},w===null?(m=w=k,p=E):w=w.next=k,c|=S;if(f=f.next,f===null){if(f=a.shared.pending,f===null)break;S=f,f=S.next,S.next=null,a.lastBaseUpdate=S,a.shared.pending=null}}while(1);if(w===null&&(p=E),a.baseState=p,a.firstBaseUpdate=m,a.lastBaseUpdate=w,t=a.shared.interleaved,t!==null){a=t;do c|=a.lane,a=a.next;while(a!==t)}else u===null&&(a.shared.lanes=0);eo|=c,e.lanes=c,e.memoizedState=E}}function Fv(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(Z(191,a));a.call(i)}}}var yb=new h1.Component().refs;function ip(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:lt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ud={isMounted:function(e){return(e=e._reactInternals)?io(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Gt(),a=mi(e),u=Ir(i,a);u.payload=t,n!=null&&(u.callback=n),t=pi(e,u,a),t!==null&&(Wn(t,e,a,i),Ju(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Gt(),a=mi(e),u=Ir(i,a);u.tag=1,u.payload=t,n!=null&&(u.callback=n),t=pi(e,u,a),t!==null&&(Wn(t,e,a,i),Ju(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gt(),i=mi(e),a=Ir(n,i);a.tag=2,t!=null&&(a.callback=t),t=pi(e,a,i),t!==null&&(Wn(t,e,i,n),Ju(t,e,i))}};function Vv(e,t,n,i,a,u,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,c):t.prototype&&t.prototype.isPureReactComponent?!Va(n,i)||!Va(a,u):!0}function mb(e,t,n){var i=!1,a=bi,u=t.contextType;return typeof u=="object"&&u!==null?u=Cn(u):(a=on(t)?Ji:Vt.current,i=t.contextTypes,u=(i=i!=null)?us(e,a):bi),t=new t(n,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ud,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=u),t}function Wv(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ud.enqueueReplaceState(t,t.state,null)}function op(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=yb,gy(e);var u=t.contextType;typeof u=="object"&&u!==null?a.context=Cn(u):(u=on(t)?Ji:Vt.current,a.context=us(e,u)),a.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(ip(e,t,u,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ud.enqueueReplaceState(a,a.state,null),Sc(e,n,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ha(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var i=n.stateNode}if(!i)throw Error(Z(147,e));var a=i,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(c){var f=a.refs;f===yb&&(f=a.refs={}),c===null?delete f[u]:f[u]=c},t._stringRef=u,t)}if(typeof e!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,e))}return e}function Mu(e,t){throw e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zv(e){var t=e._init;return t(e._payload)}function gb(e){function t(x,v){if(e){var C=x.deletions;C===null?(x.deletions=[v],x.flags|=16):C.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function i(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function a(x,v){return x=gi(x,v),x.index=0,x.sibling=null,x}function u(x,v,C){return x.index=C,e?(C=x.alternate,C!==null?(C=C.index,C<v?(x.flags|=2,v):C):(x.flags|=2,v)):(x.flags|=1048576,v)}function c(x){return e&&x.alternate===null&&(x.flags|=2),x}function f(x,v,C,L){return v===null||v.tag!==6?(v=fh(C,x.mode,L),v.return=x,v):(v=a(v,C),v.return=x,v)}function p(x,v,C,L){var $=C.type;return $===$o?w(x,v,C.props.children,L,C.key):v!==null&&(v.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===ni&&Zv($)===v.type)?(L=a(v,C.props),L.ref=ha(x,v,C),L.return=x,L):(L=rc(C.type,C.key,C.props,null,x.mode,L),L.ref=ha(x,v,C),L.return=x,L)}function m(x,v,C,L){return v===null||v.tag!==4||v.stateNode.containerInfo!==C.containerInfo||v.stateNode.implementation!==C.implementation?(v=hh(C,x.mode,L),v.return=x,v):(v=a(v,C.children||[]),v.return=x,v)}function w(x,v,C,L,$){return v===null||v.tag!==7?(v=qi(C,x.mode,L,$),v.return=x,v):(v=a(v,C),v.return=x,v)}function E(x,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return v=fh(""+v,x.mode,C),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Cu:return C=rc(v.type,v.key,v.props,null,x.mode,C),C.ref=ha(x,null,v),C.return=x,C;case Ro:return v=hh(v,x.mode,C),v.return=x,v;case ni:var L=v._init;return E(x,L(v._payload),C)}if(ba(v)||la(v))return v=qi(v,x.mode,C,null),v.return=x,v;Mu(x,v)}return null}function S(x,v,C,L){var $=v!==null?v.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return $!==null?null:f(x,v,""+C,L);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Cu:return C.key===$?p(x,v,C,L):null;case Ro:return C.key===$?m(x,v,C,L):null;case ni:return $=C._init,S(x,v,$(C._payload),L)}if(ba(C)||la(C))return $!==null?null:w(x,v,C,L,null);Mu(x,C)}return null}function k(x,v,C,L,$){if(typeof L=="string"&&L!==""||typeof L=="number")return x=x.get(C)||null,f(v,x,""+L,$);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Cu:return x=x.get(L.key===null?C:L.key)||null,p(v,x,L,$);case Ro:return x=x.get(L.key===null?C:L.key)||null,m(v,x,L,$);case ni:var V=L._init;return k(x,v,C,V(L._payload),$)}if(ba(L)||la(L))return x=x.get(C)||null,w(v,x,L,$,null);Mu(v,L)}return null}function N(x,v,C,L){for(var $=null,V=null,W=v,F=v=0,Y=null;W!==null&&F<C.length;F++){W.index>F?(Y=W,W=null):Y=W.sibling;var ue=S(x,W,C[F],L);if(ue===null){W===null&&(W=Y);break}e&&W&&ue.alternate===null&&t(x,W),v=u(ue,v,F),V===null?$=ue:V.sibling=ue,V=ue,W=Y}if(F===C.length)return n(x,W),it&&Vi(x,F),$;if(W===null){for(;F<C.length;F++)W=E(x,C[F],L),W!==null&&(v=u(W,v,F),V===null?$=W:V.sibling=W,V=W);return it&&Vi(x,F),$}for(W=i(x,W);F<C.length;F++)Y=k(W,x,F,C[F],L),Y!==null&&(e&&Y.alternate!==null&&W.delete(Y.key===null?F:Y.key),v=u(Y,v,F),V===null?$=Y:V.sibling=Y,V=Y);return e&&W.forEach(function($e){return t(x,$e)}),it&&Vi(x,F),$}function T(x,v,C,L){var $=la(C);if(typeof $!="function")throw Error(Z(150));if(C=$.call(C),C==null)throw Error(Z(151));for(var V=$=null,W=v,F=v=0,Y=null,ue=C.next();W!==null&&!ue.done;F++,ue=C.next()){W.index>F?(Y=W,W=null):Y=W.sibling;var $e=S(x,W,ue.value,L);if($e===null){W===null&&(W=Y);break}e&&W&&$e.alternate===null&&t(x,W),v=u($e,v,F),V===null?$=$e:V.sibling=$e,V=$e,W=Y}if(ue.done)return n(x,W),it&&Vi(x,F),$;if(W===null){for(;!ue.done;F++,ue=C.next())ue=E(x,ue.value,L),ue!==null&&(v=u(ue,v,F),V===null?$=ue:V.sibling=ue,V=ue);return it&&Vi(x,F),$}for(W=i(x,W);!ue.done;F++,ue=C.next())ue=k(W,x,F,ue.value,L),ue!==null&&(e&&ue.alternate!==null&&W.delete(ue.key===null?F:ue.key),v=u(ue,v,F),V===null?$=ue:V.sibling=ue,V=ue);return e&&W.forEach(function(tt){return t(x,tt)}),it&&Vi(x,F),$}function O(x,v,C,L){if(typeof C=="object"&&C!==null&&C.type===$o&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Cu:e:{for(var $=C.key,V=v;V!==null;){if(V.key===$){if($=C.type,$===$o){if(V.tag===7){n(x,V.sibling),v=a(V,C.props.children),v.return=x,x=v;break e}}else if(V.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===ni&&Zv($)===V.type){n(x,V.sibling),v=a(V,C.props),v.ref=ha(x,V,C),v.return=x,x=v;break e}n(x,V);break}else t(x,V);V=V.sibling}C.type===$o?(v=qi(C.props.children,x.mode,L,C.key),v.return=x,x=v):(L=rc(C.type,C.key,C.props,null,x.mode,L),L.ref=ha(x,v,C),L.return=x,x=L)}return c(x);case Ro:e:{for(V=C.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===C.containerInfo&&v.stateNode.implementation===C.implementation){n(x,v.sibling),v=a(v,C.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=hh(C,x.mode,L),v.return=x,x=v}return c(x);case ni:return V=C._init,O(x,v,V(C._payload),L)}if(ba(C))return N(x,v,C,L);if(la(C))return T(x,v,C,L);Mu(x,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,v!==null&&v.tag===6?(n(x,v.sibling),v=a(v,C),v.return=x,x=v):(n(x,v),v=fh(C,x.mode,L),v.return=x,x=v),c(x)):n(x,v)}return O}var ds=gb(!0),wb=gb(!1),dl={},lr=Si(dl),Ka=Si(dl),Ga=Si(dl);function Ki(e){if(e===dl)throw Error(Z(174));return e}function wy(e,t){switch(Je(Ga,t),Je(Ka,e),Je(lr,dl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mh(t,e)}et(lr),Je(lr,t)}function fs(){et(lr),et(Ka),et(Ga)}function vb(e){Ki(Ga.current);var t=Ki(lr.current),n=Mh(t,e.type);t!==n&&(Je(Ka,e),Je(lr,n))}function vy(e){Ka.current===e&&(et(lr),et(Ka))}var st=Si(0);function _c(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sh=[];function by(){for(var e=0;e<sh.length;e++)sh[e]._workInProgressVersionPrimary=null;sh.length=0}var Yu=Mr.ReactCurrentDispatcher,ah=Mr.ReactCurrentBatchConfig,Xi=0,at=null,wt=null,kt=null,Cc=!1,Ta=!1,Qa=0,$4=0;function Ut(){throw Error(Z(321))}function ky(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function Ey(e,t,n,i,a,u){if(Xi=u,at=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yu.current=e===null||e.memoizedState===null?j4:U4,e=n(i,a),Ta){u=0;do{if(Ta=!1,Qa=0,25<=u)throw Error(Z(301));u+=1,kt=wt=null,t.updateQueue=null,Yu.current=z4,e=n(i,a)}while(Ta)}if(Yu.current=Nc,t=wt!==null&&wt.next!==null,Xi=0,kt=wt=at=null,Cc=!1,t)throw Error(Z(300));return e}function xy(){var e=Qa!==0;return Qa=0,e}function or(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?at.memoizedState=kt=e:kt=kt.next=e,kt}function Nn(){if(wt===null){var e=at.alternate;e=e!==null?e.memoizedState:null}else e=wt.next;var t=kt===null?at.memoizedState:kt.next;if(t!==null)kt=t,wt=e;else{if(e===null)throw Error(Z(310));wt=e,e={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},kt===null?at.memoizedState=kt=e:kt=kt.next=e}return kt}function qa(e,t){return typeof t=="function"?t(e):t}function lh(e){var t=Nn(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var i=wt,a=i.baseQueue,u=n.pending;if(u!==null){if(a!==null){var c=a.next;a.next=u.next,u.next=c}i.baseQueue=a=u,n.pending=null}if(a!==null){u=a.next,i=i.baseState;var f=c=null,p=null,m=u;do{var w=m.lane;if((Xi&w)===w)p!==null&&(p=p.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:e(i,m.action);else{var E={lane:w,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};p===null?(f=p=E,c=i):p=p.next=E,at.lanes|=w,eo|=w}m=m.next}while(m!==null&&m!==u);p===null?c=i:p.next=f,Zn(i,t.memoizedState)||(tn=!0),t.memoizedState=i,t.baseState=c,t.baseQueue=p,n.lastRenderedState=i}if(e=n.interleaved,e!==null){a=e;do u=a.lane,at.lanes|=u,eo|=u,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function uh(e){var t=Nn(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,u=t.memoizedState;if(a!==null){n.pending=null;var c=a=a.next;do u=e(u,c.action),c=c.next;while(c!==a);Zn(u,t.memoizedState)||(tn=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,i]}function bb(){}function kb(e,t){var n=at,i=Nn(),a=t(),u=!Zn(i.memoizedState,a);if(u&&(i.memoizedState=a,tn=!0),i=i.queue,Sy(Sb.bind(null,n,i,e),[e]),i.getSnapshot!==t||u||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,Ja(9,xb.bind(null,n,i,a,t),void 0,null),xt===null)throw Error(Z(349));Xi&30||Eb(n,t,a)}return a}function Eb(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=at.updateQueue,t===null?(t={lastEffect:null,stores:null},at.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function xb(e,t,n,i){t.value=n,t.getSnapshot=i,_b(t)&&Cb(e)}function Sb(e,t,n){return n(function(){_b(t)&&Cb(e)})}function _b(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch{return!0}}function Cb(e){var t=Rr(e,1);t!==null&&Wn(t,e,1,-1)}function Hv(e){var t=or();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:e},t.queue=e,e=e.dispatch=B4.bind(null,at,e),[t.memoizedState,e]}function Ja(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=at.updateQueue,t===null?(t={lastEffect:null,stores:null},at.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function Nb(){return Nn().memoizedState}function Xu(e,t,n,i){var a=or();at.flags|=e,a.memoizedState=Ja(1|t,n,void 0,i===void 0?null:i)}function cd(e,t,n,i){var a=Nn();i=i===void 0?null:i;var u=void 0;if(wt!==null){var c=wt.memoizedState;if(u=c.destroy,i!==null&&ky(i,c.deps)){a.memoizedState=Ja(t,n,u,i);return}}at.flags|=e,a.memoizedState=Ja(1|t,n,u,i)}function Kv(e,t){return Xu(8390656,8,e,t)}function Sy(e,t){return cd(2048,8,e,t)}function Ab(e,t){return cd(4,2,e,t)}function Tb(e,t){return cd(4,4,e,t)}function Ib(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Lb(e,t,n){return n=n!=null?n.concat([e]):null,cd(4,4,Ib.bind(null,t,e),n)}function _y(){}function Ob(e,t){var n=Nn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&ky(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Pb(e,t){var n=Nn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&ky(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Rb(e,t,n){return Xi&21?(Zn(n,t)||(n=M1(),at.lanes|=n,eo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,tn=!0),e.memoizedState=n)}function D4(e,t){var n=He;He=n!==0&&4>n?n:4,e(!0);var i=ah.transition;ah.transition={};try{e(!1),t()}finally{He=n,ah.transition=i}}function $b(){return Nn().memoizedState}function M4(e,t,n){var i=mi(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Db(e))Mb(t,n);else if(n=hb(e,t,n,i),n!==null){var a=Gt();Wn(n,e,i,a),Bb(n,t,i)}}function B4(e,t,n){var i=mi(e),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Db(e))Mb(t,a);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var c=t.lastRenderedState,f=u(c,n);if(a.hasEagerState=!0,a.eagerState=f,Zn(f,c)){var p=t.interleaved;p===null?(a.next=a,my(t)):(a.next=p.next,p.next=a),t.interleaved=a;return}}catch{}finally{}n=hb(e,t,a,i),n!==null&&(a=Gt(),Wn(n,e,i,a),Bb(n,t,i))}}function Db(e){var t=e.alternate;return e===at||t!==null&&t===at}function Mb(e,t){Ta=Cc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Bb(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ny(e,n)}}var Nc={readContext:Cn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},j4={readContext:Cn,useCallback:function(e,t){return or().memoizedState=[e,t===void 0?null:t],e},useContext:Cn,useEffect:Kv,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Xu(4194308,4,Ib.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xu(4,2,e,t)},useMemo:function(e,t){var n=or();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=or();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=M4.bind(null,at,e),[i.memoizedState,e]},useRef:function(e){var t=or();return e={current:e},t.memoizedState=e},useState:Hv,useDebugValue:_y,useDeferredValue:function(e){return or().memoizedState=e},useTransition:function(){var e=Hv(!1),t=e[0];return e=D4.bind(null,e[1]),or().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=at,a=or();if(it){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=t(),xt===null)throw Error(Z(349));Xi&30||Eb(i,t,n)}a.memoizedState=n;var u={value:n,getSnapshot:t};return a.queue=u,Kv(Sb.bind(null,i,u,e),[e]),i.flags|=2048,Ja(9,xb.bind(null,i,u,n,t),void 0,null),n},useId:function(){var e=or(),t=xt.identifierPrefix;if(it){var n=Ar,i=Nr;n=(i&~(1<<32-Vn(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Qa++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=$4++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},U4={readContext:Cn,useCallback:Ob,useContext:Cn,useEffect:Sy,useImperativeHandle:Lb,useInsertionEffect:Ab,useLayoutEffect:Tb,useMemo:Pb,useReducer:lh,useRef:Nb,useState:function(){return lh(qa)},useDebugValue:_y,useDeferredValue:function(e){var t=Nn();return Rb(t,wt.memoizedState,e)},useTransition:function(){var e=lh(qa)[0],t=Nn().memoizedState;return[e,t]},useMutableSource:bb,useSyncExternalStore:kb,useId:$b,unstable_isNewReconciler:!1},z4={readContext:Cn,useCallback:Ob,useContext:Cn,useEffect:Sy,useImperativeHandle:Lb,useInsertionEffect:Ab,useLayoutEffect:Tb,useMemo:Pb,useReducer:uh,useRef:Nb,useState:function(){return uh(qa)},useDebugValue:_y,useDeferredValue:function(e){var t=Nn();return wt===null?t.memoizedState=e:Rb(t,wt.memoizedState,e)},useTransition:function(){var e=uh(qa)[0],t=Nn().memoizedState;return[e,t]},useMutableSource:bb,useSyncExternalStore:kb,useId:$b,unstable_isNewReconciler:!1};function hs(e,t){try{var n="",i=t;do n+=y3(i),i=i.return;while(i);var a=n}catch(u){a=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:a,digest:null}}function ch(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function sp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var F4=typeof WeakMap=="function"?WeakMap:Map;function jb(e,t,n){n=Ir(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Tc||(Tc=!0,mp=i),sp(e,t)},n}function Ub(e,t,n){n=Ir(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;n.payload=function(){return i(a)},n.callback=function(){sp(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){sp(e,t),typeof i!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),n}function Gv(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new F4;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(n)||(a.add(n),e=n8.bind(null,e,t,n),t.then(e,e))}function Qv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qv(e,t,n,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ir(-1,1),t.tag=2,pi(n,t,1))),n.lanes|=1),e)}var V4=Mr.ReactCurrentOwner,tn=!1;function Kt(e,t,n,i){t.child=e===null?wb(t,null,n,i):ds(t,e.child,n,i)}function Jv(e,t,n,i,a){n=n.render;var u=t.ref;return Yo(t,a),i=Ey(e,t,n,i,u,a),n=xy(),e!==null&&!tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$r(e,t,a)):(it&&n&&cy(t),t.flags|=1,Kt(e,t,i,a),t.child)}function Yv(e,t,n,i,a){if(e===null){var u=n.type;return typeof u=="function"&&!Py(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=u,zb(e,t,u,i,a)):(e=rc(n.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&a)){var c=u.memoizedProps;if(n=n.compare,n=n!==null?n:Va,n(c,i)&&e.ref===t.ref)return $r(e,t,a)}return t.flags|=1,e=gi(u,i),e.ref=t.ref,e.return=t,t.child=e}function zb(e,t,n,i,a){if(e!==null){var u=e.memoizedProps;if(Va(u,i)&&e.ref===t.ref)if(tn=!1,t.pendingProps=i=u,(e.lanes&a)!==0)e.flags&131072&&(tn=!0);else return t.lanes=e.lanes,$r(e,t,a)}return ap(e,t,n,i,a)}function Fb(e,t,n){var i=t.pendingProps,a=i.children,u=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Zo,hn),hn|=n;else{if(!(n&1073741824))return e=u!==null?u.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Je(Zo,hn),hn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=u!==null?u.baseLanes:n,Je(Zo,hn),hn|=i}else u!==null?(i=u.baseLanes|n,t.memoizedState=null):i=n,Je(Zo,hn),hn|=i;return Kt(e,t,a,n),t.child}function Vb(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ap(e,t,n,i,a){var u=on(n)?Ji:Vt.current;return u=us(t,u),Yo(t,a),n=Ey(e,t,n,i,u,a),i=xy(),e!==null&&!tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$r(e,t,a)):(it&&i&&cy(t),t.flags|=1,Kt(e,t,n,a),t.child)}function Xv(e,t,n,i,a){if(on(n)){var u=!0;vc(t)}else u=!1;if(Yo(t,a),t.stateNode===null)ec(e,t),mb(t,n,i),op(t,n,i,a),i=!0;else if(e===null){var c=t.stateNode,f=t.memoizedProps;c.props=f;var p=c.context,m=n.contextType;typeof m=="object"&&m!==null?m=Cn(m):(m=on(n)?Ji:Vt.current,m=us(t,m));var w=n.getDerivedStateFromProps,E=typeof w=="function"||typeof c.getSnapshotBeforeUpdate=="function";E||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==i||p!==m)&&Wv(t,c,i,m),ri=!1;var S=t.memoizedState;c.state=S,Sc(t,i,c,a),p=t.memoizedState,f!==i||S!==p||rn.current||ri?(typeof w=="function"&&(ip(t,n,w,i),p=t.memoizedState),(f=ri||Vv(t,n,f,i,S,p,m))?(E||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=p),c.props=i,c.state=p,c.context=m,i=f):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{c=t.stateNode,pb(e,t),f=t.memoizedProps,m=t.type===t.elementType?f:jn(t.type,f),c.props=m,E=t.pendingProps,S=c.context,p=n.contextType,typeof p=="object"&&p!==null?p=Cn(p):(p=on(n)?Ji:Vt.current,p=us(t,p));var k=n.getDerivedStateFromProps;(w=typeof k=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==E||S!==p)&&Wv(t,c,i,p),ri=!1,S=t.memoizedState,c.state=S,Sc(t,i,c,a);var N=t.memoizedState;f!==E||S!==N||rn.current||ri?(typeof k=="function"&&(ip(t,n,k,i),N=t.memoizedState),(m=ri||Vv(t,n,m,i,S,N,p)||!1)?(w||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(i,N,p),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(i,N,p)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||f===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=N),c.props=i,c.state=N,c.context=p,i=m):(typeof c.componentDidUpdate!="function"||f===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),i=!1)}return lp(e,t,n,i,u,a)}function lp(e,t,n,i,a,u){Vb(e,t);var c=(t.flags&128)!==0;if(!i&&!c)return a&&Bv(t,n,!1),$r(e,t,u);i=t.stateNode,V4.current=t;var f=c&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&c?(t.child=ds(t,e.child,null,u),t.child=ds(t,null,f,u)):Kt(e,t,f,u),t.memoizedState=i.state,a&&Bv(t,n,!0),t.child}function Wb(e){var t=e.stateNode;t.pendingContext?Mv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mv(e,t.context,!1),wy(e,t.containerInfo)}function e0(e,t,n,i,a){return cs(),fy(a),t.flags|=256,Kt(e,t,n,i),t.child}var up={dehydrated:null,treeContext:null,retryLane:0};function cp(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zb(e,t,n){var i=t.pendingProps,a=st.current,u=!1,c=(t.flags&128)!==0,f;if((f=c)||(f=e!==null&&e.memoizedState===null?!1:(a&2)!==0),f?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Je(st,a&1),e===null)return np(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=i.children,e=i.fallback,u?(i=t.mode,u=t.child,c={mode:"hidden",children:c},!(i&1)&&u!==null?(u.childLanes=0,u.pendingProps=c):u=hd(c,i,0,null),e=qi(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=cp(n),t.memoizedState=up,e):Cy(t,c));if(a=e.memoizedState,a!==null&&(f=a.dehydrated,f!==null))return W4(e,t,c,i,f,a,n);if(u){u=i.fallback,c=t.mode,a=e.child,f=a.sibling;var p={mode:"hidden",children:i.children};return!(c&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=p,t.deletions=null):(i=gi(a,p),i.subtreeFlags=a.subtreeFlags&14680064),f!==null?u=gi(f,u):(u=qi(u,c,n,null),u.flags|=2),u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,c=e.child.memoizedState,c=c===null?cp(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},u.memoizedState=c,u.childLanes=e.childLanes&~n,t.memoizedState=up,i}return u=e.child,e=u.sibling,i=gi(u,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Cy(e,t){return t=hd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bu(e,t,n,i){return i!==null&&fy(i),ds(t,e.child,null,n),e=Cy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function W4(e,t,n,i,a,u,c){if(n)return t.flags&256?(t.flags&=-257,i=ch(Error(Z(422))),Bu(e,t,c,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=i.fallback,a=t.mode,i=hd({mode:"visible",children:i.children},a,0,null),u=qi(u,a,c,null),u.flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,t.mode&1&&ds(t,e.child,null,c),t.child.memoizedState=cp(c),t.memoizedState=up,u);if(!(t.mode&1))return Bu(e,t,c,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var f=i.dgst;return i=f,u=Error(Z(419)),i=ch(u,i,void 0),Bu(e,t,c,i)}if(f=(c&e.childLanes)!==0,tn||f){if(i=xt,i!==null){switch(c&-c){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|c)?0:a,a!==0&&a!==u.retryLane&&(u.retryLane=a,Rr(e,a),Wn(i,e,a,-1))}return Oy(),i=ch(Error(Z(421))),Bu(e,t,c,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=r8.bind(null,e),a._reactRetry=t,null):(e=u.treeContext,pn=hi(a.nextSibling),yn=t,it=!0,zn=null,e!==null&&(En[xn++]=Nr,En[xn++]=Ar,En[xn++]=Yi,Nr=e.id,Ar=e.overflow,Yi=t),t=Cy(t,i.children),t.flags|=4096,t)}function t0(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),rp(e.return,t,n)}function dh(e,t,n,i,a){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=n,u.tailMode=a)}function Hb(e,t,n){var i=t.pendingProps,a=i.revealOrder,u=i.tail;if(Kt(e,t,i.children,n),i=st.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&t0(e,n,t);else if(e.tag===19)t0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Je(st,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&_c(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),dh(t,!1,a,n,u);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&_c(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}dh(t,!0,n,null,u);break;case"together":dh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ec(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $r(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),eo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,n=gi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Z4(e,t,n){switch(t.tag){case 3:Wb(t),cs();break;case 5:vb(t);break;case 1:on(t.type)&&vc(t);break;case 4:wy(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;Je(Ec,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Je(st,st.current&1),t.flags|=128,null):n&t.child.childLanes?Zb(e,t,n):(Je(st,st.current&1),e=$r(e,t,n),e!==null?e.sibling:null);Je(st,st.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return Hb(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Je(st,st.current),i)break;return null;case 22:case 23:return t.lanes=0,Fb(e,t,n)}return $r(e,t,n)}var Kb,dp,Gb,Qb;Kb=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dp=function(){};Gb=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,Ki(lr.current);var u=null;switch(n){case"input":a=Ph(e,a),i=Ph(e,i),u=[];break;case"select":a=lt({},a,{value:void 0}),i=lt({},i,{value:void 0}),u=[];break;case"textarea":a=Dh(e,a),i=Dh(e,i),u=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=gc)}Bh(n,i);var c;n=null;for(m in a)if(!i.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var f=a[m];for(c in f)f.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Da.hasOwnProperty(m)?u||(u=[]):(u=u||[]).push(m,null));for(m in i){var p=i[m];if(f=a!=null?a[m]:void 0,i.hasOwnProperty(m)&&p!==f&&(p!=null||f!=null))if(m==="style")if(f){for(c in f)!f.hasOwnProperty(c)||p&&p.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in p)p.hasOwnProperty(c)&&f[c]!==p[c]&&(n||(n={}),n[c]=p[c])}else n||(u||(u=[]),u.push(m,n)),n=p;else m==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,f=f?f.__html:void 0,p!=null&&f!==p&&(u=u||[]).push(m,p)):m==="children"?typeof p!="string"&&typeof p!="number"||(u=u||[]).push(m,""+p):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Da.hasOwnProperty(m)?(p!=null&&m==="onScroll"&&Xe("scroll",e),u||f===p||(u=[])):(u=u||[]).push(m,p))}n&&(u=u||[]).push("style",n);var m=u;(t.updateQueue=m)&&(t.flags|=4)}};Qb=function(e,t,n,i){n!==i&&(t.flags|=4)};function pa(e,t){if(!it)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function H4(e,t,n){var i=t.pendingProps;switch(dy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(t),null;case 1:return on(t.type)&&wc(),zt(t),null;case 3:return i=t.stateNode,fs(),et(rn),et(Vt),by(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Du(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zn!==null&&(vp(zn),zn=null))),dp(e,t),zt(t),null;case 5:vy(t);var a=Ki(Ga.current);if(n=t.type,e!==null&&t.stateNode!=null)Gb(e,t,n,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Z(166));return zt(t),null}if(e=Ki(lr.current),Du(t)){i=t.stateNode,n=t.type;var u=t.memoizedProps;switch(i[sr]=t,i[Ha]=u,e=(t.mode&1)!==0,n){case"dialog":Xe("cancel",i),Xe("close",i);break;case"iframe":case"object":case"embed":Xe("load",i);break;case"video":case"audio":for(a=0;a<Ea.length;a++)Xe(Ea[a],i);break;case"source":Xe("error",i);break;case"img":case"image":case"link":Xe("error",i),Xe("load",i);break;case"details":Xe("toggle",i);break;case"input":cv(i,u),Xe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!u.multiple},Xe("invalid",i);break;case"textarea":fv(i,u),Xe("invalid",i)}Bh(n,u),a=null;for(var c in u)if(u.hasOwnProperty(c)){var f=u[c];c==="children"?typeof f=="string"?i.textContent!==f&&(u.suppressHydrationWarning!==!0&&$u(i.textContent,f,e),a=["children",f]):typeof f=="number"&&i.textContent!==""+f&&(u.suppressHydrationWarning!==!0&&$u(i.textContent,f,e),a=["children",""+f]):Da.hasOwnProperty(c)&&f!=null&&c==="onScroll"&&Xe("scroll",i)}switch(n){case"input":Nu(i),dv(i,u,!0);break;case"textarea":Nu(i),hv(i);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(i.onclick=gc)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{c=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=E1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=c.createElement(n,{is:i.is}):(e=c.createElement(n),n==="select"&&(c=e,i.multiple?c.multiple=!0:i.size&&(c.size=i.size))):e=c.createElementNS(e,n),e[sr]=t,e[Ha]=i,Kb(e,t,!1,!1),t.stateNode=e;e:{switch(c=jh(n,i),n){case"dialog":Xe("cancel",e),Xe("close",e),a=i;break;case"iframe":case"object":case"embed":Xe("load",e),a=i;break;case"video":case"audio":for(a=0;a<Ea.length;a++)Xe(Ea[a],e);a=i;break;case"source":Xe("error",e),a=i;break;case"img":case"image":case"link":Xe("error",e),Xe("load",e),a=i;break;case"details":Xe("toggle",e),a=i;break;case"input":cv(e,i),a=Ph(e,i),Xe("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=lt({},i,{value:void 0}),Xe("invalid",e);break;case"textarea":fv(e,i),a=Dh(e,i),Xe("invalid",e);break;default:a=i}Bh(n,a),f=a;for(u in f)if(f.hasOwnProperty(u)){var p=f[u];u==="style"?_1(e,p):u==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&x1(e,p)):u==="children"?typeof p=="string"?(n!=="textarea"||p!=="")&&Ma(e,p):typeof p=="number"&&Ma(e,""+p):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Da.hasOwnProperty(u)?p!=null&&u==="onScroll"&&Xe("scroll",e):p!=null&&qp(e,u,p,c))}switch(n){case"input":Nu(e),dv(e,i,!1);break;case"textarea":Nu(e),hv(e);break;case"option":i.value!=null&&e.setAttribute("value",""+vi(i.value));break;case"select":e.multiple=!!i.multiple,u=i.value,u!=null?Go(e,!!i.multiple,u,!1):i.defaultValue!=null&&Go(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=gc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return zt(t),null;case 6:if(e&&t.stateNode!=null)Qb(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Z(166));if(n=Ki(Ga.current),Ki(lr.current),Du(t)){if(i=t.stateNode,n=t.memoizedProps,i[sr]=t,(u=i.nodeValue!==n)&&(e=yn,e!==null))switch(e.tag){case 3:$u(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$u(i.nodeValue,n,(e.mode&1)!==0)}u&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[sr]=t,t.stateNode=i}return zt(t),null;case 13:if(et(st),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(it&&pn!==null&&t.mode&1&&!(t.flags&128))fb(),cs(),t.flags|=98560,u=!1;else if(u=Du(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(Z(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(Z(317));u[sr]=t}else cs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zt(t),u=!1}else zn!==null&&(vp(zn),zn=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||st.current&1?vt===0&&(vt=3):Oy())),t.updateQueue!==null&&(t.flags|=4),zt(t),null);case 4:return fs(),dp(e,t),e===null&&Wa(t.stateNode.containerInfo),zt(t),null;case 10:return yy(t.type._context),zt(t),null;case 17:return on(t.type)&&wc(),zt(t),null;case 19:if(et(st),u=t.memoizedState,u===null)return zt(t),null;if(i=(t.flags&128)!==0,c=u.rendering,c===null)if(i)pa(u,!1);else{if(vt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=_c(e),c!==null){for(t.flags|=128,pa(u,!1),i=c.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)u=n,e=i,u.flags&=14680066,c=u.alternate,c===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Je(st,st.current&1|2),t.child}e=e.sibling}u.tail!==null&&ft()>ps&&(t.flags|=128,i=!0,pa(u,!1),t.lanes=4194304)}else{if(!i)if(e=_c(c),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pa(u,!0),u.tail===null&&u.tailMode==="hidden"&&!c.alternate&&!it)return zt(t),null}else 2*ft()-u.renderingStartTime>ps&&n!==1073741824&&(t.flags|=128,i=!0,pa(u,!1),t.lanes=4194304);u.isBackwards?(c.sibling=t.child,t.child=c):(n=u.last,n!==null?n.sibling=c:t.child=c,u.last=c)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=ft(),t.sibling=null,n=st.current,Je(st,i?n&1|2:n&1),t):(zt(t),null);case 22:case 23:return Ly(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?hn&1073741824&&(zt(t),t.subtreeFlags&6&&(t.flags|=8192)):zt(t),null;case 24:return null;case 25:return null}throw Error(Z(156,t.tag))}function K4(e,t){switch(dy(t),t.tag){case 1:return on(t.type)&&wc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fs(),et(rn),et(Vt),by(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return vy(t),null;case 13:if(et(st),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));cs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return et(st),null;case 4:return fs(),null;case 10:return yy(t.type._context),null;case 22:case 23:return Ly(),null;case 24:return null;default:return null}}var ju=!1,Ft=!1,G4=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Wo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ut(e,t,i)}else n.current=null}function fp(e,t,n){try{n()}catch(i){ut(e,t,i)}}var n0=!1;function Q4(e,t){if(Qh=pc,e=X1(),uy(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var c=0,f=-1,p=-1,m=0,w=0,E=e,S=null;t:for(;;){for(var k;E!==n||a!==0&&E.nodeType!==3||(f=c+a),E!==u||i!==0&&E.nodeType!==3||(p=c+i),E.nodeType===3&&(c+=E.nodeValue.length),(k=E.firstChild)!==null;)S=E,E=k;for(;;){if(E===e)break t;if(S===n&&++m===a&&(f=c),S===u&&++w===i&&(p=c),(k=E.nextSibling)!==null)break;E=S,S=E.parentNode}E=k}n=f===-1||p===-1?null:{start:f,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(qh={focusedElem:e,selectionRange:n},pc=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var T=N.memoizedProps,O=N.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?T:jn(t.type,T),O);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(L){ut(t,t.return,L)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return N=n0,n0=!1,N}function Ia(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var u=a.destroy;a.destroy=void 0,u!==void 0&&fp(t,n,u)}a=a.next}while(a!==i)}}function dd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function hp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function qb(e){var t=e.alternate;t!==null&&(e.alternate=null,qb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sr],delete t[Ha],delete t[Xh],delete t[L4],delete t[O4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jb(e){return e.tag===5||e.tag===3||e.tag===4}function r0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pp(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=gc));else if(i!==4&&(e=e.child,e!==null))for(pp(e,t,n),e=e.sibling;e!==null;)pp(e,t,n),e=e.sibling}function yp(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(yp(e,t,n),e=e.sibling;e!==null;)yp(e,t,n),e=e.sibling}var Pt=null,Un=!1;function ei(e,t,n){for(n=n.child;n!==null;)Yb(e,t,n),n=n.sibling}function Yb(e,t,n){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(rd,n)}catch{}switch(n.tag){case 5:Ft||Wo(n,t);case 6:var i=Pt,a=Un;Pt=null,ei(e,t,n),Pt=i,Un=a,Pt!==null&&(Un?(e=Pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(Un?(e=Pt,n=n.stateNode,e.nodeType===8?ih(e.parentNode,n):e.nodeType===1&&ih(e,n),za(e)):ih(Pt,n.stateNode));break;case 4:i=Pt,a=Un,Pt=n.stateNode.containerInfo,Un=!0,ei(e,t,n),Pt=i,Un=a;break;case 0:case 11:case 14:case 15:if(!Ft&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var u=a,c=u.destroy;u=u.tag,c!==void 0&&(u&2||u&4)&&fp(n,t,c),a=a.next}while(a!==i)}ei(e,t,n);break;case 1:if(!Ft&&(Wo(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(f){ut(n,t,f)}ei(e,t,n);break;case 21:ei(e,t,n);break;case 22:n.mode&1?(Ft=(i=Ft)||n.memoizedState!==null,ei(e,t,n),Ft=i):ei(e,t,n);break;default:ei(e,t,n)}}function i0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new G4),t.forEach(function(i){var a=i8.bind(null,e,i);n.has(i)||(n.add(i),i.then(a,a))})}}function Dn(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var u=e,c=t,f=c;e:for(;f!==null;){switch(f.tag){case 5:Pt=f.stateNode,Un=!1;break e;case 3:Pt=f.stateNode.containerInfo,Un=!0;break e;case 4:Pt=f.stateNode.containerInfo,Un=!0;break e}f=f.return}if(Pt===null)throw Error(Z(160));Yb(u,c,a),Pt=null,Un=!1;var p=a.alternate;p!==null&&(p.return=null),a.return=null}catch(m){ut(a,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Xb(t,e),t=t.sibling}function Xb(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Dn(t,e),rr(e),i&4){try{Ia(3,e,e.return),dd(3,e)}catch(T){ut(e,e.return,T)}try{Ia(5,e,e.return)}catch(T){ut(e,e.return,T)}}break;case 1:Dn(t,e),rr(e),i&512&&n!==null&&Wo(n,n.return);break;case 5:if(Dn(t,e),rr(e),i&512&&n!==null&&Wo(n,n.return),e.flags&32){var a=e.stateNode;try{Ma(a,"")}catch(T){ut(e,e.return,T)}}if(i&4&&(a=e.stateNode,a!=null)){var u=e.memoizedProps,c=n!==null?n.memoizedProps:u,f=e.type,p=e.updateQueue;if(e.updateQueue=null,p!==null)try{f==="input"&&u.type==="radio"&&u.name!=null&&b1(a,u),jh(f,c);var m=jh(f,u);for(c=0;c<p.length;c+=2){var w=p[c],E=p[c+1];w==="style"?_1(a,E):w==="dangerouslySetInnerHTML"?x1(a,E):w==="children"?Ma(a,E):qp(a,w,E,m)}switch(f){case"input":Rh(a,u);break;case"textarea":k1(a,u);break;case"select":var S=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!u.multiple;var k=u.value;k!=null?Go(a,!!u.multiple,k,!1):S!==!!u.multiple&&(u.defaultValue!=null?Go(a,!!u.multiple,u.defaultValue,!0):Go(a,!!u.multiple,u.multiple?[]:"",!1))}a[Ha]=u}catch(T){ut(e,e.return,T)}}break;case 6:if(Dn(t,e),rr(e),i&4){if(e.stateNode===null)throw Error(Z(162));a=e.stateNode,u=e.memoizedProps;try{a.nodeValue=u}catch(T){ut(e,e.return,T)}}break;case 3:if(Dn(t,e),rr(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{za(t.containerInfo)}catch(T){ut(e,e.return,T)}break;case 4:Dn(t,e),rr(e);break;case 13:Dn(t,e),rr(e),a=e.child,a.flags&8192&&(u=a.memoizedState!==null,a.stateNode.isHidden=u,!u||a.alternate!==null&&a.alternate.memoizedState!==null||(Ty=ft())),i&4&&i0(e);break;case 22:if(w=n!==null&&n.memoizedState!==null,e.mode&1?(Ft=(m=Ft)||w,Dn(t,e),Ft=m):Dn(t,e),rr(e),i&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!w&&e.mode&1)for(ee=e,w=e.child;w!==null;){for(E=ee=w;ee!==null;){switch(S=ee,k=S.child,S.tag){case 0:case 11:case 14:case 15:Ia(4,S,S.return);break;case 1:Wo(S,S.return);var N=S.stateNode;if(typeof N.componentWillUnmount=="function"){i=S,n=S.return;try{t=i,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(T){ut(i,n,T)}}break;case 5:Wo(S,S.return);break;case 22:if(S.memoizedState!==null){s0(E);continue}}k!==null?(k.return=S,ee=k):s0(E)}w=w.sibling}e:for(w=null,E=e;;){if(E.tag===5){if(w===null){w=E;try{a=E.stateNode,m?(u=a.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(f=E.stateNode,p=E.memoizedProps.style,c=p!=null&&p.hasOwnProperty("display")?p.display:null,f.style.display=S1("display",c))}catch(T){ut(e,e.return,T)}}}else if(E.tag===6){if(w===null)try{E.stateNode.nodeValue=m?"":E.memoizedProps}catch(T){ut(e,e.return,T)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;w===E&&(w=null),E=E.return}w===E&&(w=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:Dn(t,e),rr(e),i&4&&i0(e);break;case 21:break;default:Dn(t,e),rr(e)}}function rr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jb(n)){var i=n;break e}n=n.return}throw Error(Z(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(Ma(a,""),i.flags&=-33);var u=r0(e);yp(e,u,a);break;case 3:case 4:var c=i.stateNode.containerInfo,f=r0(e);pp(e,f,c);break;default:throw Error(Z(161))}}catch(p){ut(e,e.return,p)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function q4(e,t,n){ee=e,ek(e)}function ek(e,t,n){for(var i=(e.mode&1)!==0;ee!==null;){var a=ee,u=a.child;if(a.tag===22&&i){var c=a.memoizedState!==null||ju;if(!c){var f=a.alternate,p=f!==null&&f.memoizedState!==null||Ft;f=ju;var m=Ft;if(ju=c,(Ft=p)&&!m)for(ee=a;ee!==null;)c=ee,p=c.child,c.tag===22&&c.memoizedState!==null?a0(a):p!==null?(p.return=c,ee=p):a0(a);for(;u!==null;)ee=u,ek(u),u=u.sibling;ee=a,ju=f,Ft=m}o0(e)}else a.subtreeFlags&8772&&u!==null?(u.return=a,ee=u):o0(e)}}function o0(e){for(;ee!==null;){var t=ee;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ft||dd(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ft)if(n===null)i.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:jn(t.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&Fv(t,u,i);break;case 3:var c=t.updateQueue;if(c!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Fv(t,c,n)}break;case 5:var f=t.stateNode;if(n===null&&t.flags&4){n=f;var p=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&n.focus();break;case"img":p.src&&(n.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var w=m.memoizedState;if(w!==null){var E=w.dehydrated;E!==null&&za(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Ft||t.flags&512&&hp(t)}catch(S){ut(t,t.return,S)}}if(t===e){ee=null;break}if(n=t.sibling,n!==null){n.return=t.return,ee=n;break}ee=t.return}}function s0(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ee=n;break}ee=t.return}}function a0(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{dd(4,t)}catch(p){ut(t,n,p)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(p){ut(t,a,p)}}var u=t.return;try{hp(t)}catch(p){ut(t,u,p)}break;case 5:var c=t.return;try{hp(t)}catch(p){ut(t,c,p)}}}catch(p){ut(t,t.return,p)}if(t===e){ee=null;break}var f=t.sibling;if(f!==null){f.return=t.return,ee=f;break}ee=t.return}}var J4=Math.ceil,Ac=Mr.ReactCurrentDispatcher,Ny=Mr.ReactCurrentOwner,_n=Mr.ReactCurrentBatchConfig,Be=0,xt=null,mt=null,$t=0,hn=0,Zo=Si(0),vt=0,Ya=null,eo=0,fd=0,Ay=0,La=null,en=null,Ty=0,ps=1/0,Sr=null,Tc=!1,mp=null,yi=null,Uu=!1,li=null,Ic=0,Oa=0,gp=null,tc=-1,nc=0;function Gt(){return Be&6?ft():tc!==-1?tc:tc=ft()}function mi(e){return e.mode&1?Be&2&&$t!==0?$t&-$t:R4.transition!==null?(nc===0&&(nc=M1()),nc):(e=He,e!==0||(e=window.event,e=e===void 0?16:W1(e.type)),e):1}function Wn(e,t,n,i){if(50<Oa)throw Oa=0,gp=null,Error(Z(185));ll(e,n,i),(!(Be&2)||e!==xt)&&(e===xt&&(!(Be&2)&&(fd|=n),vt===4&&si(e,$t)),sn(e,i),n===1&&Be===0&&!(t.mode&1)&&(ps=ft()+500,ld&&_i()))}function sn(e,t){var n=e.callbackNode;R3(e,t);var i=hc(e,e===xt?$t:0);if(i===0)n!==null&&mv(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&mv(n),t===1)e.tag===0?P4(l0.bind(null,e)):ub(l0.bind(null,e)),T4(function(){!(Be&6)&&_i()}),n=null;else{switch(B1(i)){case 1:n=ty;break;case 4:n=$1;break;case 16:n=fc;break;case 536870912:n=D1;break;default:n=fc}n=lk(n,tk.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tk(e,t){if(tc=-1,nc=0,Be&6)throw Error(Z(327));var n=e.callbackNode;if(Xo()&&e.callbackNode!==n)return null;var i=hc(e,e===xt?$t:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Lc(e,i);else{t=i;var a=Be;Be|=2;var u=rk();(xt!==e||$t!==t)&&(Sr=null,ps=ft()+500,Qi(e,t));do try{e8();break}catch(f){nk(e,f)}while(1);py(),Ac.current=u,Be=a,mt!==null?t=0:(xt=null,$t=0,t=vt)}if(t!==0){if(t===2&&(a=Wh(e),a!==0&&(i=a,t=wp(e,a))),t===1)throw n=Ya,Qi(e,0),si(e,i),sn(e,ft()),n;if(t===6)si(e,i);else{if(a=e.current.alternate,!(i&30)&&!Y4(a)&&(t=Lc(e,i),t===2&&(u=Wh(e),u!==0&&(i=u,t=wp(e,u))),t===1))throw n=Ya,Qi(e,0),si(e,i),sn(e,ft()),n;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(Z(345));case 2:Wi(e,en,Sr);break;case 3:if(si(e,i),(i&130023424)===i&&(t=Ty+500-ft(),10<t)){if(hc(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){Gt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Yh(Wi.bind(null,e,en,Sr),t);break}Wi(e,en,Sr);break;case 4:if(si(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var c=31-Vn(i);u=1<<c,c=t[c],c>a&&(a=c),i&=~u}if(i=a,i=ft()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*J4(i/1960))-i,10<i){e.timeoutHandle=Yh(Wi.bind(null,e,en,Sr),i);break}Wi(e,en,Sr);break;case 5:Wi(e,en,Sr);break;default:throw Error(Z(329))}}}return sn(e,ft()),e.callbackNode===n?tk.bind(null,e):null}function wp(e,t){var n=La;return e.current.memoizedState.isDehydrated&&(Qi(e,t).flags|=256),e=Lc(e,t),e!==2&&(t=en,en=n,t!==null&&vp(t)),e}function vp(e){en===null?en=e:en.push.apply(en,e)}function Y4(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],u=a.getSnapshot;a=a.value;try{if(!Zn(u(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function si(e,t){for(t&=~Ay,t&=~fd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vn(t),i=1<<n;e[n]=-1,t&=~i}}function l0(e){if(Be&6)throw Error(Z(327));Xo();var t=hc(e,0);if(!(t&1))return sn(e,ft()),null;var n=Lc(e,t);if(e.tag!==0&&n===2){var i=Wh(e);i!==0&&(t=i,n=wp(e,i))}if(n===1)throw n=Ya,Qi(e,0),si(e,t),sn(e,ft()),n;if(n===6)throw Error(Z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wi(e,en,Sr),sn(e,ft()),null}function Iy(e,t){var n=Be;Be|=1;try{return e(t)}finally{Be=n,Be===0&&(ps=ft()+500,ld&&_i())}}function to(e){li!==null&&li.tag===0&&!(Be&6)&&Xo();var t=Be;Be|=1;var n=_n.transition,i=He;try{if(_n.transition=null,He=1,e)return e()}finally{He=i,_n.transition=n,Be=t,!(Be&6)&&_i()}}function Ly(){hn=Zo.current,et(Zo)}function Qi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,A4(n)),mt!==null)for(n=mt.return;n!==null;){var i=n;switch(dy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wc();break;case 3:fs(),et(rn),et(Vt),by();break;case 5:vy(i);break;case 4:fs();break;case 13:et(st);break;case 19:et(st);break;case 10:yy(i.type._context);break;case 22:case 23:Ly()}n=n.return}if(xt=e,mt=e=gi(e.current,null),$t=hn=t,vt=0,Ya=null,Ay=fd=eo=0,en=La=null,Hi!==null){for(t=0;t<Hi.length;t++)if(n=Hi[t],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,u=n.pending;if(u!==null){var c=u.next;u.next=a,i.next=c}n.pending=i}Hi=null}return e}function nk(e,t){do{var n=mt;try{if(py(),Yu.current=Nc,Cc){for(var i=at.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Cc=!1}if(Xi=0,kt=wt=at=null,Ta=!1,Qa=0,Ny.current=null,n===null||n.return===null){vt=1,Ya=t,mt=null;break}e:{var u=e,c=n.return,f=n,p=t;if(t=$t,f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var m=p,w=f,E=w.tag;if(!(w.mode&1)&&(E===0||E===11||E===15)){var S=w.alternate;S?(w.updateQueue=S.updateQueue,w.memoizedState=S.memoizedState,w.lanes=S.lanes):(w.updateQueue=null,w.memoizedState=null)}var k=Qv(c);if(k!==null){k.flags&=-257,qv(k,c,f,u,t),k.mode&1&&Gv(u,m,t),t=k,p=m;var N=t.updateQueue;if(N===null){var T=new Set;T.add(p),t.updateQueue=T}else N.add(p);break e}else{if(!(t&1)){Gv(u,m,t),Oy();break e}p=Error(Z(426))}}else if(it&&f.mode&1){var O=Qv(c);if(O!==null){!(O.flags&65536)&&(O.flags|=256),qv(O,c,f,u,t),fy(hs(p,f));break e}}u=p=hs(p,f),vt!==4&&(vt=2),La===null?La=[u]:La.push(u),u=c;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var x=jb(u,p,t);zv(u,x);break e;case 1:f=p;var v=u.type,C=u.stateNode;if(!(u.flags&128)&&(typeof v.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(yi===null||!yi.has(C)))){u.flags|=65536,t&=-t,u.lanes|=t;var L=Ub(u,f,t);zv(u,L);break e}}u=u.return}while(u!==null)}ok(n)}catch($){t=$,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(1)}function rk(){var e=Ac.current;return Ac.current=Nc,e===null?Nc:e}function Oy(){(vt===0||vt===3||vt===2)&&(vt=4),xt===null||!(eo&268435455)&&!(fd&268435455)||si(xt,$t)}function Lc(e,t){var n=Be;Be|=2;var i=rk();(xt!==e||$t!==t)&&(Sr=null,Qi(e,t));do try{X4();break}catch(a){nk(e,a)}while(1);if(py(),Be=n,Ac.current=i,mt!==null)throw Error(Z(261));return xt=null,$t=0,vt}function X4(){for(;mt!==null;)ik(mt)}function e8(){for(;mt!==null&&!_3();)ik(mt)}function ik(e){var t=ak(e.alternate,e,hn);e.memoizedProps=e.pendingProps,t===null?ok(e):mt=t,Ny.current=null}function ok(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=K4(n,t),n!==null){n.flags&=32767,mt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vt=6,mt=null;return}}else if(n=H4(n,t,hn),n!==null){mt=n;return}if(t=t.sibling,t!==null){mt=t;return}mt=t=e}while(t!==null);vt===0&&(vt=5)}function Wi(e,t,n){var i=He,a=_n.transition;try{_n.transition=null,He=1,t8(e,t,n,i)}finally{_n.transition=a,He=i}return null}function t8(e,t,n,i){do Xo();while(li!==null);if(Be&6)throw Error(Z(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0;var u=n.lanes|n.childLanes;if($3(e,u),e===xt&&(mt=xt=null,$t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Uu||(Uu=!0,lk(fc,function(){return Xo(),null})),u=(n.flags&15990)!==0,n.subtreeFlags&15990||u){u=_n.transition,_n.transition=null;var c=He;He=1;var f=Be;Be|=4,Ny.current=null,Q4(e,n),Xb(n,e),k4(qh),pc=!!Qh,qh=Qh=null,e.current=n,q4(n),C3(),Be=f,He=c,_n.transition=u}else e.current=n;if(Uu&&(Uu=!1,li=e,Ic=a),u=e.pendingLanes,u===0&&(yi=null),T3(n.stateNode),sn(e,ft()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(Tc)throw Tc=!1,e=mp,mp=null,e;return Ic&1&&e.tag!==0&&Xo(),u=e.pendingLanes,u&1?e===gp?Oa++:(Oa=0,gp=e):Oa=0,_i(),null}function Xo(){if(li!==null){var e=B1(Ic),t=_n.transition,n=He;try{if(_n.transition=null,He=16>e?16:e,li===null)var i=!1;else{if(e=li,li=null,Ic=0,Be&6)throw Error(Z(331));var a=Be;for(Be|=4,ee=e.current;ee!==null;){var u=ee,c=u.child;if(ee.flags&16){var f=u.deletions;if(f!==null){for(var p=0;p<f.length;p++){var m=f[p];for(ee=m;ee!==null;){var w=ee;switch(w.tag){case 0:case 11:case 15:Ia(8,w,u)}var E=w.child;if(E!==null)E.return=w,ee=E;else for(;ee!==null;){w=ee;var S=w.sibling,k=w.return;if(qb(w),w===m){ee=null;break}if(S!==null){S.return=k,ee=S;break}ee=k}}}var N=u.alternate;if(N!==null){var T=N.child;if(T!==null){N.child=null;do{var O=T.sibling;T.sibling=null,T=O}while(T!==null)}}ee=u}}if(u.subtreeFlags&2064&&c!==null)c.return=u,ee=c;else e:for(;ee!==null;){if(u=ee,u.flags&2048)switch(u.tag){case 0:case 11:case 15:Ia(9,u,u.return)}var x=u.sibling;if(x!==null){x.return=u.return,ee=x;break e}ee=u.return}}var v=e.current;for(ee=v;ee!==null;){c=ee;var C=c.child;if(c.subtreeFlags&2064&&C!==null)C.return=c,ee=C;else e:for(c=v;ee!==null;){if(f=ee,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:dd(9,f)}}catch($){ut(f,f.return,$)}if(f===c){ee=null;break e}var L=f.sibling;if(L!==null){L.return=f.return,ee=L;break e}ee=f.return}}if(Be=a,_i(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(rd,e)}catch{}i=!0}return i}finally{He=n,_n.transition=t}}return!1}function u0(e,t,n){t=hs(n,t),t=jb(e,t,1),e=pi(e,t,1),t=Gt(),e!==null&&(ll(e,1,t),sn(e,t))}function ut(e,t,n){if(e.tag===3)u0(e,e,n);else for(;t!==null;){if(t.tag===3){u0(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(yi===null||!yi.has(i))){e=hs(n,e),e=Ub(t,e,1),t=pi(t,e,1),e=Gt(),t!==null&&(ll(t,1,e),sn(t,e));break}}t=t.return}}function n8(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=Gt(),e.pingedLanes|=e.suspendedLanes&n,xt===e&&($t&n)===n&&(vt===4||vt===3&&($t&130023424)===$t&&500>ft()-Ty?Qi(e,0):Ay|=n),sn(e,t)}function sk(e,t){t===0&&(e.mode&1?(t=Iu,Iu<<=1,!(Iu&130023424)&&(Iu=4194304)):t=1);var n=Gt();e=Rr(e,t),e!==null&&(ll(e,t,n),sn(e,n))}function r8(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),sk(e,n)}function i8(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Z(314))}i!==null&&i.delete(t),sk(e,n)}var ak;ak=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||rn.current)tn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return tn=!1,Z4(e,t,n);tn=!!(e.flags&131072)}else tn=!1,it&&t.flags&1048576&&cb(t,kc,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;ec(e,t),e=t.pendingProps;var a=us(t,Vt.current);Yo(t,n),a=Ey(null,t,i,e,a,n);var u=xy();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,on(i)?(u=!0,vc(t)):u=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,gy(t),a.updater=ud,t.stateNode=a,a._reactInternals=t,op(t,i,e,n),t=lp(null,t,i,!0,u,n)):(t.tag=0,it&&u&&cy(t),Kt(null,t,a,n),t=t.child),t;case 16:i=t.elementType;e:{switch(ec(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=s8(i),e=jn(i,e),a){case 0:t=ap(null,t,i,e,n);break e;case 1:t=Xv(null,t,i,e,n);break e;case 11:t=Jv(null,t,i,e,n);break e;case 14:t=Yv(null,t,i,jn(i.type,e),n);break e}throw Error(Z(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:jn(i,a),ap(e,t,i,a,n);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:jn(i,a),Xv(e,t,i,a,n);case 3:e:{if(Wb(t),e===null)throw Error(Z(387));i=t.pendingProps,u=t.memoizedState,a=u.element,pb(e,t),Sc(t,i,null,n);var c=t.memoizedState;if(i=c.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){a=hs(Error(Z(423)),t),t=e0(e,t,i,n,a);break e}else if(i!==a){a=hs(Error(Z(424)),t),t=e0(e,t,i,n,a);break e}else for(pn=hi(t.stateNode.containerInfo.firstChild),yn=t,it=!0,zn=null,n=wb(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cs(),i===a){t=$r(e,t,n);break e}Kt(e,t,i,n)}t=t.child}return t;case 5:return vb(t),e===null&&np(t),i=t.type,a=t.pendingProps,u=e!==null?e.memoizedProps:null,c=a.children,Jh(i,a)?c=null:u!==null&&Jh(i,u)&&(t.flags|=32),Vb(e,t),Kt(e,t,c,n),t.child;case 6:return e===null&&np(t),null;case 13:return Zb(e,t,n);case 4:return wy(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ds(t,null,i,n):Kt(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:jn(i,a),Jv(e,t,i,a,n);case 7:return Kt(e,t,t.pendingProps,n),t.child;case 8:return Kt(e,t,t.pendingProps.children,n),t.child;case 12:return Kt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,u=t.memoizedProps,c=a.value,Je(Ec,i._currentValue),i._currentValue=c,u!==null)if(Zn(u.value,c)){if(u.children===a.children&&!rn.current){t=$r(e,t,n);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var f=u.dependencies;if(f!==null){c=u.child;for(var p=f.firstContext;p!==null;){if(p.context===i){if(u.tag===1){p=Ir(-1,n&-n),p.tag=2;var m=u.updateQueue;if(m!==null){m=m.shared;var w=m.pending;w===null?p.next=p:(p.next=w.next,w.next=p),m.pending=p}}u.lanes|=n,p=u.alternate,p!==null&&(p.lanes|=n),rp(u.return,n,t),f.lanes|=n;break}p=p.next}}else if(u.tag===10)c=u.type===t.type?null:u.child;else if(u.tag===18){if(c=u.return,c===null)throw Error(Z(341));c.lanes|=n,f=c.alternate,f!==null&&(f.lanes|=n),rp(c,n,t),c=u.sibling}else c=u.child;if(c!==null)c.return=u;else for(c=u;c!==null;){if(c===t){c=null;break}if(u=c.sibling,u!==null){u.return=c.return,c=u;break}c=c.return}u=c}Kt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,Yo(t,n),a=Cn(a),i=i(a),t.flags|=1,Kt(e,t,i,n),t.child;case 14:return i=t.type,a=jn(i,t.pendingProps),a=jn(i.type,a),Yv(e,t,i,a,n);case 15:return zb(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:jn(i,a),ec(e,t),t.tag=1,on(i)?(e=!0,vc(t)):e=!1,Yo(t,n),mb(t,i,a),op(t,i,a,n),lp(null,t,i,!0,e,n);case 19:return Hb(e,t,n);case 22:return Fb(e,t,n)}throw Error(Z(156,t.tag))};function lk(e,t){return R1(e,t)}function o8(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(e,t,n,i){return new o8(e,t,n,i)}function Py(e){return e=e.prototype,!(!e||!e.isReactComponent)}function s8(e){if(typeof e=="function")return Py(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yp)return 11;if(e===Xp)return 14}return 2}function gi(e,t){var n=e.alternate;return n===null?(n=Sn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function rc(e,t,n,i,a,u){var c=2;if(i=e,typeof e=="function")Py(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case $o:return qi(n.children,a,u,t);case Jp:c=8,a|=8;break;case Th:return e=Sn(12,n,t,a|2),e.elementType=Th,e.lanes=u,e;case Ih:return e=Sn(13,n,t,a),e.elementType=Ih,e.lanes=u,e;case Lh:return e=Sn(19,n,t,a),e.elementType=Lh,e.lanes=u,e;case g1:return hd(n,a,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case y1:c=10;break e;case m1:c=9;break e;case Yp:c=11;break e;case Xp:c=14;break e;case ni:c=16,i=null;break e}throw Error(Z(130,e==null?e:typeof e,""))}return t=Sn(c,n,t,a),t.elementType=e,t.type=i,t.lanes=u,t}function qi(e,t,n,i){return e=Sn(7,e,i,t),e.lanes=n,e}function hd(e,t,n,i){return e=Sn(22,e,i,t),e.elementType=g1,e.lanes=n,e.stateNode={isHidden:!1},e}function fh(e,t,n){return e=Sn(6,e,null,t),e.lanes=n,e}function hh(e,t,n){return t=Sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function a8(e,t,n,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kf(0),this.expirationTimes=Kf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kf(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ry(e,t,n,i,a,u,c,f,p){return e=new a8(e,t,n,f,p),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Sn(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gy(u),e}function l8(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ro,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function uk(e){if(!e)return bi;e=e._reactInternals;e:{if(io(e)!==e||e.tag!==1)throw Error(Z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(on(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Z(171))}if(e.tag===1){var n=e.type;if(on(n))return lb(e,n,t)}return t}function ck(e,t,n,i,a,u,c,f,p){return e=Ry(n,i,!0,e,a,u,c,f,p),e.context=uk(null),n=e.current,i=Gt(),a=mi(n),u=Ir(i,a),u.callback=t??null,pi(n,u,a),e.current.lanes=a,ll(e,a,i),sn(e,i),e}function pd(e,t,n,i){var a=t.current,u=Gt(),c=mi(a);return n=uk(n),t.context===null?t.context=n:t.pendingContext=n,t=Ir(u,c),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=pi(a,t,c),e!==null&&(Wn(e,a,c,u),Ju(e,a,c)),c}function Oc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function c0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function $y(e,t){c0(e,t),(e=e.alternate)&&c0(e,t)}function u8(){return null}var dk=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dy(e){this._internalRoot=e}yd.prototype.render=Dy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));pd(e,t,null,null)};yd.prototype.unmount=Dy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;to(function(){pd(null,e,null,null)}),t[Pr]=null}};function yd(e){this._internalRoot=e}yd.prototype.unstable_scheduleHydration=function(e){if(e){var t=z1();e={blockedOn:null,target:e,priority:t};for(var n=0;n<oi.length&&t!==0&&t<oi[n].priority;n++);oi.splice(n,0,e),n===0&&V1(e)}};function My(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function md(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function d0(){}function c8(e,t,n,i,a){if(a){if(typeof i=="function"){var u=i;i=function(){var m=Oc(c);u.call(m)}}var c=ck(t,i,e,0,null,!1,!1,"",d0);return e._reactRootContainer=c,e[Pr]=c.current,Wa(e.nodeType===8?e.parentNode:e),to(),c}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var f=i;i=function(){var m=Oc(p);f.call(m)}}var p=Ry(e,0,!1,null,null,!1,!1,"",d0);return e._reactRootContainer=p,e[Pr]=p.current,Wa(e.nodeType===8?e.parentNode:e),to(function(){pd(t,p,n,i)}),p}function gd(e,t,n,i,a){var u=n._reactRootContainer;if(u){var c=u;if(typeof a=="function"){var f=a;a=function(){var p=Oc(c);f.call(p)}}pd(t,c,e,a)}else c=c8(n,t,e,a,i);return Oc(c)}j1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ka(t.pendingLanes);n!==0&&(ny(t,n|1),sn(t,ft()),!(Be&6)&&(ps=ft()+500,_i()))}break;case 13:to(function(){var i=Rr(e,1);if(i!==null){var a=Gt();Wn(i,e,1,a)}}),$y(e,1)}};ry=function(e){if(e.tag===13){var t=Rr(e,134217728);if(t!==null){var n=Gt();Wn(t,e,134217728,n)}$y(e,134217728)}};U1=function(e){if(e.tag===13){var t=mi(e),n=Rr(e,t);if(n!==null){var i=Gt();Wn(n,e,t,i)}$y(e,t)}};z1=function(){return He};F1=function(e,t){var n=He;try{return He=e,t()}finally{He=n}};zh=function(e,t,n){switch(t){case"input":if(Rh(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=ad(i);if(!a)throw Error(Z(90));v1(i),Rh(i,a)}}}break;case"textarea":k1(e,n);break;case"select":t=n.value,t!=null&&Go(e,!!n.multiple,t,!1)}};A1=Iy;T1=to;var d8={usingClientEntryPoint:!1,Events:[cl,jo,ad,C1,N1,Iy]},ya={findFiberByHostInstance:Zi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},f8={bundleType:ya.bundleType,version:ya.version,rendererPackageName:ya.rendererPackageName,rendererConfig:ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=O1(e),e===null?null:e.stateNode},findFiberByHostInstance:ya.findFiberByHostInstance||u8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{rd=zu.inject(f8),ar=zu}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d8;gn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!My(t))throw Error(Z(200));return l8(e,t,null,n)};gn.createRoot=function(e,t){if(!My(e))throw Error(Z(299));var n=!1,i="",a=dk;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ry(e,1,!1,null,null,n,!1,i,a),e[Pr]=t.current,Wa(e.nodeType===8?e.parentNode:e),new Dy(t)};gn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=O1(t),e=e===null?null:e.stateNode,e};gn.flushSync=function(e){return to(e)};gn.hydrate=function(e,t,n){if(!md(t))throw Error(Z(200));return gd(null,e,t,!0,n)};gn.hydrateRoot=function(e,t,n){if(!My(e))throw Error(Z(405));var i=n!=null&&n.hydratedSources||null,a=!1,u="",c=dk;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),t=ck(t,null,e,1,n??null,a,!1,u,c),e[Pr]=t.current,Wa(e),i)for(e=0;e<i.length;e++)n=i[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new yd(t)};gn.render=function(e,t,n){if(!md(t))throw Error(Z(200));return gd(null,e,t,!1,n)};gn.unmountComponentAtNode=function(e){if(!md(e))throw Error(Z(40));return e._reactRootContainer?(to(function(){gd(null,null,e,!1,function(){e._reactRootContainer=null,e[Pr]=null})}),!0):!1};gn.unstable_batchedUpdates=Iy;gn.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!md(n))throw Error(Z(200));if(e==null||e._reactInternals===void 0)throw Error(Z(38));return gd(e,t,n,!1,i)};gn.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}t(),e.exports=gn})(u3);var f0=Ch;_h.createRoot=f0.createRoot,_h.hydrateRoot=f0.hydrateRoot;/**
 * @remix-run/router v1.3.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ze.apply(this,arguments)}var yt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(yt||(yt={}));const h0="popstate";function h8(e){e===void 0&&(e={});function t(i,a){let{pathname:u,search:c,hash:f}=i.location;return Xa("",{pathname:u,search:c,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:Dr(a)}return y8(t,n,null,e)}function Se(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function p8(){return Math.random().toString(36).substr(2,8)}function p0(e,t){return{usr:e.state,key:e.key,idx:t}}function Xa(e,t,n,i){return n===void 0&&(n=null),ze({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Br(t):t,{state:n,key:t&&t.key||i||p8()})}function Dr(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Br(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function y8(e,t,n,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:u=!1}=i,c=a.history,f=yt.Pop,p=null,m=w();m==null&&(m=0,c.replaceState(ze({},c.state,{idx:m}),""));function w(){return(c.state||{idx:null}).idx}function E(){f=yt.Pop;let O=w(),x=O==null?null:O-m;m=O,p&&p({action:f,location:T.location,delta:x})}function S(O,x){f=yt.Push;let v=Xa(T.location,O,x);n&&n(v,O),m=w()+1;let C=p0(v,m),L=T.createHref(v);try{c.pushState(C,"",L)}catch{a.location.assign(L)}u&&p&&p({action:f,location:T.location,delta:1})}function k(O,x){f=yt.Replace;let v=Xa(T.location,O,x);n&&n(v,O),m=w();let C=p0(v,m),L=T.createHref(v);c.replaceState(C,"",L),u&&p&&p({action:f,location:T.location,delta:0})}function N(O){let x=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof O=="string"?O:Dr(O);return Se(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let T={get action(){return f},get location(){return e(a,c)},listen(O){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(h0,E),p=O,()=>{a.removeEventListener(h0,E),p=null}},createHref(O){return t(a,O)},createURL:N,encodeLocation(O){let x=N(O);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:S,replace:k,go(O){return c.go(O)}};return T}var Et;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Et||(Et={}));function m8(e){return e.index===!0}function fk(e,t,n){return t===void 0&&(t=[]),n===void 0&&(n=new Set),e.map((i,a)=>{let u=[...t,a],c=typeof i.id=="string"?i.id:u.join("-");return Se(i.index!==!0||!i.children,"Cannot specify children on an index route"),Se(!n.has(c),'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),n.add(c),m8(i)?ze({},i,{id:c}):ze({},i,{id:c,children:i.children?fk(i.children,u,n):void 0})})}function Ho(e,t,n){n===void 0&&(n="/");let i=typeof t=="string"?Br(t):t,a=fl(i.pathname||"/",n);if(a==null)return null;let u=hk(e);g8(u);let c=null;for(let f=0;c==null&&f<u.length;++f)c=C8(u[f],T8(a));return c}function hk(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let a=(u,c,f)=>{let p={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:c,route:u};p.relativePath.startsWith("/")&&(Se(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let m=Lr([i,p.relativePath]),w=n.concat(p);u.children&&u.children.length>0&&(Se(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),hk(u.children,t,w,m)),!(u.path==null&&!u.index)&&t.push({path:m,score:S8(m,u.index),routesMeta:w})};return e.forEach((u,c)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))a(u,c);else for(let p of pk(u.path))a(u,c,p)}),t}function pk(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,a=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return a?[u,""]:[u];let c=pk(i.join("/")),f=[];return f.push(...c.map(p=>p===""?u:[u,p].join("/"))),a&&f.push(...c),f.map(p=>e.startsWith("/")&&p===""?"/":p)}function g8(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:_8(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const w8=/^:\w+$/,v8=3,b8=2,k8=1,E8=10,x8=-2,y0=e=>e==="*";function S8(e,t){let n=e.split("/"),i=n.length;return n.some(y0)&&(i+=x8),t&&(i+=b8),n.filter(a=>!y0(a)).reduce((a,u)=>a+(w8.test(u)?v8:u===""?k8:E8),i)}function _8(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function C8(e,t){let{routesMeta:n}=e,i={},a="/",u=[];for(let c=0;c<n.length;++c){let f=n[c],p=c===n.length-1,m=a==="/"?t:t.slice(a.length)||"/",w=N8({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},m);if(!w)return null;Object.assign(i,w.params);let E=f.route;u.push({params:i,pathname:Lr([a,w.pathname]),pathnameBase:P8(Lr([a,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(a=Lr([a,w.pathnameBase]))}return u}function N8(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=A8(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let u=a[0],c=u.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((m,w,E)=>{if(w==="*"){let S=f[E]||"";c=u.slice(0,u.length-S.length).replace(/(.)\/+$/,"$1")}return m[w]=I8(f[E]||"",w),m},{}),pathname:u,pathnameBase:c,pattern:e}}function A8(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),el(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(c,f)=>(i.push(f),"/([^\\/]+)"));return e.endsWith("*")?(i.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function T8(e){try{return decodeURI(e)}catch(t){return el(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function I8(e,t){try{return decodeURIComponent(e)}catch(n){return el(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function fl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function el(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function L8(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:a=""}=typeof e=="string"?Br(e):e;return{pathname:n?n.startsWith("/")?n:O8(n,t):t,search:R8(i),hash:$8(a)}}function O8(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function ph(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wd(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function By(e,t,n,i){i===void 0&&(i=!1);let a;typeof e=="string"?a=Br(e):(a=ze({},e),Se(!a.pathname||!a.pathname.includes("?"),ph("?","pathname","search",a)),Se(!a.pathname||!a.pathname.includes("#"),ph("#","pathname","hash",a)),Se(!a.search||!a.search.includes("#"),ph("#","search","hash",a)));let u=e===""||a.pathname==="",c=u?"/":a.pathname,f;if(i||c==null)f=n;else{let E=t.length-1;if(c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;a.pathname=S.join("/")}f=E>=0?t[E]:"/"}let p=L8(a,f),m=c&&c!=="/"&&c.endsWith("/"),w=(u||c===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(m||w)&&(p.pathname+="/"),p}const Lr=e=>e.join("/").replace(/\/\/+/g,"/"),P8=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),R8=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$8=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class m0 extends Error{}class D8{constructor(t,n){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],Se(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let i;this.abortPromise=new Promise((u,c)=>i=c),this.controller=new AbortController;let a=()=>i(new m0("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",a),this.controller.signal.addEventListener("abort",a),this.data=Object.entries(t).reduce((u,c)=>{let[f,p]=c;return Object.assign(u,{[f]:this.trackPromise(f,p)})},{}),this.done&&this.unlistenAbortSignal(),this.init=n}trackPromise(t,n){if(!(n instanceof Promise))return n;this.deferredKeys.push(t),this.pendingKeysSet.add(t);let i=Promise.race([n,this.abortPromise]).then(a=>this.onSettle(i,t,null,a),a=>this.onSettle(i,t,a));return i.catch(()=>{}),Object.defineProperty(i,"_tracked",{get:()=>!0}),i}onSettle(t,n,i,a){return this.controller.signal.aborted&&i instanceof m0?(this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>i}),Promise.reject(i)):(this.pendingKeysSet.delete(n),this.done&&this.unlistenAbortSignal(),i?(Object.defineProperty(t,"_error",{get:()=>i}),this.emit(!1,n),Promise.reject(i)):(Object.defineProperty(t,"_data",{get:()=>a}),this.emit(!1,n),a))}emit(t,n){this.subscribers.forEach(i=>i(t,n))}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((t,n)=>this.pendingKeysSet.delete(n)),this.emit(!0)}async resolveData(t){let n=!1;if(!this.done){let i=()=>this.cancel();t.addEventListener("abort",i),n=await new Promise(a=>{this.subscribe(u=>{t.removeEventListener("abort",i),(u||this.done)&&a(u)})})}return n}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return Se(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,n)=>{let[i,a]=n;return Object.assign(t,{[i]:B8(a)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function M8(e){return e instanceof Promise&&e._tracked===!0}function B8(e){if(!M8(e))return e;if(e._error)throw e._error;return e._data}class jy{constructor(t,n,i,a){a===void 0&&(a=!1),this.status=t,this.statusText=n||"",this.internal=a,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function yk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const mk=["post","put","patch","delete"],j8=new Set(mk),U8=["get",...mk],z8=new Set(U8),F8=new Set([301,302,303,307,308]),V8=new Set([307,308]),yh={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},W8={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},g0={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},gk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Z8=!wk;function H8(e){Se(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t=fk(e.routes),n,i=null,a=new Set,u=null,c=null,f=null,p=e.hydrationData!=null,m=Ho(t,e.history.location,e.basename),w=null;if(m==null){let R=xr(404,{pathname:e.history.location.pathname}),{matches:D,route:j}=x0(t);m=D,w={[j.id]:R}}let E=!m.some(R=>R.route.loader)||e.hydrationData!=null,S,k={historyAction:e.history.action,location:e.history.location,matches:m,initialized:E,navigation:yh,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||w,fetchers:new Map,blockers:new Map},N=yt.Pop,T=!1,O,x=!1,v=!1,C=[],L=[],$=new Map,V=0,W=-1,F=new Map,Y=new Set,ue=new Map,$e=new Map,tt=new Map,be=!1;function fe(){return i=e.history.listen(R=>{let{action:D,location:j,delta:re}=R;if(be){be=!1;return}el(tt.size===0||re!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ae=Hn({currentLocation:k.location,nextLocation:j,historyAction:D});if(ae&&re!=null){be=!0,e.history.go(re*-1),ce(ae,{state:"blocked",location:j,proceed(){ce(ae,{state:"proceeding",proceed:void 0,reset:void 0,location:j}),e.history.go(re)},reset(){zr(ae),Ne({blockers:new Map(S.state.blockers)})}});return}return Pe(D,j)}),k.initialized||Pe(yt.Pop,k.location),S}function _e(){i&&i(),a.clear(),O&&O.abort(),k.fetchers.forEach((R,D)=>Ai(D)),k.blockers.forEach((R,D)=>zr(D))}function Ee(R){return a.add(R),()=>a.delete(R)}function Ne(R){k=ze({},k,R),a.forEach(D=>D(k))}function H(R,D){var j,re;let ae=k.actionData!=null&&k.navigation.formMethod!=null&&_r(k.navigation.formMethod)&&k.navigation.state==="loading"&&((j=R.state)==null?void 0:j._isRedirect)!==!0,ge;D.actionData?Object.keys(D.actionData).length>0?ge=D.actionData:ge=null:ae?ge=k.actionData:ge=null;let he=D.loaderData?E0(k.loaderData,D.loaderData,D.matches||[],D.errors):k.loaderData;for(let[ie]of tt)zr(ie);let xe=T===!0||k.navigation.formMethod!=null&&_r(k.navigation.formMethod)&&((re=R.state)==null?void 0:re._isRedirect)!==!0;n&&(t=n,n=void 0),Ne(ze({},D,{actionData:ge,loaderData:he,historyAction:N,location:R,initialized:!0,navigation:yh,revalidation:"idle",restoreScrollPosition:Gn(R,D.matches||k.matches),preventScrollReset:xe,blockers:new Map(k.blockers)})),x||N===yt.Pop||(N===yt.Push?e.history.push(R,R.state):N===yt.Replace&&e.history.replace(R,R.state)),N=yt.Pop,T=!1,x=!1,v=!1,C=[],L=[]}async function de(R,D){if(typeof R=="number"){e.history.go(R);return}let{path:j,submission:re,error:ae}=w0(R,D),ge=k.location,he=Xa(k.location,j,D&&D.state);he=ze({},he,e.history.encodeLocation(he));let xe=D&&D.replace!=null?D.replace:void 0,ie=yt.Push;xe===!0?ie=yt.Replace:xe===!1||re!=null&&_r(re.formMethod)&&re.formAction===k.location.pathname+k.location.search&&(ie=yt.Replace);let ct=D&&"preventScrollReset"in D?D.preventScrollReset===!0:void 0,Te=Hn({currentLocation:ge,nextLocation:he,historyAction:ie});if(Te){ce(Te,{state:"blocked",location:he,proceed(){ce(Te,{state:"proceeding",proceed:void 0,reset:void 0,location:he}),de(R,D)},reset(){zr(Te),Ne({blockers:new Map(k.blockers)})}});return}return await Pe(ie,he,{submission:re,pendingError:ae,preventScrollReset:ct,replace:D&&D.replace})}function me(){if(co(),Ne({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){Pe(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}Pe(N||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation})}}async function Pe(R,D,j){O&&O.abort(),O=null,N=R,x=(j&&j.startUninterruptedRevalidation)===!0,dr(k.location,k.matches),T=(j&&j.preventScrollReset)===!0;let re=n||t,ae=j&&j.overrideNavigation,ge=Ho(re,D,e.basename);if(!ge){let ot=xr(404,{pathname:D.pathname}),{matches:Ct,route:ln}=x0(re);Kn(),H(D,{matches:Ct,loaderData:{},errors:{[ln.id]:ot}});return}if(J8(k.location,D)&&!(j&&j.submission&&_r(j.submission.formMethod))){H(D,{matches:ge});return}O=new AbortController;let he=ga(e.history,D,O.signal,j&&j.submission),xe,ie;if(j&&j.pendingError)ie={[Ko(ge).route.id]:j.pendingError};else if(j&&j.submission&&_r(j.submission.formMethod)){let ot=await A(he,D,j.submission,ge,{replace:j.replace});if(ot.shortCircuited)return;xe=ot.pendingActionData,ie=ot.pendingActionError,ae=ze({state:"loading",location:D},j.submission),he=new Request(he.url,{signal:he.signal})}let{shortCircuited:ct,loaderData:Te,errors:_t}=await U(he,D,ge,ae,j&&j.submission,j&&j.replace,xe,ie);ct||(O=null,H(D,ze({matches:ge},xe?{actionData:xe}:{},{loaderData:Te,errors:_t})))}async function A(R,D,j,re,ae){co();let ge=ze({state:"submitting",location:D},j);Ne({navigation:ge});let he,xe=bp(re,D);if(!xe.route.action)he={type:Et.error,error:xr(405,{method:R.method,pathname:D.pathname,routeId:xe.route.id})};else if(he=await ma("action",R,xe,re,S.basename),R.signal.aborted)return{shortCircuited:!0};if(es(he)){let ie;return ae&&ae.replace!=null?ie=ae.replace:ie=he.location===k.location.pathname+k.location.search,await cr(k,he,{submission:j,replace:ie}),{shortCircuited:!0}}if(Pa(he)){let ie=Ko(re,xe.route.id);return(ae&&ae.replace)!==!0&&(N=yt.Push),{pendingActionData:{},pendingActionError:{[ie.route.id]:he.error}}}if(Gi(he))throw xr(400,{type:"defer-action"});return{pendingActionData:{[xe.route.id]:he.data}}}async function U(R,D,j,re,ae,ge,he,xe){let ie=re;ie||(ie=ze({state:"loading",location:D,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},ae));let ct=ae||(ie.formMethod&&ie.formAction&&ie.formData&&ie.formEncType?{formMethod:ie.formMethod,formAction:ie.formAction,formData:ie.formData,formEncType:ie.formEncType}:void 0),Te=n||t,[_t,ot]=v0(e.history,k,j,ct,D,v,C,L,ue,Te,e.basename,he,xe);if(Kn(ht=>!(j&&j.some(Jt=>Jt.route.id===ht))||_t&&_t.some(Jt=>Jt.route.id===ht)),_t.length===0&&ot.length===0)return H(D,ze({matches:j,loaderData:{},errors:xe||null},he?{actionData:he}:{})),{shortCircuited:!0};if(!x){ot.forEach(Jt=>{let On=k.fetchers.get(Jt.key),Ti={state:"loading",data:On&&On.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};k.fetchers.set(Jt.key,Ti)});let ht=he||k.actionData;Ne(ze({navigation:ie},ht?Object.keys(ht).length===0?{actionData:null}:{actionData:ht}:{},ot.length>0?{fetchers:new Map(k.fetchers)}:{}))}W=++V,ot.forEach(ht=>$.set(ht.key,O));let{results:Ct,loaderResults:ln,fetcherResults:hr}=await bl(k.matches,j,_t,ot,R);if(R.signal.aborted)return{shortCircuited:!0};ot.forEach(ht=>$.delete(ht.key));let Ln=S0(Ct);if(Ln)return await cr(k,Ln,{replace:ge}),{shortCircuited:!0};let{loaderData:ho,errors:Qn}=k0(k,j,_t,ln,xe,ot,hr,$e);$e.forEach((ht,Jt)=>{ht.subscribe(On=>{(On||ht.done)&&$e.delete(Jt)})}),El();let _s=Ss(W);return ze({loaderData:ho,errors:Qn},_s||ot.length>0?{fetchers:new Map(k.fetchers)}:{})}function St(R){return k.fetchers.get(R)||W8}function Ni(R,D,j,re){if(Z8)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");$.has(R)&&fo(R);let ge=Ho(n||t,j,e.basename);if(!ge){an(R,D,xr(404,{pathname:j}));return}let{path:he,submission:xe}=w0(j,re,!0),ie=bp(ge,he);if(T=(re&&re.preventScrollReset)===!0,xe&&_r(xe.formMethod)){Tn(R,D,he,ie,ge,xe);return}ue.set(R,{routeId:D,path:he}),In(R,D,he,ie,ge,xe)}async function Tn(R,D,j,re,ae,ge){if(co(),ue.delete(R),!re.route.action){let cn=xr(405,{method:ge.formMethod,pathname:j,routeId:D});an(R,D,cn);return}let he=k.fetchers.get(R),xe=ze({state:"submitting"},ge,{data:he&&he.data," _hasFetcherDoneAnything ":!0});k.fetchers.set(R,xe),Ne({fetchers:new Map(k.fetchers)});let ie=new AbortController,ct=ga(e.history,j,ie.signal,ge);$.set(R,ie);let Te=await ma("action",ct,re,ae,S.basename);if(ct.signal.aborted){$.get(R)===ie&&$.delete(R);return}if(es(Te)){$.delete(R),Y.add(R);let cn=ze({state:"loading"},ge,{data:void 0," _hasFetcherDoneAnything ":!0});return k.fetchers.set(R,cn),Ne({fetchers:new Map(k.fetchers)}),cr(k,Te,{isFetchActionRedirect:!0})}if(Pa(Te)){an(R,D,Te.error);return}if(Gi(Te))throw xr(400,{type:"defer-action"});let _t=k.navigation.location||k.location,ot=ga(e.history,_t,ie.signal),Ct=n||t,ln=k.navigation.state!=="idle"?Ho(Ct,k.navigation.location,e.basename):k.matches;Se(ln,"Didn't find any matches after fetcher action");let hr=++V;F.set(R,hr);let Ln=ze({state:"loading",data:Te.data},ge,{" _hasFetcherDoneAnything ":!0});k.fetchers.set(R,Ln);let[ho,Qn]=v0(e.history,k,ln,ge,_t,v,C,L,ue,Ct,e.basename,{[re.route.id]:Te.data},void 0);Qn.filter(cn=>cn.key!==R).forEach(cn=>{let po=cn.key,yo=k.fetchers.get(po),_l={state:"loading",data:yo&&yo.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};k.fetchers.set(po,_l),$.set(po,ie)}),Ne({fetchers:new Map(k.fetchers)});let{results:_s,loaderResults:ht,fetcherResults:Jt}=await bl(k.matches,ln,ho,Qn,ot);if(ie.signal.aborted)return;F.delete(R),$.delete(R),Qn.forEach(cn=>$.delete(cn.key));let On=S0(_s);if(On)return cr(k,On);let{loaderData:Ti,errors:Mt}=k0(k,k.matches,ho,ht,void 0,Qn,Jt,$e),un={state:"idle",data:Te.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};k.fetchers.set(R,un);let Sl=Ss(hr);k.navigation.state==="loading"&&hr>W?(Se(N,"Expected pending action"),O&&O.abort(),H(k.navigation.location,{matches:ln,loaderData:Ti,errors:Mt,fetchers:new Map(k.fetchers)})):(Ne(ze({errors:Mt,loaderData:E0(k.loaderData,Ti,ln,Mt)},Sl?{fetchers:new Map(k.fetchers)}:{})),v=!1)}async function In(R,D,j,re,ae,ge){let he=k.fetchers.get(R),xe=ze({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},ge,{data:he&&he.data," _hasFetcherDoneAnything ":!0});k.fetchers.set(R,xe),Ne({fetchers:new Map(k.fetchers)});let ie=new AbortController,ct=ga(e.history,j,ie.signal);$.set(R,ie);let Te=await ma("loader",ct,re,ae,S.basename);if(Gi(Te)&&(Te=await Ek(Te,ct.signal,!0)||Te),$.get(R)===ie&&$.delete(R),ct.signal.aborted)return;if(es(Te)){await cr(k,Te);return}if(Pa(Te)){let ot=Ko(k.matches,D);k.fetchers.delete(R),Ne({fetchers:new Map(k.fetchers),errors:{[ot.route.id]:Te.error}});return}Se(!Gi(Te),"Unhandled fetcher deferred data");let _t={state:"idle",data:Te.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};k.fetchers.set(R,_t),Ne({fetchers:new Map(k.fetchers)})}async function cr(R,D,j){var re;let{submission:ae,replace:ge,isFetchActionRedirect:he}=j===void 0?{}:j;D.revalidate&&(v=!0);let xe=Xa(R.location,D.location,ze({_isRedirect:!0},he?{_isFetchActionRedirect:!0}:{}));if(Se(xe,"Expected a location on the redirect navigation"),gk.test(D.location)&&wk&&typeof((re=window)==null?void 0:re.location)<"u"){let Ct=e.history.createURL(D.location),ln=fl(Ct.pathname,e.basename||"/")==null;if(window.location.origin!==Ct.origin||ln){ge?window.location.replace(D.location):window.location.assign(D.location);return}}O=null;let ie=ge===!0?yt.Replace:yt.Push,{formMethod:ct,formAction:Te,formEncType:_t,formData:ot}=R.navigation;!ae&&ct&&Te&&ot&&_t&&(ae={formMethod:ct,formAction:Te,formEncType:_t,formData:ot}),V8.has(D.status)&&ae&&_r(ae.formMethod)?await Pe(ie,xe,{submission:ze({},ae,{formAction:D.location}),preventScrollReset:T}):await Pe(ie,xe,{overrideNavigation:{state:"loading",location:xe,formMethod:ae?ae.formMethod:void 0,formAction:ae?ae.formAction:void 0,formEncType:ae?ae.formEncType:void 0,formData:ae?ae.formData:void 0},preventScrollReset:T})}async function bl(R,D,j,re,ae){let ge=await Promise.all([...j.map(ie=>ma("loader",ae,ie,D,S.basename)),...re.map(ie=>ie.matches&&ie.match?ma("loader",ga(e.history,ie.path,ae.signal),ie.match,ie.matches,S.basename):{type:Et.error,error:xr(404,{pathname:ie.path})})]),he=ge.slice(0,j.length),xe=ge.slice(j.length);return await Promise.all([_0(R,j,he,ae.signal,!1,k.loaderData),_0(R,re.map(ie=>ie.match),xe,ae.signal,!0)]),{results:ge,loaderResults:he,fetcherResults:xe}}function co(){v=!0,C.push(...Kn()),ue.forEach((R,D)=>{$.has(D)&&(L.push(D),fo(D))})}function an(R,D,j){let re=Ko(k.matches,D);Ai(R),Ne({errors:{[re.route.id]:j},fetchers:new Map(k.fetchers)})}function Ai(R){$.has(R)&&fo(R),ue.delete(R),F.delete(R),Y.delete(R),k.fetchers.delete(R)}function fo(R){let D=$.get(R);Se(D,"Expected fetch controller: "+R),D.abort(),$.delete(R)}function kl(R){for(let D of R){let re={state:"idle",data:St(D).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};k.fetchers.set(D,re)}}function El(){let R=[];for(let D of Y){let j=k.fetchers.get(D);Se(j,"Expected fetcher: "+D),j.state==="loading"&&(Y.delete(D),R.push(D))}kl(R)}function Ss(R){let D=[];for(let[j,re]of F)if(re<R){let ae=k.fetchers.get(j);Se(ae,"Expected fetcher: "+j),ae.state==="loading"&&(fo(j),F.delete(j),D.push(j))}return kl(D),D.length>0}function xl(R,D){let j=k.blockers.get(R)||g0;return tt.get(R)!==D&&tt.set(R,D),j}function zr(R){k.blockers.delete(R),tt.delete(R)}function ce(R,D){let j=k.blockers.get(R)||g0;Se(j.state==="unblocked"&&D.state==="blocked"||j.state==="blocked"&&D.state==="blocked"||j.state==="blocked"&&D.state==="proceeding"||j.state==="blocked"&&D.state==="unblocked"||j.state==="proceeding"&&D.state==="unblocked","Invalid blocker state transition: "+j.state+" -> "+D.state),k.blockers.set(R,D),Ne({blockers:new Map(k.blockers)})}function Hn(R){let{currentLocation:D,nextLocation:j,historyAction:re}=R;if(tt.size===0)return;tt.size>1&&el(!1,"A router only supports one blocker at a time");let ae=Array.from(tt.entries()),[ge,he]=ae[ae.length-1],xe=k.blockers.get(ge);if(!(xe&&xe.state==="proceeding")&&he({currentLocation:D,nextLocation:j,historyAction:re}))return ge}function Kn(R){let D=[];return $e.forEach((j,re)=>{(!R||R(re))&&(j.cancel(),D.push(re),$e.delete(re))}),D}function gt(R,D,j){if(u=R,f=D,c=j||(re=>re.key),!p&&k.navigation===yh){p=!0;let re=Gn(k.location,k.matches);re!=null&&Ne({restoreScrollPosition:re})}return()=>{u=null,f=null,c=null}}function dr(R,D){if(u&&c&&f){let j=D.map(ae=>C0(ae,k.loaderData)),re=c(R,j)||R.key;u[re]=f()}}function Gn(R,D){if(u&&c&&f){let j=D.map(ge=>C0(ge,k.loaderData)),re=c(R,j)||R.key,ae=u[re];if(typeof ae=="number")return ae}return null}function fr(R){n=R}return S={get basename(){return e.basename},get state(){return k},get routes(){return t},initialize:fe,subscribe:Ee,enableScrollRestoration:gt,navigate:de,fetch:Ni,revalidate:me,createHref:R=>e.history.createHref(R),encodeLocation:R=>e.history.encodeLocation(R),getFetcher:St,deleteFetcher:Ai,dispose:_e,getBlocker:xl,deleteBlocker:zr,_internalFetchControllers:$,_internalActiveDeferreds:$e,_internalSetRoutes:fr},S}function K8(e){return e!=null&&"formData"in e}function w0(e,t,n){n===void 0&&(n=!1);let i=typeof e=="string"?e:Dr(e);if(!t||!K8(t))return{path:i};if(t.formMethod&&!X8(t.formMethod))return{path:i,error:xr(405,{method:t.formMethod})};let a;if(t.formData&&(a={formMethod:t.formMethod||"get",formAction:kk(i),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData},_r(a.formMethod)))return{path:i,submission:a};let u=Br(i),c=bk(t.formData);return n&&u.search&&xk(u.search)&&c.append("index",""),u.search="?"+c,{path:Dr(u),submission:a}}function G8(e,t){let n=e;if(t){let i=e.findIndex(a=>a.route.id===t);i>=0&&(n=e.slice(0,i))}return n}function v0(e,t,n,i,a,u,c,f,p,m,w,E,S){let k=S?Object.values(S)[0]:E?Object.values(E)[0]:void 0,N=e.createURL(t.location),T=e.createURL(a),O=u||N.toString()===T.toString()||N.search!==T.search,x=S?Object.keys(S)[0]:void 0,C=G8(n,x).filter(($,V)=>{if($.route.loader==null)return!1;if(Q8(t.loaderData,t.matches[V],$)||c.some(Y=>Y===$.route.id))return!0;let W=t.matches[V],F=$;return b0($,ze({currentUrl:N,currentParams:W.params,nextUrl:T,nextParams:F.params},i,{actionResult:k,defaultShouldRevalidate:O||vk(W,F)}))}),L=[];return p.forEach(($,V)=>{if(!n.some(ue=>ue.route.id===$.routeId))return;let W=Ho(m,$.path,w);if(!W){L.push(ze({key:V},$,{matches:null,match:null}));return}let F=bp(W,$.path);if(f.includes(V)){L.push(ze({key:V,matches:W,match:F},$));return}b0(F,ze({currentUrl:N,currentParams:t.matches[t.matches.length-1].params,nextUrl:T,nextParams:n[n.length-1].params},i,{actionResult:k,defaultShouldRevalidate:O}))&&L.push(ze({key:V,matches:W,match:F},$))}),[C,L]}function Q8(e,t,n){let i=!t||n.route.id!==t.route.id,a=e[n.route.id]===void 0;return i||a}function vk(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function b0(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function ma(e,t,n,i,a,u,c,f){a===void 0&&(a="/"),u===void 0&&(u=!1),c===void 0&&(c=!1);let p,m,w,E=new Promise((T,O)=>w=O),S=()=>w();t.signal.addEventListener("abort",S);try{let T=n.route[e];Se(T,"Could not find the "+e+' to run on the "'+n.route.id+'" route'),m=await Promise.race([T({request:t,params:n.params,context:f}),E]),Se(m!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(T){p=Et.error,m=T}finally{t.signal.removeEventListener("abort",S)}if(Y8(m)){let T=m.status;if(F8.has(T)){let v=m.headers.get("Location");if(Se(v,"Redirects returned/thrown from loaders/actions must have a Location header"),gk.test(v)){if(!u){let C=new URL(t.url),L=v.startsWith("//")?new URL(C.protocol+v):new URL(v),$=fl(L.pathname,a)!=null;L.origin===C.origin&&$&&(v=L.pathname+L.search+L.hash)}}else{let C=i.slice(0,i.indexOf(n)+1),L=wd(C).map(V=>V.pathnameBase),$=By(v,L,new URL(t.url).pathname);if(Se(Dr($),"Unable to resolve redirect location: "+v),a){let V=$.pathname;$.pathname=V==="/"?a:Lr([a,V])}v=Dr($)}if(u)throw m.headers.set("Location",v),m;return{type:Et.redirect,status:T,location:v,revalidate:m.headers.get("X-Remix-Revalidate")!==null}}if(c)throw{type:p||Et.data,response:m};let O,x=m.headers.get("Content-Type");return x&&/\bapplication\/json\b/.test(x)?O=await m.json():O=await m.text(),p===Et.error?{type:p,error:new jy(T,m.statusText,O),headers:m.headers}:{type:Et.data,data:O,statusCode:m.status,headers:m.headers}}if(p===Et.error)return{type:p,error:m};if(m instanceof D8){var k,N;return{type:Et.deferred,deferredData:m,statusCode:(k=m.init)==null?void 0:k.status,headers:((N=m.init)==null?void 0:N.headers)&&new Headers(m.init.headers)}}return{type:Et.data,data:m}}function ga(e,t,n,i){let a=e.createURL(kk(t)).toString(),u={signal:n};if(i&&_r(i.formMethod)){let{formMethod:c,formEncType:f,formData:p}=i;u.method=c.toUpperCase(),u.body=f==="application/x-www-form-urlencoded"?bk(p):p}return new Request(a,u)}function bk(e){let t=new URLSearchParams;for(let[n,i]of e.entries())t.append(n,i instanceof File?i.name:i);return t}function q8(e,t,n,i,a){let u={},c=null,f,p=!1,m={};return n.forEach((w,E)=>{let S=t[E].route.id;if(Se(!es(w),"Cannot handle redirect results in processLoaderData"),Pa(w)){let k=Ko(e,S),N=w.error;i&&(N=Object.values(i)[0],i=void 0),c=c||{},c[k.route.id]==null&&(c[k.route.id]=N),u[S]=void 0,p||(p=!0,f=yk(w.error)?w.error.status:500),w.headers&&(m[S]=w.headers)}else Gi(w)?(a.set(S,w.deferredData),u[S]=w.deferredData.data):u[S]=w.data,w.statusCode!=null&&w.statusCode!==200&&!p&&(f=w.statusCode),w.headers&&(m[S]=w.headers)}),i&&(c=i,u[Object.keys(i)[0]]=void 0),{loaderData:u,errors:c,statusCode:f||200,loaderHeaders:m}}function k0(e,t,n,i,a,u,c,f){let{loaderData:p,errors:m}=q8(t,n,i,a,f);for(let w=0;w<u.length;w++){let{key:E,match:S}=u[w];Se(c!==void 0&&c[w]!==void 0,"Did not find corresponding fetcher result");let k=c[w];if(Pa(k)){let N=Ko(e.matches,S==null?void 0:S.route.id);m&&m[N.route.id]||(m=ze({},m,{[N.route.id]:k.error})),e.fetchers.delete(E)}else if(es(k))Se(!1,"Unhandled fetcher revalidation redirect");else if(Gi(k))Se(!1,"Unhandled fetcher deferred data");else{let N={state:"idle",data:k.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(E,N)}}return{loaderData:p,errors:m}}function E0(e,t,n,i){let a=ze({},t);for(let u of n){let c=u.route.id;if(t.hasOwnProperty(c)?t[c]!==void 0&&(a[c]=t[c]):e[c]!==void 0&&u.route.loader&&(a[c]=e[c]),i&&i.hasOwnProperty(c))break}return a}function Ko(e,t){return(t?e.slice(0,e.findIndex(i=>i.route.id===t)+1):[...e]).reverse().find(i=>i.route.hasErrorBoundary===!0)||e[0]}function x0(e){let t=e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function xr(e,t){let{pathname:n,routeId:i,method:a,type:u}=t===void 0?{}:t,c="Unknown Server Error",f="Unknown @remix-run/router error";return e===400?(c="Bad Request",a&&n&&i?f="You made a "+a+' request to "'+n+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":u==="defer-action"&&(f="defer() is not supported in actions")):e===403?(c="Forbidden",f='Route "'+i+'" does not match URL "'+n+'"'):e===404?(c="Not Found",f='No route matches URL "'+n+'"'):e===405&&(c="Method Not Allowed",a&&n&&i?f="You made a "+a.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":a&&(f='Invalid request method "'+a.toUpperCase()+'"')),new jy(e||500,c,new Error(f),!0)}function S0(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(es(n))return n}}function kk(e){let t=typeof e=="string"?Br(e):e;return Dr(ze({},t,{hash:""}))}function J8(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function Gi(e){return e.type===Et.deferred}function Pa(e){return e.type===Et.error}function es(e){return(e&&e.type)===Et.redirect}function Y8(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function X8(e){return z8.has(e)}function _r(e){return j8.has(e)}async function _0(e,t,n,i,a,u){for(let c=0;c<n.length;c++){let f=n[c],p=t[c];if(!p)continue;let m=e.find(E=>E.route.id===p.route.id),w=m!=null&&!vk(m,p)&&(u&&u[p.route.id])!==void 0;Gi(f)&&(a||w)&&await Ek(f,i,a).then(E=>{E&&(n[c]=E||n[c])})}}async function Ek(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Et.data,data:e.deferredData.unwrappedData}}catch(a){return{type:Et.error,error:a}}return{type:Et.data,data:e.deferredData.data}}}function xk(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function C0(e,t){let{route:n,pathname:i,params:a}=e;return{id:n.id,pathname:i,params:a,data:t[n.id],handle:n.handle}}function bp(e,t){let n=typeof t=="string"?Br(t).search:t.search;if(e[e.length-1].route.index&&xk(n||""))return e[e.length-1];let i=wd(e);return i[i.length-1]}/**
 * React Router v6.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pc(){return Pc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pc.apply(this,arguments)}function e5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const t5=typeof Object.is=="function"?Object.is:e5,{useState:n5,useEffect:r5,useLayoutEffect:i5,useDebugValue:o5}=Sh;function s5(e,t,n){const i=t(),[{inst:a},u]=n5({inst:{value:i,getSnapshot:t}});return i5(()=>{a.value=i,a.getSnapshot=t,mh(a)&&u({inst:a})},[e,i,t]),r5(()=>(mh(a)&&u({inst:a}),e(()=>{mh(a)&&u({inst:a})})),[e]),o5(i),i}function mh(e){const t=e.getSnapshot,n=e.value;try{const i=t();return!t5(n,i)}catch{return!0}}function a5(e,t,n){return t()}const l5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u5=!l5,c5=u5?a5:s5,d5="useSyncExternalStore"in Sh?(e=>e.useSyncExternalStore)(Sh):c5,vd=J.createContext(null),Uy=J.createContext(null),hl=J.createContext(null),bd=J.createContext(null),Ci=J.createContext({outlet:null,matches:[]}),Sk=J.createContext(null);function f5(e,t){let{relative:n}=t===void 0?{}:t;pl()||Se(!1);let{basename:i,navigator:a}=J.useContext(hl),{hash:u,pathname:c,search:f}=Ck(e,{relative:n}),p=c;return i!=="/"&&(p=c==="/"?i:Lr([i,c])),a.createHref({pathname:p,search:f,hash:u})}function pl(){return J.useContext(bd)!=null}function kd(){return pl()||Se(!1),J.useContext(bd).location}function _k(){pl()||Se(!1);let{basename:e,navigator:t}=J.useContext(hl),{matches:n}=J.useContext(Ci),{pathname:i}=kd(),a=JSON.stringify(wd(n).map(f=>f.pathnameBase)),u=J.useRef(!1);return J.useEffect(()=>{u.current=!0}),J.useCallback(function(f,p){if(p===void 0&&(p={}),!u.current)return;if(typeof f=="number"){t.go(f);return}let m=By(f,JSON.parse(a),i,p.relative==="path");e!=="/"&&(m.pathname=m.pathname==="/"?e:Lr([e,m.pathname])),(p.replace?t.replace:t.push)(m,p.state,p)},[e,t,a,i])}const h5=J.createContext(null);function p5(e){let t=J.useContext(Ci).outlet;return t&&J.createElement(h5.Provider,{value:e},t)}function y5(){let{matches:e}=J.useContext(Ci),t=e[e.length-1];return t?t.params:{}}function Ck(e,t){let{relative:n}=t===void 0?{}:t,{matches:i}=J.useContext(Ci),{pathname:a}=kd(),u=JSON.stringify(wd(i).map(c=>c.pathnameBase));return J.useMemo(()=>By(e,JSON.parse(u),a,n==="path"),[e,u,a,n])}function m5(e,t){pl()||Se(!1);let{navigator:n}=J.useContext(hl),i=J.useContext(Uy),{matches:a}=J.useContext(Ci),u=a[a.length-1],c=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let p=kd(),m;if(t){var w;let T=typeof t=="string"?Br(t):t;f==="/"||(w=T.pathname)!=null&&w.startsWith(f)||Se(!1),m=T}else m=p;let E=m.pathname||"/",S=f==="/"?E:E.slice(f.length)||"/",k=Ho(e,{pathname:S}),N=b5(k&&k.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:Lr([f,n.encodeLocation?n.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:Lr([f,n.encodeLocation?n.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),a,i||void 0);return t&&N?J.createElement(bd.Provider,{value:{location:Pc({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:yt.Pop}},N):N}function g5(){let e=x5(),t=yk(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},u=null;return J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},t),n?J.createElement("pre",{style:a},n):null,u)}class w5 extends J.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?J.createElement(Ci.Provider,{value:this.props.routeContext},J.createElement(Sk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function v5(e){let{routeContext:t,match:n,children:i}=e,a=J.useContext(vd);return a&&a.static&&a.staticContext&&n.route.errorElement&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),J.createElement(Ci.Provider,{value:t},i)}function b5(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let i=e,a=n==null?void 0:n.errors;if(a!=null){let u=i.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id]));u>=0||Se(!1),i=i.slice(0,Math.min(i.length,u+1))}return i.reduceRight((u,c,f)=>{let p=c.route.id?a==null?void 0:a[c.route.id]:null,m=n?c.route.errorElement||J.createElement(g5,null):null,w=t.concat(i.slice(0,f+1)),E=()=>J.createElement(v5,{match:c,routeContext:{outlet:u,matches:w}},p?m:c.route.element!==void 0?c.route.element:u);return n&&(c.route.errorElement||f===0)?J.createElement(w5,{location:n.location,component:m,error:p,children:E(),routeContext:{outlet:null,matches:w}}):E()},null)}var kp;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(kp||(kp={}));var no;(function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(no||(no={}));function k5(e){let t=J.useContext(vd);return t||Se(!1),t}function zy(e){let t=J.useContext(Uy);return t||Se(!1),t}function E5(e){let t=J.useContext(Ci);return t||Se(!1),t}function Nk(e){let t=E5(),n=t.matches[t.matches.length-1];return n.route.id||Se(!1),n.route.id}function Ak(){let e=k5(kp.UseRevalidator),t=zy(no.UseRevalidator);return{revalidate:e.router.revalidate,state:t.revalidation}}function Tk(){let e=zy(no.UseLoaderData),t=Nk(no.UseLoaderData);if(e.errors&&e.errors[t]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+t+")");return}return e.loaderData[t]}function x5(){var e;let t=J.useContext(Sk),n=zy(no.UseRouteError),i=Nk(no.UseRouteError);return t||((e=n.errors)==null?void 0:e[i])}function S5(e){let{fallbackElement:t,router:n}=e,i=d5(n.subscribe,()=>n.state,()=>n.state),a=J.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:c=>n.navigate(c),push:(c,f,p)=>n.navigate(c,{state:f,preventScrollReset:p==null?void 0:p.preventScrollReset}),replace:(c,f,p)=>n.navigate(c,{replace:!0,state:f,preventScrollReset:p==null?void 0:p.preventScrollReset})}),[n]),u=n.basename||"/";return J.createElement(J.Fragment,null,J.createElement(vd.Provider,{value:{router:n,navigator:a,static:!1,basename:u}},J.createElement(Uy.Provider,{value:i},J.createElement(C5,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:a},n.state.initialized?J.createElement(N5,null):t))),null)}function _5(e){return p5(e.context)}function Lo(e){Se(!1)}function C5(e){let{basename:t="/",children:n=null,location:i,navigationType:a=yt.Pop,navigator:u,static:c=!1}=e;pl()&&Se(!1);let f=t.replace(/^\/*/,"/"),p=J.useMemo(()=>({basename:f,navigator:u,static:c}),[f,u,c]);typeof i=="string"&&(i=Br(i));let{pathname:m="/",search:w="",hash:E="",state:S=null,key:k="default"}=i,N=J.useMemo(()=>{let T=fl(m,f);return T==null?null:{pathname:T,search:w,hash:E,state:S,key:k}},[f,m,w,E,S,k]);return N==null?null:J.createElement(hl.Provider,{value:p},J.createElement(bd.Provider,{children:n,value:{location:N,navigationType:a}}))}function N5(e){let{children:t,location:n}=e,i=J.useContext(vd),a=i&&!t?i.router.routes:Rc(t);return m5(a,n)}var N0;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(N0||(N0={}));new Promise(()=>{});function Rc(e,t){t===void 0&&(t=[]);let n=[];return J.Children.forEach(e,(i,a)=>{if(!J.isValidElement(i))return;if(i.type===J.Fragment){n.push.apply(n,Rc(i.props.children,t));return}i.type!==Lo&&Se(!1),!i.props.index||!i.props.children||Se(!1);let u=[...t,a],c={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,hasErrorBoundary:i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle};i.props.children&&(c.children=Rc(i.props.children,u)),n.push(c)}),n}function Ik(e){return e.map(t=>{let n=Pc({},t);return n.hasErrorBoundary==null&&(n.hasErrorBoundary=n.errorElement!=null),n.children&&(n.children=Ik(n.children)),n})}/**
 * React Router DOM v6.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $c(){return $c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$c.apply(this,arguments)}function A5(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,u;for(u=0;u<i.length;u++)a=i[u],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function T5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function I5(e,t){return e.button===0&&(!t||t==="_self")&&!T5(e)}const L5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function O5(e,t){return H8({basename:t==null?void 0:t.basename,history:h8({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||P5(),routes:Ik(e)}).initialize()}function P5(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=$c({},t,{errors:R5(t.errors)})),t}function R5(e){if(!e)return null;let t=Object.entries(e),n={};for(let[i,a]of t)if(a&&a.__type==="RouteErrorResponse")n[i]=new jy(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){let u=new Error(a.message);u.stack="",n[i]=u}else n[i]=a;return n}const $5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",D5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ic=J.forwardRef(function(t,n){let{onClick:i,relative:a,reloadDocument:u,replace:c,state:f,target:p,to:m,preventScrollReset:w}=t,E=A5(t,L5),{basename:S}=J.useContext(hl),k,N=!1;if(typeof m=="string"&&D5.test(m)&&(k=m,$5)){let v=new URL(window.location.href),C=m.startsWith("//")?new URL(v.protocol+m):new URL(m),L=fl(C.pathname,S);C.origin===v.origin&&L!=null?m=L+C.search+C.hash:N=!0}let T=f5(m,{relative:a}),O=M5(m,{replace:c,state:f,target:p,preventScrollReset:w,relative:a});function x(v){i&&i(v),v.defaultPrevented||O(v)}return J.createElement("a",$c({},E,{href:k||T,onClick:N||u?i:x,ref:n,target:p}))});var A0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(A0||(A0={}));var T0;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(T0||(T0={}));function M5(e,t){let{target:n,replace:i,state:a,preventScrollReset:u,relative:c}=t===void 0?{}:t,f=_k(),p=kd(),m=Ck(e,{relative:c});return J.useCallback(w=>{if(I5(w,n)){w.preventDefault();let E=i!==void 0?i:Dr(p)===Dr(m);f(e,{replace:E,state:a,preventScrollReset:u,relative:c})}},[p,f,m,i,a,n,e,u,c])}var B5=Lk,I0=128,j5=127,U5=~j5,z5=Math.pow(2,31);function Lk(e,t,n){t=t||[],n=n||0;for(var i=n;e>=z5;)t[n++]=e&255|I0,e/=128;for(;e&U5;)t[n++]=e&255|I0,e>>>=7;return t[n]=e|0,Lk.bytes=n-i+1,t}var F5=Ep,V5=128,L0=127;function Ep(e,i){var n=0,i=i||0,a=0,u=i,c,f=e.length;do{if(u>=f)throw Ep.bytes=0,new RangeError("Could not decode varint");c=e[u++],n+=a<28?(c&L0)<<a:(c&L0)*Math.pow(2,a),a+=7}while(c>=V5);return Ep.bytes=u-i,n}var W5=Math.pow(2,7),Z5=Math.pow(2,14),H5=Math.pow(2,21),K5=Math.pow(2,28),G5=Math.pow(2,35),Q5=Math.pow(2,42),q5=Math.pow(2,49),J5=Math.pow(2,56),Y5=Math.pow(2,63),X5=function(e){return e<W5?1:e<Z5?2:e<H5?3:e<K5?4:e<G5?5:e<Q5?6:e<q5?7:e<J5?8:e<Y5?9:10},eN={encode:B5,decode:F5,encodingLength:X5},Dc=eN;const xp=(e,t=0)=>[Dc.decode(e,t),Dc.decode.bytes],Mc=(e,t,n=0)=>(Dc.encode(e,t,n),t),Bc=e=>Dc.encodingLength(e),Ok=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},yl=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Sp=(e,t)=>{const n=t.byteLength,i=Bc(e),a=i+Bc(n),u=new Uint8Array(a+n);return Mc(e,u,0),Mc(n,u,i),u.set(t,a),new Fy(e,n,t,u)},_p=e=>{const t=yl(e),[n,i]=xp(t),[a,u]=xp(t.subarray(i)),c=t.subarray(i+u);if(c.byteLength!==a)throw new Error("Incorrect length");return new Fy(n,a,c,t)},tN=(e,t)=>{if(e===t)return!0;{const n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&Ok(e.bytes,n.bytes)}};class Fy{constructor(t,n,i,a){this.code=t,this.size=n,this.digest=i,this.bytes=a}}function nN(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var a=0;a<e.length;a++){var u=e.charAt(a),c=u.charCodeAt(0);if(n[c]!==255)throw new TypeError(u+" is ambiguous");n[c]=a}var f=e.length,p=e.charAt(0),m=Math.log(f)/Math.log(256),w=Math.log(256)/Math.log(f);function E(N){if(N instanceof Uint8Array||(ArrayBuffer.isView(N)?N=new Uint8Array(N.buffer,N.byteOffset,N.byteLength):Array.isArray(N)&&(N=Uint8Array.from(N))),!(N instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(N.length===0)return"";for(var T=0,O=0,x=0,v=N.length;x!==v&&N[x]===0;)x++,T++;for(var C=(v-x)*w+1>>>0,L=new Uint8Array(C);x!==v;){for(var $=N[x],V=0,W=C-1;($!==0||V<O)&&W!==-1;W--,V++)$+=256*L[W]>>>0,L[W]=$%f>>>0,$=$/f>>>0;if($!==0)throw new Error("Non-zero carry");O=V,x++}for(var F=C-O;F!==C&&L[F]===0;)F++;for(var Y=p.repeat(T);F<C;++F)Y+=e.charAt(L[F]);return Y}function S(N){if(typeof N!="string")throw new TypeError("Expected String");if(N.length===0)return new Uint8Array;var T=0;if(N[T]!==" "){for(var O=0,x=0;N[T]===p;)O++,T++;for(var v=(N.length-T)*m+1>>>0,C=new Uint8Array(v);N[T];){var L=n[N.charCodeAt(T)];if(L===255)return;for(var $=0,V=v-1;(L!==0||$<x)&&V!==-1;V--,$++)L+=f*C[V]>>>0,C[V]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");x=$,T++}if(N[T]!==" "){for(var W=v-x;W!==v&&C[W]===0;)W++;for(var F=new Uint8Array(O+(v-W)),Y=O;W!==v;)F[Y++]=C[W++];return F}}}function k(N){var T=S(N);if(T)return T;throw new Error(`Non-${t} character`)}return{encode:E,decodeUnsafe:S,decode:k}}var rN=nN,iN=rN;class oN{constructor(t,n,i){this.name=t,this.prefix=n,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class sN{constructor(t,n,i){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Pk(this,t)}}class aN{constructor(t){this.decoders=t}or(t){return Pk(this,t)}decode(t){const n=t[0],i=this.decoders[n];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Pk=(e,t)=>new aN({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class lN{constructor(t,n,i,a){this.name=t,this.prefix=n,this.baseEncode=i,this.baseDecode=a,this.encoder=new oN(t,n,i),this.decoder=new sN(t,n,a)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Rk=({name:e,prefix:t,encode:n,decode:i})=>new lN(e,t,n,i),$k=({prefix:e,name:t,alphabet:n})=>{const{encode:i,decode:a}=iN(n,t);return Rk({prefix:e,name:t,encode:i,decode:u=>yl(a(u))})},uN=(e,t,n,i)=>{const a={};for(let w=0;w<t.length;++w)a[t[w]]=w;let u=e.length;for(;e[u-1]==="=";)--u;const c=new Uint8Array(u*n/8|0);let f=0,p=0,m=0;for(let w=0;w<u;++w){const E=a[e[w]];if(E===void 0)throw new SyntaxError(`Non-${i} character`);p=p<<n|E,f+=n,f>=8&&(f-=8,c[m++]=255&p>>f)}if(f>=n||255&p<<8-f)throw new SyntaxError("Unexpected end of data");return c},cN=(e,t,n)=>{const i=t[t.length-1]==="=",a=(1<<n)-1;let u="",c=0,f=0;for(let p=0;p<e.length;++p)for(f=f<<8|e[p],c+=8;c>n;)c-=n,u+=t[a&f>>c];if(c&&(u+=t[a&f<<n-c]),i)for(;u.length*n&7;)u+="=";return u},jr=({name:e,prefix:t,bitsPerChar:n,alphabet:i})=>Rk({prefix:t,name:e,encode(a){return cN(a,i,n)},decode(a){return uN(a,i,n,e)}}),ii=$k({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});$k({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const oc=jr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});jr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});jr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});jr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});jr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});jr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});jr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});jr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});jr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const O0=(e,t)=>{const{bytes:n,version:i}=e;switch(i){case 0:return fN(n,Cp(e),t||ii.encoder);default:return hN(n,Cp(e),t||oc.encoder)}},P0=new WeakMap,Cp=e=>{const t=P0.get(e);if(t==null){const n=new Map;return P0.set(e,n),n}return t};class Ve{constructor(t,n,i,a){this.code=n,this.version=t,this.multihash=i,this.bytes=a,this["/"]=a}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:n}=this;if(t!==wa)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==pN)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ve.createV0(n)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:n}=this.multihash,i=Sp(t,n);return Ve.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return Ve.equals(this,t)}static equals(t,n){const i=n;return i&&t.code===i.code&&t.version===i.version&&tN(t.multihash,i.multihash)}toString(t){return O0(this,t)}toJSON(){return{"/":O0(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;const n=t;if(n instanceof Ve)return n;if(n["/"]!=null&&n["/"]===n.bytes||n.asCID===n){const{version:i,code:a,multihash:u,bytes:c}=n;return new Ve(i,a,u,c||R0(i,a,u.bytes))}else if(n[yN]===!0){const{version:i,multihash:a,code:u}=n,c=_p(a);return Ve.create(i,u,c)}else return null}static create(t,n,i){if(typeof n!="number")throw new Error("String codecs are no longer supported");if(!(i.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(n!==wa)throw new Error(`Version 0 CID must use dag-pb (code: ${wa}) block encoding`);return new Ve(t,n,i,i.bytes)}case 1:{const a=R0(t,n,i.bytes);return new Ve(t,n,i,a)}default:throw new Error("Invalid version")}}static createV0(t){return Ve.create(0,wa,t)}static createV1(t,n){return Ve.create(1,t,n)}static decode(t){const[n,i]=Ve.decodeFirst(t);if(i.length)throw new Error("Incorrect length");return n}static decodeFirst(t){const n=Ve.inspectBytes(t),i=n.size-n.multihashSize,a=yl(t.subarray(i,i+n.multihashSize));if(a.byteLength!==n.multihashSize)throw new Error("Incorrect length");const u=a.subarray(n.multihashSize-n.digestSize),c=new Fy(n.multihashCode,n.digestSize,u,a);return[n.version===0?Ve.createV0(c):Ve.createV1(n.codec,c),t.subarray(n.size)]}static inspectBytes(t){let n=0;const i=()=>{const[E,S]=xp(t.subarray(n));return n+=S,E};let a=i(),u=wa;if(a===18?(a=0,n=0):u=i(),a!==0&&a!==1)throw new RangeError(`Invalid CID version ${a}`);const c=n,f=i(),p=i(),m=n+p,w=m-c;return{version:a,codec:u,multihashCode:f,digestSize:p,multihashSize:w,size:m}}static parse(t,n){const[i,a]=dN(t,n),u=Ve.decode(a);if(u.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Cp(u).set(i,t),u}}const dN=(e,t)=>{switch(e[0]){case"Q":{const n=t||ii;return[ii.prefix,n.decode(`${ii.prefix}${e}`)]}case ii.prefix:{const n=t||ii;return[ii.prefix,n.decode(e)]}case oc.prefix:{const n=t||oc;return[oc.prefix,n.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},fN=(e,t,n)=>{const{prefix:i}=n;if(i!==ii.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const a=t.get(i);if(a==null){const u=n.encode(e).slice(1);return t.set(i,u),u}else return a},hN=(e,t,n)=>{const{prefix:i}=n,a=t.get(i);if(a==null){const u=n.encode(e);return t.set(i,u),u}else return a},wa=112,pN=18,R0=(e,t,n)=>{const i=Bc(e),a=i+Bc(t),u=new Uint8Array(a+n.byteLength);return Mc(e,u,0),Mc(t,u,i),u.set(n,a),u},yN=Symbol.for("@ipld/js-cid/CID"),mN=({name:e,code:t,encode:n})=>new gN(e,t,n);class gN{constructor(t,n,i){this.name=t,this.code=n,this.encode=i}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Sp(this.code,n):n.then(i=>Sp(this.code,i))}else throw Error("Unknown type, must be binary type")}}function Fu({enumerable:e=!0,configurable:t=!1}={}){return{enumerable:e,configurable:t,writable:!1}}function*wN(e,t){if(t!=null&&typeof t=="object")if(Array.isArray(t))for(const[n,i]of t.entries()){const a=[...e,n],u=Ve.asCID(i);u?yield[a.join("/"),u]:typeof i=="object"&&(yield*Np(i,a))}else{const n=Ve.asCID(t);n?yield[e.join("/"),n]:yield*Np(t,e)}}function*Np(e,t){if(e==null||e instanceof Uint8Array)return;const n=Ve.asCID(e);n&&(yield[t.join("/"),n]);for(const[i,a]of Object.entries(e)){const u=[...t,i];yield*wN(u,a)}}function*vN(e,t){if(Array.isArray(t))for(const[n,i]of t.entries()){const a=[...e,n];yield a.join("/"),typeof i=="object"&&!Ve.asCID(i)&&(yield*Ap(i,a))}else yield*Ap(t,e)}function*Ap(e,t){if(!(e==null||typeof e!="object"))for(const[n,i]of Object.entries(e)){const a=[...t,n];yield a.join("/"),i!=null&&!(i instanceof Uint8Array)&&typeof i=="object"&&!Ve.asCID(i)&&(yield*vN(a,i))}}function bN(e,t){let n=e;for(const[i,a]of t.entries()){if(n=n[a],n==null)throw new Error(`Object has no property at ${t.slice(0,i+1).map(c=>`[${JSON.stringify(c)}]`).join("")}`);const u=Ve.asCID(n);if(u)return{value:u,remaining:t.slice(i+1).join("/")}}return{value:n}}class ws{constructor({cid:t,bytes:n,value:i}){if(!t||!n||typeof i>"u")throw new Error("Missing required argument");this.cid=t,this.bytes=n,this.value=i,this.asBlock=this,Object.defineProperties(this,{cid:Fu(),bytes:Fu(),value:Fu(),asBlock:Fu()})}links(){return Np(this.value,[])}tree(){return Ap(this.value,[])}get(t="/"){return bN(this.value,t.split("/").filter(Boolean))}}async function Vy({value:e,codec:t,hasher:n}){if(typeof e>"u")throw new Error('Missing required argument "value"');if(!t||!n)throw new Error("Missing required argument: codec or hasher");const i=t.encode(e),a=await n.digest(i),u=Ve.create(1,t.code,a);return new ws({value:e,bytes:i,cid:u})}async function kN({bytes:e,codec:t,hasher:n}){if(!e)throw new Error('Missing required argument "bytes"');if(!t||!n)throw new Error("Missing required argument: codec or hasher");const i=t.decode(e),a=await n.digest(e),u=Ve.create(1,t.code,a);return new ws({value:i,bytes:e,cid:u})}function EN({bytes:e,cid:t,value:n,codec:i}){const a=n!==void 0?n:i&&i.decode(e);if(a===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new ws({cid:t,bytes:e,value:a})}async function xN({bytes:e,cid:t,hasher:n,codec:i}){if(!e)throw new Error('Missing required argument "bytes"');if(!n)throw new Error('Missing required argument "hasher"');const a=i.decode(e),u=await n.digest(e);if(!Ok(t.multihash.bytes,u.bytes))throw new Error("CID hash does not match bytes");return EN({bytes:e,cid:t,value:a,codec:i})}const SN=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),vs=mN({name:"sha2-256",code:18,encode:SN("SHA-256")}),_N=["string","number","bigint","symbol"],CN=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function NN(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const t=typeof e;if(_N.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(AN(e))return"Buffer";const n=TN(e);return n||"Object"}function AN(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function TN(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(CN.includes(t))return t}class M{constructor(t,n,i){this.major=t,this.majorEncoded=t<<5,this.name=n,this.terminal=i}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}M.uint=new M(0,"uint",!0);M.negint=new M(1,"negint",!0);M.bytes=new M(2,"bytes",!0);M.string=new M(3,"string",!0);M.array=new M(4,"array",!1);M.map=new M(5,"map",!1);M.tag=new M(6,"tag",!1);M.float=new M(7,"float",!0);M.false=new M(7,"false",!0);M.true=new M(7,"true",!0);M.null=new M(7,"null",!0);M.undefined=new M(7,"undefined",!0);M.break=new M(7,"break",!0);class ne{constructor(t,n,i){this.type=t,this.value=n,this.encodedLength=i,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const bs=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",IN=new TextDecoder,LN=new TextEncoder;function jc(e){return bs&&globalThis.Buffer.isBuffer(e)}function Dk(e){return e instanceof Uint8Array?jc(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const ON=bs?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):D0(e,t,n):(e,t,n)=>n-t>64?IN.decode(e.subarray(t,n)):D0(e,t,n),PN=bs?e=>e.length>64?globalThis.Buffer.from(e):$0(e):e=>e.length>64?LN.encode(e):$0(e),Er=e=>Uint8Array.from(e),Wy=bs?(e,t,n)=>jc(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),RN=bs?(e,t)=>(e=e.map(n=>n instanceof Uint8Array?n:globalThis.Buffer.from(n)),Dk(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let i=0;for(let a of e)i+a.length>n.length&&(a=a.subarray(0,n.length-i)),n.set(a,i),i+=a.length;return n},$N=bs?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function DN(e,t){if(jc(e)&&jc(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}function $0(e,t=1/0){let n;const i=e.length;let a=null;const u=[];for(let c=0;c<i;++c){if(n=e.charCodeAt(c),n>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&u.push(239,191,189);continue}else if(c+1===i){(t-=3)>-1&&u.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&u.push(239,191,189),a=n;continue}n=(a-55296<<10|n-56320)+65536}else a&&(t-=3)>-1&&u.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;u.push(n)}else if(n<2048){if((t-=2)<0)break;u.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;u.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;u.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return u}function D0(e,t,n){const i=[];for(;t<n;){const a=e[t];let u=null,c=a>239?4:a>223?3:a>191?2:1;if(t+c<=n){let f,p,m,w;switch(c){case 1:a<128&&(u=a);break;case 2:f=e[t+1],(f&192)===128&&(w=(a&31)<<6|f&63,w>127&&(u=w));break;case 3:f=e[t+1],p=e[t+2],(f&192)===128&&(p&192)===128&&(w=(a&15)<<12|(f&63)<<6|p&63,w>2047&&(w<55296||w>57343)&&(u=w));break;case 4:f=e[t+1],p=e[t+2],m=e[t+3],(f&192)===128&&(p&192)===128&&(m&192)===128&&(w=(a&15)<<18|(f&63)<<12|(p&63)<<6|m&63,w>65535&&w<1114112&&(u=w))}}u===null?(u=65533,c=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|u&1023),i.push(u),t+=c}return MN(i)}const M0=4096;function MN(e){const t=e.length;if(t<=M0)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=M0));return n}const BN=256;class Mk{constructor(t=BN){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let n=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const a=n.length-(this.maxCursor-this.cursor)-1;n.set(t,a)}else{if(n){const a=n.length-(this.maxCursor-this.cursor)-1;a<n.length&&(this.chunks[this.chunks.length-1]=n.subarray(0,a),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(n=$N(this.chunkSize),this.chunks.push(n),this.maxCursor+=n.length,this._initReuseChunk===null&&(this._initReuseChunk=n),n.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let n;if(this.chunks.length===1){const i=this.chunks[0];t&&this.cursor>i.length/2?(n=this.cursor===i.length?i:i.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):n=Wy(i,0,this.cursor)}else n=RN(this.chunks,this.cursor);return t&&this.reset(),n}}const Le="CBOR decode error:",Bk="CBOR encode error:";function ks(e,t,n){if(e.length-t<n)throw new Error(`${Le} not enough data for type`)}const Rt=[24,256,65536,4294967296,BigInt("18446744073709551616")];function oo(e,t,n){ks(e,t,1);const i=e[t];if(n.strict===!0&&i<Rt[0])throw new Error(`${Le} integer encoded in more bytes than necessary (strict decode)`);return i}function so(e,t,n){ks(e,t,2);const i=e[t]<<8|e[t+1];if(n.strict===!0&&i<Rt[1])throw new Error(`${Le} integer encoded in more bytes than necessary (strict decode)`);return i}function ao(e,t,n){ks(e,t,4);const i=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(n.strict===!0&&i<Rt[2])throw new Error(`${Le} integer encoded in more bytes than necessary (strict decode)`);return i}function lo(e,t,n){ks(e,t,8);const i=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],a=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],u=(BigInt(i)<<BigInt(32))+BigInt(a);if(n.strict===!0&&u<Rt[3])throw new Error(`${Le} integer encoded in more bytes than necessary (strict decode)`);if(u<=Number.MAX_SAFE_INTEGER)return Number(u);if(n.allowBigInt===!0)return u;throw new Error(`${Le} integers outside of the safe integer range are not supported`)}function jN(e,t,n,i){return new ne(M.uint,oo(e,t+1,i),2)}function UN(e,t,n,i){return new ne(M.uint,so(e,t+1,i),3)}function zN(e,t,n,i){return new ne(M.uint,ao(e,t+1,i),5)}function FN(e,t,n,i){return new ne(M.uint,lo(e,t+1,i),9)}function uo(e,t){return An(e,0,t.value)}function An(e,t,n){if(n<Rt[0]){const i=Number(n);e.push([t|i])}else if(n<Rt[1]){const i=Number(n);e.push([t|24,i])}else if(n<Rt[2]){const i=Number(n);e.push([t|25,i>>>8,i&255])}else if(n<Rt[3]){const i=Number(n);e.push([t|26,i>>>24&255,i>>>16&255,i>>>8&255,i&255])}else{const i=BigInt(n);if(i<Rt[4]){const a=[t|27,0,0,0,0,0,0,0];let u=Number(i&BigInt(4294967295)),c=Number(i>>BigInt(32)&BigInt(4294967295));a[8]=u&255,u=u>>8,a[7]=u&255,u=u>>8,a[6]=u&255,u=u>>8,a[5]=u&255,a[4]=c&255,c=c>>8,a[3]=c&255,c=c>>8,a[2]=c&255,c=c>>8,a[1]=c&255,e.push(a)}else throw new Error(`${Le} encountered BigInt larger than allowable range`)}}uo.encodedSize=function(t){return An.encodedSize(t.value)};An.encodedSize=function(t){return t<Rt[0]?1:t<Rt[1]?2:t<Rt[2]?3:t<Rt[3]?5:9};uo.compareTokens=function(t,n){return t.value<n.value?-1:t.value>n.value?1:0};function VN(e,t,n,i){return new ne(M.negint,-1-oo(e,t+1,i),2)}function WN(e,t,n,i){return new ne(M.negint,-1-so(e,t+1,i),3)}function ZN(e,t,n,i){return new ne(M.negint,-1-ao(e,t+1,i),5)}const Zy=BigInt(-1),jk=BigInt(1);function HN(e,t,n,i){const a=lo(e,t+1,i);if(typeof a!="bigint"){const u=-1-a;if(u>=Number.MIN_SAFE_INTEGER)return new ne(M.negint,u,9)}if(i.allowBigInt!==!0)throw new Error(`${Le} integers outside of the safe integer range are not supported`);return new ne(M.negint,Zy-BigInt(a),9)}function Hy(e,t){const n=t.value,i=typeof n=="bigint"?n*Zy-jk:n*-1-1;An(e,t.type.majorEncoded,i)}Hy.encodedSize=function(t){const n=t.value,i=typeof n=="bigint"?n*Zy-jk:n*-1-1;return i<Rt[0]?1:i<Rt[1]?2:i<Rt[2]?3:i<Rt[3]?5:9};Hy.compareTokens=function(t,n){return t.value<n.value?1:t.value>n.value?-1:0};function ml(e,t,n,i){ks(e,t,n+i);const a=Wy(e,t+n,t+n+i);return new ne(M.bytes,a,n+i)}function KN(e,t,n,i){return ml(e,t,1,n)}function GN(e,t,n,i){return ml(e,t,2,oo(e,t+1,i))}function QN(e,t,n,i){return ml(e,t,3,so(e,t+1,i))}function qN(e,t,n,i){return ml(e,t,5,ao(e,t+1,i))}function JN(e,t,n,i){const a=lo(e,t+1,i);if(typeof a=="bigint")throw new Error(`${Le} 64-bit integer bytes lengths not supported`);return ml(e,t,9,a)}function Uc(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===M.string?PN(e.value):e.value),e.encodedBytes}function Ed(e,t){const n=Uc(t);An(e,t.type.majorEncoded,n.length),e.push(n)}Ed.encodedSize=function(t){const n=Uc(t);return An.encodedSize(n.length)+n.length};Ed.compareTokens=function(t,n){return YN(Uc(t),Uc(n))};function YN(e,t){return e.length<t.length?-1:e.length>t.length?1:DN(e,t)}function gl(e,t,n,i,a){const u=n+i;ks(e,t,u);const c=new ne(M.string,ON(e,t+n,t+u),u);return a.retainStringBytes===!0&&(c.byteValue=Wy(e,t+n,t+u)),c}function XN(e,t,n,i){return gl(e,t,1,n,i)}function eA(e,t,n,i){return gl(e,t,2,oo(e,t+1,i),i)}function tA(e,t,n,i){return gl(e,t,3,so(e,t+1,i),i)}function nA(e,t,n,i){return gl(e,t,5,ao(e,t+1,i),i)}function rA(e,t,n,i){const a=lo(e,t+1,i);if(typeof a=="bigint")throw new Error(`${Le} 64-bit integer string lengths not supported`);return gl(e,t,9,a,i)}const iA=Ed;function Es(e,t,n,i){return new ne(M.array,i,n)}function oA(e,t,n,i){return Es(e,t,1,n)}function sA(e,t,n,i){return Es(e,t,2,oo(e,t+1,i))}function aA(e,t,n,i){return Es(e,t,3,so(e,t+1,i))}function lA(e,t,n,i){return Es(e,t,5,ao(e,t+1,i))}function uA(e,t,n,i){const a=lo(e,t+1,i);if(typeof a=="bigint")throw new Error(`${Le} 64-bit integer array lengths not supported`);return Es(e,t,9,a)}function cA(e,t,n,i){if(i.allowIndefinite===!1)throw new Error(`${Le} indefinite length items not allowed`);return Es(e,t,1,1/0)}function Ky(e,t){An(e,M.array.majorEncoded,t.value)}Ky.compareTokens=uo.compareTokens;Ky.encodedSize=function(t){return An.encodedSize(t.value)};function xs(e,t,n,i){return new ne(M.map,i,n)}function dA(e,t,n,i){return xs(e,t,1,n)}function fA(e,t,n,i){return xs(e,t,2,oo(e,t+1,i))}function hA(e,t,n,i){return xs(e,t,3,so(e,t+1,i))}function pA(e,t,n,i){return xs(e,t,5,ao(e,t+1,i))}function yA(e,t,n,i){const a=lo(e,t+1,i);if(typeof a=="bigint")throw new Error(`${Le} 64-bit integer map lengths not supported`);return xs(e,t,9,a)}function mA(e,t,n,i){if(i.allowIndefinite===!1)throw new Error(`${Le} indefinite length items not allowed`);return xs(e,t,1,1/0)}function Gy(e,t){An(e,M.map.majorEncoded,t.value)}Gy.compareTokens=uo.compareTokens;Gy.encodedSize=function(t){return An.encodedSize(t.value)};function gA(e,t,n,i){return new ne(M.tag,n,1)}function wA(e,t,n,i){return new ne(M.tag,oo(e,t+1,i),2)}function vA(e,t,n,i){return new ne(M.tag,so(e,t+1,i),3)}function bA(e,t,n,i){return new ne(M.tag,ao(e,t+1,i),5)}function kA(e,t,n,i){return new ne(M.tag,lo(e,t+1,i),9)}function Qy(e,t){An(e,M.tag.majorEncoded,t.value)}Qy.compareTokens=uo.compareTokens;Qy.encodedSize=function(t){return An.encodedSize(t.value)};const EA=20,xA=21,SA=22,_A=23;function CA(e,t,n,i){if(i.allowUndefined===!1)throw new Error(`${Le} undefined values are not supported`);return i.coerceUndefinedToNull===!0?new ne(M.null,null,1):new ne(M.undefined,void 0,1)}function NA(e,t,n,i){if(i.allowIndefinite===!1)throw new Error(`${Le} indefinite length items not allowed`);return new ne(M.break,void 0,1)}function qy(e,t,n){if(n){if(n.allowNaN===!1&&Number.isNaN(e))throw new Error(`${Le} NaN values are not supported`);if(n.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${Le} Infinity values are not supported`)}return new ne(M.float,e,t)}function AA(e,t,n,i){return qy(Yy(e,t+1),3,i)}function TA(e,t,n,i){return qy(Xy(e,t+1),5,i)}function IA(e,t,n,i){return qy(Vk(e,t+1),9,i)}function Jy(e,t,n){const i=t.value;if(i===!1)e.push([M.float.majorEncoded|EA]);else if(i===!0)e.push([M.float.majorEncoded|xA]);else if(i===null)e.push([M.float.majorEncoded|SA]);else if(i===void 0)e.push([M.float.majorEncoded|_A]);else{let a,u=!1;(!n||n.float64!==!0)&&(zk(i),a=Yy(Bn,1),i===a||Number.isNaN(i)?(Bn[0]=249,e.push(Bn.slice(0,3)),u=!0):(Fk(i),a=Xy(Bn,1),i===a&&(Bn[0]=250,e.push(Bn.slice(0,5)),u=!0))),u||(LA(i),a=Vk(Bn,1),Bn[0]=251,e.push(Bn.slice(0,9)))}}Jy.encodedSize=function(t,n){const i=t.value;if(i===!1||i===!0||i===null||i===void 0)return 1;if(!n||n.float64!==!0){zk(i);let a=Yy(Bn,1);if(i===a||Number.isNaN(i))return 3;if(Fk(i),a=Xy(Bn,1),i===a)return 5}return 9};const Uk=new ArrayBuffer(9),kn=new DataView(Uk,1),Bn=new Uint8Array(Uk,0);function zk(e){if(e===1/0)kn.setUint16(0,31744,!1);else if(e===-1/0)kn.setUint16(0,64512,!1);else if(Number.isNaN(e))kn.setUint16(0,32256,!1);else{kn.setFloat32(0,e);const t=kn.getUint32(0),n=(t&2139095040)>>23,i=t&8388607;if(n===255)kn.setUint16(0,31744,!1);else if(n===0)kn.setUint16(0,(e&2147483648)>>16|i>>13,!1);else{const a=n-127;a<-24?kn.setUint16(0,0):a<-14?kn.setUint16(0,(t&2147483648)>>16|1<<24+a,!1):kn.setUint16(0,(t&2147483648)>>16|a+15<<10|i>>13,!1)}}}function Yy(e,t){if(e.length-t<2)throw new Error(`${Le} not enough data for float16`);const n=(e[t]<<8)+e[t+1];if(n===31744)return 1/0;if(n===64512)return-1/0;if(n===32256)return NaN;const i=n>>10&31,a=n&1023;let u;return i===0?u=a*2**-24:i!==31?u=(a+1024)*2**(i-25):u=a===0?1/0:NaN,n&32768?-u:u}function Fk(e){kn.setFloat32(0,e,!1)}function Xy(e,t){if(e.length-t<4)throw new Error(`${Le} not enough data for float32`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function LA(e){kn.setFloat64(0,e,!1)}function Vk(e,t){if(e.length-t<8)throw new Error(`${Le} not enough data for float64`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}Jy.compareTokens=uo.compareTokens;function Fe(e,t,n){throw new Error(`${Le} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function xd(e){return()=>{throw new Error(`${Le} ${e}`)}}const Q=[];for(let e=0;e<=23;e++)Q[e]=Fe;Q[24]=jN;Q[25]=UN;Q[26]=zN;Q[27]=FN;Q[28]=Fe;Q[29]=Fe;Q[30]=Fe;Q[31]=Fe;for(let e=32;e<=55;e++)Q[e]=Fe;Q[56]=VN;Q[57]=WN;Q[58]=ZN;Q[59]=HN;Q[60]=Fe;Q[61]=Fe;Q[62]=Fe;Q[63]=Fe;for(let e=64;e<=87;e++)Q[e]=KN;Q[88]=GN;Q[89]=QN;Q[90]=qN;Q[91]=JN;Q[92]=Fe;Q[93]=Fe;Q[94]=Fe;Q[95]=xd("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)Q[e]=XN;Q[120]=eA;Q[121]=tA;Q[122]=nA;Q[123]=rA;Q[124]=Fe;Q[125]=Fe;Q[126]=Fe;Q[127]=xd("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)Q[e]=oA;Q[152]=sA;Q[153]=aA;Q[154]=lA;Q[155]=uA;Q[156]=Fe;Q[157]=Fe;Q[158]=Fe;Q[159]=cA;for(let e=160;e<=183;e++)Q[e]=dA;Q[184]=fA;Q[185]=hA;Q[186]=pA;Q[187]=yA;Q[188]=Fe;Q[189]=Fe;Q[190]=Fe;Q[191]=mA;for(let e=192;e<=215;e++)Q[e]=gA;Q[216]=wA;Q[217]=vA;Q[218]=bA;Q[219]=kA;Q[220]=Fe;Q[221]=Fe;Q[222]=Fe;Q[223]=Fe;for(let e=224;e<=243;e++)Q[e]=xd("simple values are not supported");Q[244]=Fe;Q[245]=Fe;Q[246]=Fe;Q[247]=CA;Q[248]=xd("simple values are not supported");Q[249]=AA;Q[250]=TA;Q[251]=IA;Q[252]=Fe;Q[253]=Fe;Q[254]=Fe;Q[255]=NA;const ur=[];for(let e=0;e<24;e++)ur[e]=new ne(M.uint,e,1);for(let e=-1;e>=-24;e--)ur[31-e]=new ne(M.negint,e,1);ur[64]=new ne(M.bytes,new Uint8Array(0),1);ur[96]=new ne(M.string,"",1);ur[128]=new ne(M.array,0,1);ur[160]=new ne(M.map,0,1);ur[244]=new ne(M.false,!1,1);ur[245]=new ne(M.true,!0,1);ur[246]=new ne(M.null,null,1);function Wk(e){switch(e.type){case M.false:return Er([244]);case M.true:return Er([245]);case M.null:return Er([246]);case M.bytes:return e.value.length?void 0:Er([64]);case M.string:return e.value===""?Er([96]):void 0;case M.array:return e.value===0?Er([128]):void 0;case M.map:return e.value===0?Er([160]):void 0;case M.uint:return e.value<24?Er([Number(e.value)]):void 0;case M.negint:if(e.value>=-24)return Er([31-Number(e.value)])}}const OA={float64:!1,mapSorter:RA,quickEncodeToken:Wk};function Zk(){const e=[];return e[M.uint.major]=uo,e[M.negint.major]=Hy,e[M.bytes.major]=Ed,e[M.string.major]=iA,e[M.array.major]=Ky,e[M.map.major]=Gy,e[M.tag.major]=Qy,e[M.float.major]=Jy,e}const Hk=Zk(),gh=new Mk;class zc{constructor(t,n){this.obj=t,this.parent=n}includes(t){let n=this;do if(n.obj===t)return!0;while(n=n.parent);return!1}static createCheck(t,n){if(t&&t.includes(n))throw new Error(`${Bk} object contains circular references`);return new zc(n,t)}}const ti={null:new ne(M.null,null),undefined:new ne(M.undefined,void 0),true:new ne(M.true,!0),false:new ne(M.false,!1),emptyArray:new ne(M.array,0),emptyMap:new ne(M.map,0)},ki={number(e,t,n,i){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new ne(M.float,e):e>=0?new ne(M.uint,e):new ne(M.negint,e)},bigint(e,t,n,i){return e>=BigInt(0)?new ne(M.uint,e):new ne(M.negint,e)},Uint8Array(e,t,n,i){return new ne(M.bytes,e)},string(e,t,n,i){return new ne(M.string,e)},boolean(e,t,n,i){return e?ti.true:ti.false},null(e,t,n,i){return ti.null},undefined(e,t,n,i){return ti.undefined},ArrayBuffer(e,t,n,i){return new ne(M.bytes,new Uint8Array(e))},DataView(e,t,n,i){return new ne(M.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,n,i){if(!e.length)return n.addBreakTokens===!0?[ti.emptyArray,new ne(M.break)]:ti.emptyArray;i=zc.createCheck(i,e);const a=[];let u=0;for(const c of e)a[u++]=sc(c,n,i);return n.addBreakTokens?[new ne(M.array,e.length),a,new ne(M.break)]:[new ne(M.array,e.length),a]},Object(e,t,n,i){const a=t!=="Object",u=a?e.keys():Object.keys(e),c=a?e.size:u.length;if(!c)return n.addBreakTokens===!0?[ti.emptyMap,new ne(M.break)]:ti.emptyMap;i=zc.createCheck(i,e);const f=[];let p=0;for(const m of u)f[p++]=[sc(m,n,i),sc(a?e.get(m):e[m],n,i)];return PA(f,n),n.addBreakTokens?[new ne(M.map,c),f,new ne(M.break)]:[new ne(M.map,c),f]}};ki.Map=ki.Object;ki.Buffer=ki.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))ki[`${e}Array`]=ki.DataView;function sc(e,t={},n){const i=NN(e),a=t&&t.typeEncoders&&t.typeEncoders[i]||ki[i];if(typeof a=="function"){const c=a(e,i,t,n);if(c!=null)return c}const u=ki[i];if(!u)throw new Error(`${Bk} unsupported type: ${i}`);return u(e,i,t,n)}function PA(e,t){t.mapSorter&&e.sort(t.mapSorter)}function RA(e,t){const n=Array.isArray(e[0])?e[0][0]:e[0],i=Array.isArray(t[0])?t[0][0]:t[0];if(n.type!==i.type)return n.type.compare(i.type);const a=n.type.major,u=Hk[a].compareTokens(n,i);return u===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),u}function Kk(e,t,n,i){if(Array.isArray(t))for(const a of t)Kk(e,a,n,i);else n[t.type.major](e,t,i)}function $A(e,t,n){const i=sc(e,n);if(!Array.isArray(i)&&n.quickEncodeToken){const a=n.quickEncodeToken(i);if(a)return a;const u=t[i.type.major];if(u.encodedSize){const c=u.encodedSize(i,n),f=new Mk(c);if(u(f,i,n),f.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${i} was wrong`);return Dk(f.chunks[0])}}return gh.reset(),Kk(gh,i,t,n),gh.toBytes(!0)}function DA(e,t){return t=Object.assign({},OA,t),$A(e,Hk,t)}const MA={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class BA{constructor(t,n={}){this.pos=0,this.data=t,this.options=n}done(){return this.pos>=this.data.length}next(){const t=this.data[this.pos];let n=ur[t];if(n===void 0){const i=Q[t];if(!i)throw new Error(`${Le} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const a=t&31;n=i(this.data,this.pos,a,this.options)}return this.pos+=n.encodedLength,n}}const tl=Symbol.for("DONE"),Sd=Symbol.for("BREAK");function jA(e,t,n){const i=[];for(let a=0;a<e.value;a++){const u=nl(t,n);if(u===Sd){if(e.value===1/0)break;throw new Error(`${Le} got unexpected break to lengthed array`)}if(u===tl)throw new Error(`${Le} found array but not enough entries (got ${a}, expected ${e.value})`);i[a]=u}return i}function UA(e,t,n){const i=n.useMaps===!0,a=i?void 0:{},u=i?new Map:void 0;for(let c=0;c<e.value;c++){const f=nl(t,n);if(f===Sd){if(e.value===1/0)break;throw new Error(`${Le} got unexpected break to lengthed map`)}if(f===tl)throw new Error(`${Le} found map but not enough entries (got ${c} [no key], expected ${e.value})`);if(i!==!0&&typeof f!="string")throw new Error(`${Le} non-string keys not supported (got ${typeof f})`);if(n.rejectDuplicateMapKeys===!0&&(i&&u.has(f)||!i&&f in a))throw new Error(`${Le} found repeat map key "${f}"`);const p=nl(t,n);if(p===tl)throw new Error(`${Le} found map but not enough entries (got ${c} [no value], expected ${e.value})`);i?u.set(f,p):a[f]=p}return i?u:a}function nl(e,t){if(e.done())return tl;const n=e.next();if(n.type===M.break)return Sd;if(n.type.terminal)return n.value;if(n.type===M.array)return jA(n,e,t);if(n.type===M.map)return UA(n,e,t);if(n.type===M.tag){if(t.tags&&typeof t.tags[n.value]=="function"){const i=nl(e,t);return t.tags[n.value](i)}throw new Error(`${Le} tag not supported (${n.value})`)}throw new Error("unsupported")}function zA(e,t){if(!(e instanceof Uint8Array))throw new Error(`${Le} data to decode must be a Uint8Array`);t=Object.assign({},MA,t);const n=t.tokenizer||new BA(e,t),i=nl(n,t);if(i===tl)throw new Error(`${Le} did not find any content to decode`);if(i===Sd)throw new Error(`${Le} got unexpected break`);if(!n.done())throw new Error(`${Le} too many terminals, data makes no sense`);return i}const Gk=42;function FA(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=Ve.asCID(e);if(!t)return null;const n=new Uint8Array(t.bytes.byteLength+1);return n.set(t.bytes,1),[new ne(M.tag,Gk),new ne(M.bytes,n)]}function VA(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function WA(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const ZA={float64:!0,typeEncoders:{Object:FA,undefined:VA,number:WA}};function HA(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Ve.decode(e.subarray(1))}const Qk={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Qk.tags[Gk]=HA;const KA="dag-cbor",GA=113,qk=e=>DA(e,ZA),Jk=e=>zA(e,Qk),wl=Object.freeze(Object.defineProperty({__proto__:null,code:GA,decode:Jk,encode:qk,name:KA},Symbol.toStringTag,{value:"Module"})),QA=e=>{const t=e.byteLength-4;return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216},qA=4294967295,Yk=e=>{const t=Math.floor(qA/e);return async n=>{const i=await n.identity();if(typeof i!="number")throw new Error("Identity must be a number");return i<=t}},vl=(e,t)=>e===t?0:e>t?1:-1;class Tr{constructor(){this._cids=new Set}add(t){if(!t.address)throw new Error("Cannot add node without address");if(t.address.then){const n=t.address.then(i=>this._cids.add(i.toString()));this._cids.add(n),n.then(()=>this._cids.delete(n))}else this._cids.add(t.address.toString())}async all(){return await Promise.all([...this._cids]),this._cids}}async function JA(e,t,n){const i=new _d(e),a=new Map(t.map(c=>[c.toString(),c]));if(a.has(n.toString()))return{head:t,cids:i.cids};let u=!1;for(const c of t)await Tp(i,n,c)&&(a.delete(c.toString()),a.set(n.toString(),n),u=!0);if(u)return{head:[...a.values()],cids:i.cids};for(const c of t)if(await Tp(i,c,n))return{head:t,cids:i.cids};return{head:t.concat(n),cids:i.cids}}class YA extends ws{constructor({cid:t,value:n,bytes:i}){super({cid:t,value:n,bytes:i})}static create(t,n){return XA({data:t,parents:n??[]})}}class _d{constructor(t){this._blocks=t,this._cids=new Tr}async get(t){const n=await this._blocks.get(t);if(this._cids.add({address:t}),!n)throw new Error(`missing block: ${t}`);return eT(n.bytes)}async all(){return await Promise.all([...this._cids]),this._cids}}async function XA(e){const{cid:t,bytes:n}=await Vy({value:e,codec:wl,hasher:vs});return new ws({cid:t,value:e,bytes:n})}async function eT(e){const{cid:t,value:n}=await kN({bytes:e,codec:wl,hasher:vs});return new ws({cid:t,value:n,bytes:e})}async function Tp(e,t,n){if(t.toString()===n.toString())return!0;const[{value:i},{value:a}]=await Promise.all([e.get(t),e.get(n)]),u=[...i.parents];for(;u.length;){const c=u.shift();if(!c)break;if(c.toString()===n.toString())return!0;if(a.parents.some(p=>c.toString()===p.toString()))continue;const{value:f}=await e.get(c);u.push(...f.parents)}return!1}async function tT(e,t){const n=new _d(e),{ancestor:i,sorted:a}=await em(n,t),u=await nT(a,async c=>!await Tp(n,i,c.cid));return{cids:n.cids,events:u}}const nT=async(e,t)=>Promise.all(e.map(t)).then(n=>e.filter((i,a)=>n[a]));async function em(e,t){const n=await Xk(e,t);if(!n)throw new Error("failed to find common ancestor event");const i=await oT(e,t,n);return{ancestor:n,sorted:i}}async function Xk(e,t){if(!t.length)return;const n=t.map(i=>[i]);for(;;){let i=!1;for(const a of n){const u=await rT(e,a[a.length-1]);if(!u)continue;i=!0,a.push(u);const c=iT(n);if(c)return c}if(!i)return}}async function rT(e,t){const{value:n}=await e.get(t);return n.parents.length?n.parents.length===1?n.parents[0]:Xk(e,n.parents):t}function iT(e){e=e.map(t=>[...t]);for(const t of e)for(const n of t){let i=!0;for(const a of e)if(t!==a&&(i=a.some(u=>String(u)===String(n)),!i))break;if(i)return n}}async function oT(e,t,n){const i=new Map,a=await Promise.all(t.map(f=>eE(e,f,n)));for(const f of a)for(const{event:p,depth:m}of f){const w=i.get(p.cid.toString());w?w.weight+=m:i.set(p.cid.toString(),{event:p,weight:m})}const u=new Map;for(const{event:f,weight:p}of i.values()){const m=u.get(p);m?m.push(f):u.set(p,[f])}return Array.from(u).sort((f,p)=>p[0]-f[0]).flatMap(([,f])=>f.sort((p,m)=>String(p.cid)<String(m.cid)?-1:1))}async function eE(e,t,n,i=0){const a=await e.get(t),u=[{event:a,depth:i}],{parents:c}=a.value;if(c.length===1&&String(c[0])===String(n))return u;const f=await Promise.all(c.map(p=>eE(e,p,n,i+1)));return u.concat(...f)}class sT{constructor({key:t,address:n},i={}){this.key=t,this.address=n,this.codec=i.codec,this.hasher=i.hasher}get isEntry(){return!0}}class Ip{constructor({entries:t,closed:n}){if(typeof n!="boolean")throw new Error('Missing required argument "closed"');this.entries=t,this.closed=n,this.startKey=t[0].key}find(t,n){const{entries:i}=this;for(let a=i.length-1;a>-1;a--){const u=i[a];if(n(t,u.key)>-1)return[a,u]}return null}findMany(t,n,i=!1,a=!1){const{entries:u}=this,c=new Map;i?t=[...t]:t=t.sort(n);for(let f=u.length-1;f>-1&&t.length;f--){const p=u[f],m=[];for(;t.length;){let w=t[t.length-1];w=w.key?w.key:w;const E=n(w,p.key);if(a)if(E===0)m.push(t.pop());else if(E>0)t.pop();else break;else if(E>-1)m.push(t.pop());else break}m.length&&c.set(f,[p,m])}return c}findRange(t,n,i){const{entries:a}=this;let u,c=0;for(let f=a.length-1;f>-1;f--){const p=a[f];if(i(n,p.key)>0){u=f;break}}for(let f=0;f<a.length;f++){const p=a[f],m=i(t,p.key);if(m===0){c=f;break}else if(m<0)break;c=f}return{first:c,last:u,entries:a.slice(c,u+1)}}}const B0=e=>typeof e=="string"?e:JSON.stringify(e);function aT(e,t){return e.sort(({key:n},{key:i})=>t.compare(n,i))}async function lT(e,t,n){const i=[];for(const a of t){const{key:u,del:c}=a;if(n(u,e)<0)c||i.push(a);else break}return i}async function uT(e,t,{chunker:n,compare:i}){return await Xt.from({entries:e.map(a=>new t.LeafEntryClass(a,t)).sort((a,u)=>i(a.key,u.key)),chunker:n,NodeClass:t.LeafClass,distance:0,opts:t})}async function cT(e,t,n,i){return await Promise.all(t.map(async a=>{const u=await a.encode();return n.blocks.push(u),e.cache.set(a),new i.BranchEntryClass({key:a.key,address:await a.address},i)}))}async function dT(e,t,n,i){const a=t.root,u=i.opts,c=a.distance,f=a.entryList.startKey,p=await lT(f,n,e.compare);if(p.length){const m=await uT(p,u,e),w=await cT(e,m,t,u),E=new u.BranchEntryClass({key:a.entryList.startKey,address:await a.address},u);t.blocks.push(await a.encode()),e.cache.set(a);const S=[E,...w].sort(({key:T},{key:O})=>u.compare(T,O));let k=await Xt.from({...i,entries:S,chunker:e.chunker,NodeClass:u.BranchClass,distance:c+1});await Promise.all(k.map(async T=>{const O=await T.encode();e.cache.set(T),t.blocks.push(O)}));let N=[...k];for(;k.length>1;){const T=await Promise.all(k.map(async O=>new u.BranchEntryClass({key:O.key,address:await O.address},u)));k=await Xt.from({...i,entries:T.sort(({key:O},{key:x})=>u.compare(O,x)),chunker:e.chunker,NodeClass:u.BranchClass,distance:c+1}),await Promise.all(k.map(async O=>{const x=await O.encode();e.cache.set(O),t.blocks.push(x)})),N=[...N,...k]}t.root=k[0],t.nodes=[...m,...N,a]}}class Xt{constructor({entryList:t,chunker:n,distance:i,getNode:a,compare:u,cache:c}){this.entryList=t,this.chunker=n,this.distance=i,this.getNode=a,this.compare=u,this.cache=c}get closed(){return this.entryList.closed}get key(){return this.entryList.startKey}async getEntry(t,n=new Tr){return{result:await this._getEntry(t,n),cids:n}}async _getEntry(t,n){n.add(this);let i=this;for(;!i.isLeaf;){const c=i.entryList.find(t,this.compare);if(c===null)throw new Error("Not found");const[,f]=c;i=await this.getNode(await f.address),n.add(i)}const a=i.entryList.find(t,this.compare);if(a===null||a[1].key.toString()!==t.toString())throw new Error("Not found");const[,u]=a;return u}async getAllEntries(t=new Tr){return{result:await this._getAllEntries(t),cids:t}}_getAllEntries(t){if(t.add(this),this.isLeaf)return this.entryList.entries;{const{entries:n}=this.entryList,i=async a=>this.getNode(await a.address).then(u=>u._getAllEntries(t)).catch(async u=>{throw u});return Promise.all(n.map(i)).then(a=>a.flat())}}async*vis(t=new Set){const n=async c=>{const f=c.entryList.entries.map(p=>`[${p.key},${p.value||""}]`).join(", ");return c.isLeaf?`Leaf [${f}]`:`Branch [${f}]`},i=async function*(c,f,p){const m=(await c.address).toString();if(!p.has(m)){p.add(m);const w=await n(c);yield`  node [shape=ellipse fontname="Courier"]; ${m} [label="${w}"];`,yield`  ${f} -> ${m};`;for(const E of c.entryList.entries)if(E.address){const S=(await E.address).toString();try{const k=await c.getNode(S);yield*await i(k,m,p)}catch(k){yield`  node [shape=ellipse fontname="Courier"]; ${S} [label="Error: ${k.message}"];`}}}};yield"digraph tree {";const a=(await this.address).toString(),u=await this.getNode(a);yield'  node [shape=ellipse fontname="Courier"]; root;';for await(const c of i(u,"root",t))yield c;yield"}"}async getEntries(t,n=!1,i=new Tr){return{result:await this._getEntries(t,n,i),cids:i}}async _getEntries(t,n,i){i.add(this),n||(t=t.sort(this.compare));const a=this.entryList.findMany(t,this.compare,!0,this.isLeaf);if(this.isLeaf)return[...a.values()].map(([c])=>c);let u=[];for(const[c,f]of[...a.values()].reverse()){const p=this.getNode(await c.address);u.push(p.then(m=>m._getEntries(f.reverse(),!0,i)))}return u=await Promise.all(u),u.flat()}async getRangeEntries(t,n,i=new Tr){return{result:await this._getRangeEntries(t,n,i),cids:i}}_getRangeEntries(t,n,i){i.add(this);const{entries:a}=this.entryList.findRange(t,n,this.compare);if(this.isLeaf)return a.filter(p=>{const m=this.compare(t,p.key),w=this.compare(n,p.key);return m<=0&&w>=0});if(!a.length)return[];const u=async p=>this.getNode(await p.address).then(m=>m._getRangeEntries(t,n,i)),c=[u(a.shift())];if(!a.length)return c[0];const f=u(a.pop());for(;a.length;){const p=async m=>this.getNode(await m.address).then(async w=>w._getAllEntries(i));c.push(p(a.shift()))}return c.push(f),Promise.all(c).then(p=>p.flat())}async transaction(t,n={}){n={codec:this.codec,hasher:this.hasher,getNode:this.getNode,compare:this.compare,cache:this.cache,...n};const i={chunker:this.chunker,opts:n},a=this.entryList.findMany(t,n.compare,!0,this.isLeaf);return this.isLeaf?await this.transactionLeaf(t,n,i,a):await this.transactionBranch(t,n,i,a)}async transactionLeaf(t,n,i,a){const{LeafClass:u,LeafEntryClass:c}=n,f=[];let p=[];const m={},w=new Map;for(const{key:T,del:O,value:x}of t){const v=B0(T);O?typeof m[v]>"u"&&w.set(v,null):(m[v]={key:T,value:x},w.delete(v))}p=[...this.entryList.entries];for(const[T,[O]]of a){f.push(O);const x=B0(O.key);w.has(x)?w.set(x,T):(p[T]=new c(m[x],n),delete m[x])}let E=0;for(const[,T]of w)p.splice(T-E++,1);const S=Object.values(m).map(T=>new c(T,n));p=p.concat(S).sort(({key:T},{key:O})=>n.compare(T,O));const k={...i,entries:p,NodeClass:u,distance:0};return{nodes:await Xt.from(k),previous:f,blocks:[],distance:0}}async transactionBranch(t,n,i,a){const{BranchClass:u,BranchEntryClass:c}=n;let f=0;for(const[N,[T,O]]of a){const x=this.getNode(await T.address).then(v=>v.transaction(O.reverse(),{...n,sorted:!0})).then(v=>({entry:T,keys:O,distance:f,...v}));a.set(N,x)}let p=[...this.entryList.entries];const m={previous:[],blocks:[]};for(const[N,T]of a){const{nodes:O,previous:x,blocks:v,distance:C}=await T;f=C,p[N]=O,x.length&&(m.previous=m.previous.concat(x)),v.length&&(m.blocks=m.blocks.concat(v))}p=p.flat();const{newEntries:w,prepend:E}=await this.handlePrepend(p,n,i,m,f);E&&w.push(E),f++;const S=async N=>{if(N.isEntry)return N;const T=await N.encode();return m.blocks.push(T),this.cache.set(N),new c(N,n)};p=await Promise.all(w.map(S));const k={...i,entries:p,NodeClass:u,distance:f};return{nodes:await Xt.from(k),...m,distance:f}}async handlePrepend(t,n,i,a,u){const{BranchClass:c,LeafClass:f}=n;let p=[],m=null;for(const w of t)if(m){const E=await this.mergeFirstLeftEntries(w,m,i,a,u);m=null;const S=E[0].address?c:f,k={...i,entries:E.sort(({key:T},{key:O})=>n.compare(T,O)),NodeClass:S,distance:u},N=await Xt.from(k);N[N.length-1].closed||(m=N.pop()),N.length&&(p=p.concat(N))}else!w.isEntry&&!w.closed?m=w:p.push(w);return{newEntries:p,prepend:m}}async mergeFirstLeftEntries(t,n,i,a,u){const c=i.opts,{LeafClass:f,BranchClass:p,BranchEntryClass:m}=c;t.isEntry&&(t=await this.getNode(await t.address));const w=t.entryList.entries;if(w[0].constructor.name===n.entryList.entries[0].constructor.name)return n.entryList.entries.concat(t.entryList.entries);{const E=w.shift();if(!E)throw new Error("unreachable no left entry");if(!E.address)throw new Error("unreachable existing leaf, no leftEntry.address");const S=await this.mergeFirstLeftEntries(E,n,i,a,u-1),k=w.shift();if(!k)return S;const N=await this.getNode(await k.address);if(N.entryList.entries[0].address){let T;S[0].address?T=await Xt.from({...i,entries:S.sort(({key:C},{key:L})=>c.compare(C,L)),NodeClass:p,distance:u}):T=await Xt.from({...i,entries:S.sort(({key:C},{key:L})=>c.compare(C,L)),NodeClass:f,distance:u});const O=await Promise.all(T.map(async C=>(a.blocks.push(await C.encode()),this.cache.set(C),new m({key:C.key,address:await C.address},c)))),x=await Xt.from({...i,entries:[...N.entryList.entries,...O].sort(({key:C},{key:L})=>c.compare(C,L)),NodeClass:p,distance:u});return await Promise.all(x.map(async C=>{a.blocks.push(await C.encode()),this.cache.set(C)})),await Promise.all(x.map(async C=>new m({key:C.key,address:await C.address},c)))}else return S.concat(N.entryList.entries)}}async bulk(t,n={},i=!0){const{BranchClass:a}=n;n={codec:this.codec,hasher:this.hasher,getNode:this.getNode,compare:this.compare,cache:this.cache,...n},n.sorted||(t=aT(t,n),n.sorted=!0);const u={chunker:this.chunker,opts:n},c=await this.transaction(t,n);for(;c.nodes.length>1;){const p=c.nodes[0].distance+1,m=await Promise.all(c.nodes.map(async E=>{const S=await E.encode();return c.blocks.push(S),this.cache.set(E),new n.BranchEntryClass(E,n)})),w=await Xt.from({...u,entries:m,NodeClass:a,distance:p});await Promise.all(w.map(async E=>{const S=await E.encode();this.cache.set(E),c.blocks.push(S)})),c.nodes=w}const[f]=c.nodes;return c.root=f,i&&await dT(this,c,t,u),c}static async from({entries:t,chunker:n,NodeClass:i,distance:a,opts:u}){if(!t.every(p=>p.constructor.name===t[0].constructor.name))throw new Error("all entries must be of the same type");const c=[];let f=[];for(const p of t)f.push(p),await n(p,a)&&(c.push(new Ip({entries:f,closed:!0})),f=[]);return f.length&&c.push(new Ip({entries:f,closed:!1})),c.map(p=>new i({entryList:p,chunker:n,distance:a,...u}))}}class tE extends Xt{constructor({codec:t,hasher:n,block:i,...a}){super(a),this.codec=t,this.hasher=n,i?(this.block=i,this.address=i.cid):(this.block=this.encode(),this.address=this.block.then(u=>u.cid))}async get(t){const{result:n,cids:i}=await this.getEntry(t);return{result:n.key,cids:i}}async encode(){if(this.block)return this.block;const t=await this.encodeNode(),n={codec:this.codec,hasher:this.hasher,value:t};return this.block=await Vy(n),this.block}}class fT extends tE{async encodeNode(){const{entries:t}=this.entryList,n=async a=>{if(!a.address)throw new Error("entry.address required");return[a.key,await a.address]},i=await Promise.all(t.map(n));return{branch:[this.distance,i],closed:this.closed}}get isBranch(){return!0}}class hT extends tE{async encodeNode(){return{leaf:await Promise.all(this.entryList.entries.map(async n=>await n.encodeNode())),closed:this.closed}}get isLeaf(){return!0}}const pT=async function*(e){let{LeafClass:t,LeafEntryClass:n,BranchClass:i,BranchEntryClass:a,list:u,chunker:c,compare:f,...p}=e;u=u.map(E=>new n(E,p)),p.compare=f;let m=await Xt.from({entries:u,chunker:c,NodeClass:t,distance:0,opts:p});yield*m;let w=1;for(;m.length>1;){const E=async k=>new a({key:k.key,address:await k.address},p),S=await Promise.all(m.map(E));m=await Xt.from({entries:S,chunker:c,NodeClass:i,distance:w,opts:p}),yield*m,w++}};class nE extends sT{async identity(){const t=await this.codec.encode(await this.encodeNode()),n=await this.hasher.encode(t);return QA(n)}}class Cd extends nE{constructor(t,n){super(t,n),this.value=t.value}encodeNode(){return[this.key,this.value]}}class Nd extends nE{constructor(t,n){if(!t.address)throw new Error("Cannot create MapBranchEntry without address");super(t,n)}async encodeNode(){return[this.key,await this.address]}}const rE=async(e,t)=>{const{result:n,cids:i}=await e.getEntry(t);return{result:n.value,cids:i}},iE=async(e,t)=>{const{result:n,cids:i}=await e.getEntries(t);return{result:n.map(a=>a.value),cids:i}};class Ad extends hT{get(t){return rE(this,t)}getMany(t){return iE(this,t)}bulk(t,n={},i=!0){return super.bulk(t,{...oE,...n},i)}}class Td extends fT{get(t){return rE(this,t)}getMany(t){return iE(this,t)}bulk(t,n={},i=!0){return super.bulk(t,{...oE,...n},i)}}const oE={LeafClass:Ad,LeafEntryClass:Cd,BranchClass:Td,BranchEntryClass:Nd},sE=(e,t,n,i,a,u,c)=>{const f=c.LeafClass||Ad,p=c.LeafEntryClass||Cd,m=c.BranchClass||Td,w=c.BranchEntryClass||Nd,E={codec:i,hasher:a},S=N=>{const{value:T}=N,O={chunker:n,cache:t,block:N,getNode:k,codec:i,hasher:a,compare:u};let x,v;if(T.leaf)x=T.leaf.map(([$,V])=>new p({key:$,value:V},E)),v=f;else if(T.branch){const[$,V]=T.branch;O.distance=$,x=V.map(([W,F])=>new w({key:W,address:F},E)),v=m}else throw new Error("Unknown block data, does not match schema");const C=new Ip({entries:x,closed:T.closed}),L=new v({entryList:C,...O});return t.set(L),L},k=async N=>t.has(N)?t.get(N):e(N).then(T=>S(T));return k},aE=({get:e,cache:t,chunker:n,list:i,codec:a,hasher:u,sorted:c,compare:f,...p})=>{c||(i=i.sort(({key:E},{key:S})=>f(E,S)));const m=sE(e,t,n,a,u,f,p),w={list:i,codec:a,hasher:u,chunker:n,getNode:m,sorted:c,compare:f,cache:t,LeafClass:p.LeafClass||Ad,LeafEntryClass:p.LeafEntryClass||Cd,BranchClass:p.BranchClass||Td,BranchEntryClass:p.BranchEntryClass||Nd};return pT(w)},lE=({cid:e,get:t,cache:n,chunker:i,codec:a,hasher:u,compare:c,...f})=>sE(t,n,i,a,u,c,f)(e),uE={has:()=>!1,get:()=>{throw new Error("Cannot ask for entries from nocache")},set:()=>{}},yT=(e,t)=>Ve.parse(e,t),mT="raw",gT=85,wT=e=>yl(e),vT=e=>yl(e),bT=Object.freeze(Object.defineProperty({__proto__:null,code:gT,decode:vT,encode:wT,name:mT},Symbol.toStringTag,{value:"Module"}));var kT=Lp,j0=128,ET=127,xT=~ET,ST=Math.pow(2,31);function Lp(e,t,n){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw Lp.bytes=0,new RangeError("Could not encode varint");t=t||[],n=n||0;for(var i=n;e>=ST;)t[n++]=e&255|j0,e/=128;for(;e&xT;)t[n++]=e&255|j0,e>>>=7;return t[n]=e|0,Lp.bytes=n-i+1,t}var _T=Op,CT=128,U0=127;function Op(e,i){var n=0,i=i||0,a=0,u=i,c,f=e.length;do{if(u>=f||a>49)throw Op.bytes=0,new RangeError("Could not decode varint");c=e[u++],n+=a<28?(c&U0)<<a:(c&U0)*Math.pow(2,a),a+=7}while(c>=CT);return Op.bytes=u-i,n}var NT=Math.pow(2,7),AT=Math.pow(2,14),TT=Math.pow(2,21),IT=Math.pow(2,28),LT=Math.pow(2,35),OT=Math.pow(2,42),PT=Math.pow(2,49),RT=Math.pow(2,56),$T=Math.pow(2,63),DT=function(e){return e<NT?1:e<AT?2:e<TT?3:e<IT?4:e<LT?5:e<OT?6:e<PT?7:e<RT?8:e<$T?9:10},Fn={encode:kT,decode:_T,encodingLength:DT};const MT=Zk(),BT={float64:!1,quickEncodeToken:Wk};function cE(e,t=MT,n=BT){if(Array.isArray(e)){let i=0;for(const a of e)i+=cE(a,t,n);return i}else{const i=t[e.type.major];if(i.encodedSize===void 0||typeof i.encodedSize!="function")throw new Error(`Encoder for ${e.type.name} does not have an encodedSize()`);return i.encodedSize(e,n)}}class jT{constructor(t,n){this.bytes=t,this.byteOffset=n,this.roots=[],this.headerSize=n}addRoot(t,n){return UT(this,t,n),this}write(t){return FT(this,t),this}close(t){return VT(this,t)}}const UT=(e,t,n={})=>{const{resize:i=!1}=n,{bytes:a,headerSize:u,byteOffset:c,roots:f}=e;e.roots.push(t);const p=tm(e);if(p>u)if(p-u+c<a.byteLength)if(i)dE(e,p);else throw f.pop(),new RangeError(`Header of size ${u} has no capacity for new root ${t}.
  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`);else throw f.pop(),new RangeError(`Buffer has no capacity for a new root ${t}`)},zT=({cid:e,bytes:t})=>{const n=e.bytes.byteLength+t.byteLength;return Fn.encodingLength(n)+n},FT=(e,{cid:t,bytes:n})=>{const i=t.bytes.byteLength+n.byteLength,a=Fn.encode(i);if(e.byteOffset+a.length+i>e.bytes.byteLength)throw new RangeError("Buffer has no capacity for this block");wh(e,a),wh(e,t.bytes),wh(e,n)},VT=(e,t={})=>{const{resize:n=!1}=t,{roots:i,bytes:a,byteOffset:u,headerSize:c}=e,f=qk({version:1,roots:i}),p=Fn.encode(f.length),m=p.length+f.byteLength;if(c-m===0)return z0(e,p,f),a.subarray(0,u);if(n)return dE(e,m),z0(e,p,f),a.subarray(0,e.byteOffset);throw new RangeError(`Header size was overestimated.
You can use close({ resize: true }) to resize header`)},dE=(e,t)=>{const{bytes:n,headerSize:i}=e;n.set(n.subarray(i,e.byteOffset),t),e.byteOffset+=t-i,e.headerSize=t},wh=(e,t)=>{e.bytes.set(t,e.byteOffset),e.byteOffset+=t.length},z0=({bytes:e},t,n)=>{e.set(t),e.set(n,t.length)},WT=[new ne(M.map,2),new ne(M.string,"version"),new ne(M.uint,1),new ne(M.string,"roots")],ZT=new ne(M.tag,42),HT=e=>{const t=[...WT];t.push(new ne(M.array,e.length));for(const i of e)t.push(ZT),t.push(new ne(M.bytes,{length:i+1}));const n=cE(t);return Fn.encodingLength(n)+n},tm=({roots:e})=>HT(e.map(t=>t.bytes.byteLength)),KT=(e,t={})=>{const{roots:n=[],byteOffset:i=0,byteLength:a=e.byteLength,headerSize:u=tm({roots:n})}=t,c=new Uint8Array(e,i,a),f=new jT(c,u);for(const p of n)f.addRoot(p);return f},ui={Null:e=>e===null,Int:e=>Number.isInteger(e),Float:e=>typeof e=="number"&&Number.isFinite(e),String:e=>typeof e=="string",Bool:e=>typeof e=="boolean",Bytes:e=>e instanceof Uint8Array,Link:e=>!ui.Null(e)&&typeof e=="object"&&e.asCID===e,List:e=>Array.isArray(e),Map:e=>!ui.Null(e)&&typeof e=="object"&&e.asCID!==e&&!ui.List(e)&&!ui.Bytes(e)},Oo={Int:ui.Int,"CarHeader > version":e=>Oo.Int(e),"CarHeader > roots (anon) > valueType (anon)":ui.Link,"CarHeader > roots (anon)":e=>ui.List(e)&&Array.prototype.every.call(e,Oo["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":e=>Oo["CarHeader > roots (anon)"](e),CarHeader:e=>{const t=e&&Object.keys(e);return ui.Map(e)&&["version"].every(n=>t.includes(n))&&Object.entries(e).every(([n,i])=>Oo["CarHeader > "+n]&&Oo["CarHeader > "+n](i))}},GT=Oo.CarHeader,vh={SHA2_256:18,LENGTH:32,DAG_PB:112},QT=16+8+8+8;function Fc(e,t){if(!e.length)throw new Error("Unexpected end of data");const n=Fn.decode(e);return t.seek(Fn.decode.bytes),n}function qT(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;return{version:2,characteristics:[t.getBigUint64(n,!0),t.getBigUint64(n+=8,!0)],dataOffset:Number(t.getBigUint64(n+=8,!0)),dataSize:Number(t.getBigUint64(n+=8,!0)),indexOffset:Number(t.getBigUint64(n+=8,!0))}}function JT(e){Fn.decode(e);const t=Fn.decode.bytes,n=Fn.decode(e.subarray(Fn.decode.bytes)),i=Fn.decode.bytes;return t+i+n}async function fE(e,t){const n=Fc(await e.upTo(8),e);if(n===0)throw new Error("Invalid CAR header (zero length)");const i=await e.exactly(n,!0),a=Jk(i);if(!GT(a))throw new Error("Invalid CAR header format");if(a.version!==1&&a.version!==2||t!==void 0&&a.version!==t)throw new Error(`Invalid CAR version: ${a.version}${t!==void 0?` (expected ${t})`:""}`);const u=Array.isArray(a.roots);if(a.version===1&&!u||a.version===2&&u)throw new Error("Invalid CAR header format");if(a.version===1)return a;const c=qT(await e.exactly(QT,!0));e.seek(c.dataOffset-e.pos);const f=await fE(e,1);return Object.assign(f,c)}async function YT(e){const t=await e.exactly(2,!1);if(t[0]===vh.SHA2_256&&t[1]===vh.LENGTH){const c=await e.exactly(34,!0),f=_p(c);return Ve.create(0,vh.DAG_PB,f)}const n=Fc(await e.upTo(8),e);if(n!==1)throw new Error(`Unexpected CID version (${n})`);const i=Fc(await e.upTo(8),e),a=await e.exactly(JT(await e.upTo(8)),!0),u=_p(a);return Ve.create(n,i,u)}async function hE(e){const t=e.pos;let n=Fc(await e.upTo(8),e);if(n===0)throw new Error("Invalid CAR section (zero length)");n+=e.pos-t;const i=await YT(e),a=n-Number(e.pos-t);return{cid:i,length:n,blockLength:a}}async function XT(e){const{cid:t,blockLength:n}=await hE(e);return{bytes:await e.exactly(n,!0),cid:t}}async function e6(e){const t=e.pos,{cid:n,length:i,blockLength:a}=await hE(e),u={cid:n,length:i,blockLength:a,offset:t,blockOffset:e.pos};return e.seek(u.blockLength),u}function t6(e){const t=(async()=>{const n=await fE(e);if(n.version===2){const i=e.pos-n.dataOffset;e=o6(e,n.dataSize-i)}return n})();return{header:()=>t,async*blocks(){for(await t;(await e.upTo(8)).length>0;)yield await XT(e)},async*blocksIndex(){for(await t;(await e.upTo(8)).length>0;)yield await e6(e)}}}function n6(e){let t=0;return{async upTo(n){return e.subarray(t,t+Math.min(n,e.length-t))},async exactly(n,i=!1){if(n>e.length-t)throw new Error("Unexpected end of data");const a=e.subarray(t,t+n);return i&&(t+=n),a},seek(n){t+=n},get pos(){return t}}}function r6(e){let t=0,n=0,i=0,a=new Uint8Array(0);const u=async c=>{n=a.length-i;const f=[a.subarray(i)];for(;n<c;){const m=await e();if(m==null)break;n<0?m.length>n&&f.push(m.subarray(-n)):f.push(m),n+=m.length}a=new Uint8Array(f.reduce((m,w)=>m+w.length,0));let p=0;for(const m of f)a.set(m,p),p+=m.length;i=0};return{async upTo(c){return a.length-i<c&&await u(c),a.subarray(i,i+Math.min(a.length-i,c))},async exactly(c,f=!1){if(a.length-i<c&&await u(c),a.length-i<c)throw new Error("Unexpected end of data");const p=a.subarray(i,i+c);return f&&(t+=c,i+=c),p},seek(c){t+=c,i+=c},get pos(){return t}}}function i6(e){const t=e[Symbol.asyncIterator]();async function n(){const i=await t.next();return i.done?null:i.value}return r6(n)}function o6(e,t){let n=0;return{async upTo(i){let a=await e.upTo(i);return a.length+n>t&&(a=a.subarray(0,t-n)),a},async exactly(i,a=!1){const u=await e.exactly(i,a);if(u.length+n>t)throw new Error("Unexpected end of data");return a&&(n+=i),u},seek(i){n+=i,e.seek(i)},get pos(){return e.pos}}}class pE{constructor(t,n){this._header=t,this._blocks=n,this._keys=n.map(i=>i.cid.toString())}get version(){return this._header.version}async getRoots(){return this._header.roots}async has(t){return this._keys.indexOf(t.toString())>-1}async get(t){const n=this._keys.indexOf(t.toString());return n>-1?this._blocks[n]:void 0}async*blocks(){for(const t of this._blocks)yield t}async*cids(){for(const t of this._blocks)yield t.cid}static async fromBytes(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return F0(n6(t))}static async fromIterable(t){if(!t||typeof t[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return F0(i6(t))}}async function F0(e){const t=t6(e),n=await t.header(),i=[];for await(const a of t.blocks())i.push(a);return new pE(n,i)}const s6=(e,t)=>t.some(n=>e instanceof n);let V0,W0;function a6(){return V0||(V0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function l6(){return W0||(W0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yE=new WeakMap,Pp=new WeakMap,mE=new WeakMap,bh=new WeakMap,nm=new WeakMap;function u6(e){const t=new Promise((n,i)=>{const a=()=>{e.removeEventListener("success",u),e.removeEventListener("error",c)},u=()=>{n(wi(e.result)),a()},c=()=>{i(e.error),a()};e.addEventListener("success",u),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&yE.set(n,e)}).catch(()=>{}),nm.set(t,e),t}function c6(e){if(Pp.has(e))return;const t=new Promise((n,i)=>{const a=()=>{e.removeEventListener("complete",u),e.removeEventListener("error",c),e.removeEventListener("abort",c)},u=()=>{n(),a()},c=()=>{i(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",u),e.addEventListener("error",c),e.addEventListener("abort",c)});Pp.set(e,t)}let Rp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Pp.get(e);if(t==="objectStoreNames")return e.objectStoreNames||mE.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function d6(e){Rp=e(Rp)}function f6(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(kh(this),t,...n);return mE.set(i,t.sort?t.sort():[t]),wi(i)}:l6().includes(e)?function(...t){return e.apply(kh(this),t),wi(yE.get(this))}:function(...t){return wi(e.apply(kh(this),t))}}function h6(e){return typeof e=="function"?f6(e):(e instanceof IDBTransaction&&c6(e),s6(e,a6())?new Proxy(e,Rp):e)}function wi(e){if(e instanceof IDBRequest)return u6(e);if(bh.has(e))return bh.get(e);const t=h6(e);return t!==e&&(bh.set(e,t),nm.set(t,e)),t}const kh=e=>nm.get(e);function p6(e,t,{blocked:n,upgrade:i,blocking:a,terminated:u}={}){const c=indexedDB.open(e,t),f=wi(c);return i&&c.addEventListener("upgradeneeded",p=>{i(wi(c.result),p.oldVersion,p.newVersion,wi(c.transaction),p)}),n&&c.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),f.then(p=>{u&&p.addEventListener("close",()=>u()),a&&p.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const y6=["get","getKey","getAll","getAllKeys","count"],m6=["put","add","delete","clear"],Eh=new Map;function Z0(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Eh.get(t))return Eh.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,a=m6.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||y6.includes(n)))return;const u=async function(c,...f){const p=this.transaction(c,a?"readwrite":"readonly");let m=p.store;return i&&(m=m.index(f.shift())),(await Promise.all([m[n](...f),a&&p.done]))[0]};return Eh.set(t,u),u}d6(e=>({...e,get:(t,n,i)=>Z0(t,n)||e.get(t,n,i),has:(t,n)=>!!Z0(t,n)||e.has(t,n)}));var Vc={},g6={get exports(){return Vc},set exports(e){Vc=e}},Wc={},w6={get exports(){return Wc},set exports(e){Wc=e}},Zc={},v6={get exports(){return Zc},set exports(e){Zc=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(i){return function(...a){if(i===null)throw new Error("Callback was already called.");var u=i;i=null,u.apply(this,a)}}e.exports=t.default})(v6,Zc);var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.fallback=gE;Ur.wrap=wE;var b6=Ur.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,k6=Ur.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,E6=Ur.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function gE(e){setTimeout(e,0)}function wE(e){return(t,...n)=>e(()=>t(...n))}var xa;b6?xa=queueMicrotask:k6?xa=setImmediate:E6?xa=process.nextTick:xa=gE;Ur.default=wE(xa);var Hc={},x6={get exports(){return Hc},set exports(e){Hc=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.head=this.tail=null,this.length=0}removeLink(u){return u.prev?u.prev.next=u.next:this.head=u.next,u.next?u.next.prev=u.prev:this.tail=u.prev,u.prev=u.next=null,this.length-=1,u}empty(){for(;this.head;)this.shift();return this}insertAfter(u,c){c.prev=u,c.next=u.next,u.next?u.next.prev=c:this.tail=c,u.next=c,this.length+=1}insertBefore(u,c){c.prev=u.prev,c.next=u,u.prev?u.prev.next=c:this.head=c,u.prev=c,this.length+=1}unshift(u){this.head?this.insertBefore(this.head,u):i(this,u)}push(u){this.tail?this.insertAfter(this.tail,u):i(this,u)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var u=this.head;u;)yield u.data,u=u.next}remove(u){for(var c=this.head;c;){var{next:f}=c;u(c)&&this.removeLink(c),c=f}return this}}t.default=n;function i(a,u){a.length=1,a.head=a.tail=u}e.exports=t.default})(x6,Hc);var ir={},Ra={},S6={get exports(){return Ra},set exports(e){Ra=e}},Kc={},_6={get exports(){return Kc},set exports(e){Kc=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){return function(...i){var a=i.pop();return n.call(this,i,a)}},e.exports=t.default})(_6,Kc);var H0;function C6(){return H0||(H0=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var n=Kc,i=f(n),a=Ur,u=f(a),c=vE();function f(E){return E&&E.__esModule?E:{default:E}}function p(E){return(0,c.isAsync)(E)?function(...S){const k=S.pop(),N=E.apply(this,S);return m(N,k)}:(0,i.default)(function(S,k){var N;try{N=E.apply(this,S)}catch(T){return k(T)}if(N&&typeof N.then=="function")return m(N,k);k(null,N)})}function m(E,S){return E.then(k=>{w(S,null,k)},k=>{w(S,k&&k.message?k:new Error(k))})}function w(E,S,k){try{E(S,k)}catch(N){(0,u.default)(T=>{throw T},N)}}e.exports=t.default}(S6,Ra)),Ra}var K0;function vE(){if(K0)return ir;K0=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.isAsyncIterable=ir.isAsyncGenerator=ir.isAsync=void 0;var e=C6(),t=n(e);function n(f){return f&&f.__esModule?f:{default:f}}function i(f){return f[Symbol.toStringTag]==="AsyncFunction"}function a(f){return f[Symbol.toStringTag]==="AsyncGenerator"}function u(f){return typeof f[Symbol.asyncIterator]=="function"}function c(f){if(typeof f!="function")throw new Error("expected a function");return i(f)?(0,t.default)(f):f}return ir.default=c,ir.isAsync=i,ir.isAsyncGenerator=a,ir.isAsyncIterable=u,ir}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=E;var n=Zc,i=w(n),a=Ur,u=w(a),c=Hc,f=w(c),p=vE(),m=w(p);function w(S){return S&&S.__esModule?S:{default:S}}function E(S,k,N){if(k==null)k=1;else if(k===0)throw new RangeError("Concurrency must not be zero");var T=(0,m.default)(S),O=0,x=[];const v={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function C(fe,_e){v[fe].push(_e)}function L(fe,_e){const Ee=(...Ne)=>{$(fe,Ee),_e(...Ne)};v[fe].push(Ee)}function $(fe,_e){if(!fe)return Object.keys(v).forEach(Ee=>v[Ee]=[]);if(!_e)return v[fe]=[];v[fe]=v[fe].filter(Ee=>Ee!==_e)}function V(fe,..._e){v[fe].forEach(Ee=>Ee(..._e))}var W=!1;function F(fe,_e,Ee,Ne){if(Ne!=null&&typeof Ne!="function")throw new Error("task callback must be a function");be.started=!0;var H,de;function me(A,...U){if(A)return Ee?de(A):H();if(U.length<=1)return H(U[0]);H(U)}var Pe=be._createTaskItem(fe,Ee?me:Ne||me);if(_e?be._tasks.unshift(Pe):be._tasks.push(Pe),W||(W=!0,(0,u.default)(()=>{W=!1,be.process()})),Ee||!Ne)return new Promise((A,U)=>{H=A,de=U})}function Y(fe){return function(_e,...Ee){O-=1;for(var Ne=0,H=fe.length;Ne<H;Ne++){var de=fe[Ne],me=x.indexOf(de);me===0?x.shift():me>0&&x.splice(me,1),de.callback(_e,...Ee),_e!=null&&V("error",_e,de.data)}O<=be.concurrency-be.buffer&&V("unsaturated"),be.idle()&&V("drain"),be.process()}}function ue(fe){return fe.length===0&&be.idle()?((0,u.default)(()=>V("drain")),!0):!1}const $e=fe=>_e=>{if(!_e)return new Promise((Ee,Ne)=>{L(fe,(H,de)=>{if(H)return Ne(H);Ee(de)})});$(fe),C(fe,_e)};var tt=!1,be={_tasks:new f.default,_createTaskItem(fe,_e){return{data:fe,callback:_e}},*[Symbol.iterator](){yield*be._tasks[Symbol.iterator]()},concurrency:k,payload:N,buffer:k/4,started:!1,paused:!1,push(fe,_e){return Array.isArray(fe)?ue(fe)?void 0:fe.map(Ee=>F(Ee,!1,!1,_e)):F(fe,!1,!1,_e)},pushAsync(fe,_e){return Array.isArray(fe)?ue(fe)?void 0:fe.map(Ee=>F(Ee,!1,!0,_e)):F(fe,!1,!0,_e)},kill(){$(),be._tasks.empty()},unshift(fe,_e){return Array.isArray(fe)?ue(fe)?void 0:fe.map(Ee=>F(Ee,!0,!1,_e)):F(fe,!0,!1,_e)},unshiftAsync(fe,_e){return Array.isArray(fe)?ue(fe)?void 0:fe.map(Ee=>F(Ee,!0,!0,_e)):F(fe,!0,!0,_e)},remove(fe){be._tasks.remove(fe)},process(){if(!tt){for(tt=!0;!be.paused&&O<be.concurrency&&be._tasks.length;){var fe=[],_e=[],Ee=be._tasks.length;be.payload&&(Ee=Math.min(Ee,be.payload));for(var Ne=0;Ne<Ee;Ne++){var H=be._tasks.shift();fe.push(H),x.push(H),_e.push(H.data)}O+=1,be._tasks.length===0&&V("empty"),O===be.concurrency&&V("saturated");var de=(0,i.default)(Y(fe));T(_e,de)}tt=!1}},length(){return be._tasks.length},running(){return O},workersList(){return x},idle(){return be._tasks.length+O===0},pause(){be.paused=!0},resume(){be.paused!==!1&&(be.paused=!1,(0,u.default)(be.process))}};return Object.defineProperties(be,{saturated:{writable:!1,value:$e("saturated")},unsaturated:{writable:!1,value:$e("unsaturated")},empty:{writable:!1,value:$e("empty")},drain:{writable:!1,value:$e("drain")},error:{writable:!1,value:$e("error")}}),be}e.exports=t.default})(w6,Wc);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var n=Wc,i=a(n);function a(c){return c&&c.__esModule?c:{default:c}}function u(c,f,p){return(0,i.default)(c,f,p)}e.exports=t.default})(g6,Vc);const N6=r1(Vc);var ns,rl;class A6{constructor(t="default"){jt(this,"idb",null);Ze(this,ns,null);Ze(this,rl,new Set);jt(this,"uploadFunction",null);jt(this,"withDB",async t=>(this.idb||(this.idb=await p6(`fp.${this.name}.valet`,2,{upgrade(n,i,a,u){i<1&&(n.createObjectStore("cars"),n.createObjectStore("cidToCar",{keyPath:"car"}).createIndex("cids","cids",{multiEntry:!0})),i<2&&u.objectStore("cidToCar").createIndex("pending","pending")}})),await t(this.idb)));jt(this,"remoteBlockFunction",null);this.name=t,bn(this,ns,N6(async(n,i)=>{if(console.log("queue worker",n.length,n.reduce((a,u)=>a+u.value.length,0)),this.uploadFunction)return await this.withDB(async a=>{for(const u of n){await this.uploadFunction(u.carCid,u.value);const c=await a.get("cidToCar",u.carCid);delete c.pending,await a.put("cidToCar",c)}});i()})),te(this,ns).drain(async()=>await this.withDB(async n=>{const i=(await n.getAllFromIndex("cidToCar","pending")).map(a=>a.car);for(const a of i){await this.uploadFunction(a,await n.get("cars",a));const u=await n.get("cidToCar",a);delete u.pending,await n.put("cidToCar",u)}}))}async parkCar(t,n,i){if(await this.withDB(async a=>{const u=a.transaction(["cars","cidToCar"],"readwrite");return await u.objectStore("cars").put(n,t),await u.objectStore("cidToCar").put({pending:"y",car:t,cids:Array.from(i)}),await u.done}),this.uploadFunction){if(te(this,rl).has(t))return;te(this,ns).push({carCid:t,value:n}),te(this,rl).add(t)}}async getBlock(t){return await this.withDB(async n=>{const i=n.transaction(["cars","cidToCar"],"readonly"),a=await i.objectStore("cidToCar").index("cids").get(t),u=a==null?void 0:a.car;if(!u)throw new Error("Missing block: "+t);const c=await i.objectStore("cars").get(u),p=await(await pE.fromBytes(c)).get(Ve.parse(t));if(p)return p.bytes})}}ns=new WeakMap,rl=new WeakMap;const Vu=new Map,T6=(e,t)=>(Vu.has(e)||Vu.set(e,t().finally(()=>setTimeout(()=>Vu.delete(e),100))),Vu.get(e));var rs,Vp,is,Qc,bE,qc,Jc;class I6{constructor(t){Ze(this,Qc);Ze(this,rs,new Map);jt(this,"valet",null);Ze(this,Vp,"blkz."+Math.random().toString(36).substring(2,4));Ze(this,is,new Set);Ze(this,qc,async t=>{const n=new Set;for(const{cid:i,bytes:a}of t.entries()){const u=i.toString();te(this,rs).has(u)||(te(this,rs).set(u,a),n.add(u))}n.size>0&&await te(this,Jc).call(this,t,n)});Ze(this,Jc,async(t,n)=>{if(t.lastCid){const i=await L6(t.lastCid,t);await this.valet.parkCar(i.cid.toString(),i.bytes,n)}});this.valet=new A6(t)}async get(t){const n=t.toString(),i=await Promise.any([Ot(this,Qc,bE).call(this,n),this.commitedGet(n)]).catch(a=>(console.log("networkGet",t.toString(),a),this.networkGet(n)));if(!i)throw new Error("Missing block: "+n);return{cid:t,bytes:i}}async commitedGet(t){const n=te(this,rs).get(t);return n||await this.valet.getBlock(t)}async networkGet(t){if(this.valet.remoteBlockFunction){const n=await T6(t,async()=>await this.valet.remoteBlockFunction(t));if(n)return Id("networkGot: "+t,this,async i=>{await i.put(Ve.parse(t),n)}),n}else throw new Error("No remoteBlockFunction")}put(t,n){throw new Error("use a transaction to put")}begin(t=""){const n=new O6(t,this);return te(this,is).add(n),n}async commit(t){await te(this,qc).call(this,t)}retire(t){te(this,is).delete(t)}}rs=new WeakMap,Vp=new WeakMap,is=new WeakMap,Qc=new WeakSet,bE=async function(t){for(const n of te(this,is)){const i=await n.get(t);if(i&&i.bytes)return i.bytes}throw new Error("Missing block: "+t)},qc=new WeakMap,Jc=new WeakMap;const Id=async(e,t,n)=>{if(!t.commit)return await n(t);const i=t.begin(e);try{const a=await n(i);return await t.commit(i),a}catch(a){throw console.error(`Transaction ${e} failed`,a,a.stack),a}finally{t.retire(i)}},L6=async(e,t)=>{let n=0;const i=tm({roots:[e]});n+=i;for(const{cid:c,bytes:f}of t.entries())n+=zT({cid:c,bytes:f});const a=new Uint8Array(n),u=await KT(a,{headerSize:i});u.addRoot(e);for(const{cid:c,bytes:f}of t.entries())u.write({cid:c,bytes:f});return await u.close(),await Vy({value:u.bytes,hasher:vs,codec:bT})};var os;class O6{constructor(t,n){Ze(this,os,new Map);jt(this,"lastCid",null);jt(this,"label","");jt(this,"parentBlockstore",null);this.label=t,this.parentBlockstore=n}async get(t){const n=t.toString();let i=te(this,os).get(n);if(i)return{cid:t,bytes:i};if(i=await this.parentBlockstore.commitedGet(n),i)return{cid:t,bytes:i}}put(t,n){te(this,os).set(t.toString(),n),this.lastCid=t}*entries(){for(const[t,n]of te(this,os))yield{cid:yT(t),bytes:n}}}os=new WeakMap;const kE={cache:uE,chunker:Yk(3),codec:wl,hasher:vs,compare:vl},P6=async(e,t)=>await t(),Ld=e=>({getBlock:async n=>{const{cid:i,bytes:a}=await P6(n,()=>e.get(n));return xN({cid:i,bytes:a,hasher:vs,codec:wl})}});async function G0({inBlocks:e,bigPut:t,root:n,event:i,head:a,additions:u,removals:c=[]}){let f;const{key:p,value:m,del:w}=i,E={type:"put",root:{cid:n.cid,bytes:n.bytes,value:n.value},key:p};w?(E.value=null,E.type="del"):E.value=m;const S=await YA.create(E,a);return t(S),{head:a,cids:f}=await JA(e,a,S.cid),{root:n,additions:u,removals:c,head:a,clockCIDs:f,event:S}}const $p=e=>{const{getBlock:t,cids:n}=Ld(e),i=e.put.bind(e);return{getBlock:t,bigPut:async(u,c)=>{const{cid:f,bytes:p}=u;i(f,p),c&&c.set(f.toString(),u)},blocks:e,cids:n}},EE=e=>e.map(({value:t})=>{const{data:{type:n,value:i,key:a}}=t;return n==="put"?{key:a,value:i}:{key:a,del:!0}}),xE=async(e,t,n)=>{const i=await e.get(t),{root:a}=i.value.data;return lE({cid:a.cid,get:n,...kE})};async function R6(e,t,n,i){const{getBlock:a,bigPut:u,blocks:c}=$p(e);if(!t.length){const O=new Map;let x;for await(const v of aE({get:a,list:[n],...kE}))x=await v.block,u(x,O);return G0({inBlocks:e,bigPut:u,root:x,event:n,head:t,additions:Array.from(O.values())})}const f=new _d(c),{ancestor:p,sorted:m}=await em(f,t),w=await xE(f,p,a),E=EE(m),{root:S,blocks:k}=await w.bulk([...E,n]),N=await S.block,T=new Map;u(N,T);for(const O of k)u(O,T);return G0({inBlocks:e,bigPut:u,root:N,event:n,head:t,additions:Array.from(T.values())})}async function rm(e,t){if(!t.length)throw new Error("no head");const{getBlock:n,blocks:i}=$p(e),a=new _d(i),{ancestor:u,sorted:c}=await em(a,t),f=await xE(a,u,n),p=EE(c),{root:m,blocks:w}=await f.bulk(p);return await Id("root",e,async E=>{const{bigPut:S}=$p(E);for(const k of w)S(k)}),{cids:a.cids,node:m}}async function Q0(e,t,n){if(!t.length)throw new Error("no head");const i=[...n,...t],{cids:a,events:u}=await tT(e,i);return{clockCIDs:a,result:u.map(({value:{data:c}})=>c)}}async function $6(e,t){if(!t.length)return{clockCIDs:new Tr,cids:new Tr,result:[]};const{node:n,cids:i}=await rm(e,t),{result:a,cids:u}=await n.getAllEntries();return{clockCIDs:i,cids:u,result:a.map(({key:c,value:f})=>({key:c,value:f}))}}async function D6(e,t,n){if(!t.length)return{cids:new Tr,result:null};const{node:i,cids:a}=await rm(e,t),{result:u,cids:c}=await i.get(n);return{result:u,cids:c,clockCIDs:a}}async function*M6(e,t){if(!t.length)return{cids:new Tr,result:null};const{node:n,cids:i}=await rm(e,t),a=[];for await(const u of n.vis())yield u;return{vis:a.join(`
`),cids:i}}var Ei={},im={};im.encode=function(e){if(isNaN(e))return"DaN";if(e===0)return"FE  0M0";if(e===1/0)return"FF";if(e===-1/0)return"DD";var t=e.toExponential().split("e"),n=Number(t[1])+500,i=t[0]+(t[0].indexOf(".")===-1?".":"")+"0".repeat(20),a="E"+B6(String(n),3)+"M"+String(i);return e>0?"F"+a:"D"+SE(a)};im.decode=function(e){if(e==="DaN")return NaN;if(e==="FF")return 1/0;if(e==="DD")return-1/0;var t=e[0]==="D",n=(t?SE(e):e).slice(2).split("M");return Number((t?"-":"")+n[1]+"e"+String(Number(n[0])-500))};function SE(e){for(var t="",n=0;n<e.length;n++){var i=e[n];isNaN(Number(i))||i===" "?i!=="-"&&(t+=i):t+=String(9-Number(i))}return t}function B6(e,t){return" ".repeat(t-e.length).substr(0,t)+e}var _E={},j6={"?":"?@","!":"??",'"':"?%"};function U6(e){return/[!"]/.test(e)?e.replace(/[\?!"]/g,function(t){return j6[t]}):e}var z6={"?@":"?","??":"!","?%":'"'};function F6(e){return/\?[%\?@]/.test(e)?e.replace(/\?[%\?@]/g,function(t){return z6[t]}):e}_E.factory=function(e){return{encode:t,decode:i};function t(a){if(a===null)return"A";if(!Array.isArray(a))throw new Error("can only encode arrays");var u=a.length;if(u==0)return"K!";for(var c=n(a[0]),f=1;f<u;f++)c+='"'+n(a[f]);return"K"+c+"!"}function n(a){return typeof a=="object"?t(a):U6(e.encode(a))}function i(a){if(a==="A")return null;if(a==="K!")return[];for(var u=a.split('"'),c=[[]],f,p=0,m=u.length,w=0;w<m;w++){for(var E=u[w],S=E.length,k=0;E[k]=="K";)k++;for(var N=0;E[S-N-1]=="!";)N++;for(var T=E.slice(k,S-N),x=p+k,O=p;O<x;O++)c[O+1]=[],c[O].push(c[O+1]),p=x,f=c[p];T.length!==0&&f.push(e.decode(F6(T)));for(var x=p-N,O=x;O<p;O++)c[O+1]=[],p=x,f=c[p]}return c[0][0]}};(function(e){var t=im,n=_E;e.flip=function(a){var u=a.toString(),c="";for(var f in u)c+=u[f]=="."?".":9-+u[f];return c},e.number=t,e.string={encode:function(a){return/\x00|\x01/.test(a)?"J"+a.replace(/\x01/g,"").replace(/\x00/g,""):"J"+a},decode:function(a){if(a[0]==="J")return a.substring(1)}},e.encode=function(a){return e[typeof a].encode(a)},e.decode=function(a){if(a==="")return a;if(!i[a[0]])throw new Error("no decoder for:"+JSON.stringify(a));return i[a[0]](a)},e.object=n.factory(e),e.boolean={encode:function(a){return a?"C":"B"},decode:function(a){return a==="C"}},e.undefined={encode:function(a){return"L"},decode:function(){}};var i={A:e.object.decode,B:e.boolean.decode,C:e.boolean.decode,D:e.number.decode,F:e.number.decode,J:e.string.decode,K:e.object.decode,L:e.undefined.decode};e.buffer=!1,e.type="charwise"})(Ei);var ss,il,Dp,ol,Mp,sl,Bp;const Yc=class{constructor(t,n,i,a={}){Ze(this,il);Ze(this,ol);Ze(this,sl);Ze(this,ss,new Set);this.name=(i==null?void 0:i.name)||"global",this.instanceId=`fp.${this.name}.${Math.random().toString(36).substring(2,7)}`,this.blocks=t,this.clock=n,this.config=i,this.authCtx=a}snapshot(t){return new Yc(this.blocks,t||this.clock)}async setClock(t){this.clock=t.map(n=>n["/"]?n["/"]:n),await Ot(this,il,Dp).call(this,{reset:!0,clock:t})}toJSON(){return{clock:this.clock}}async changesSince(t){let n,i,a;if(t){const u=await Q0(this.blocks,this.clock,t),c=new Map;for(const{key:f,type:p,value:m}of u.result.map(q0))p==="del"?c.set(f,{key:f,del:!0}):c.set(f,{key:f,value:m});n=Array.from(c.values()),a=u.cids}else{const u=await $6(this.blocks,this.clock);n=u.result.map(({key:c,value:f})=>q0({key:c,value:f})),i=u.cids}return{rows:n,clock:this.clock,proof:{data:await Po(i),clock:await Po(a)}}}registerListener(t){return te(this,ss).add(t),()=>{te(this,ss).delete(t)}}async put({_id:t,_proof:n,...i}){const a=t||"f"+Math.random().toString(36).slice(2);return await Ot(this,ol,Mp).call(this,{_id:a,...i}),await Ot(this,sl,Bp).call(this,{key:a,value:i},i._clock)}async del(t){let n,i=null;return t._id?(n=t._id,i=t._clock):n=t,await Ot(this,ol,Mp).call(this,{_id:n,_deleted:!0}),await Ot(this,sl,Bp).call(this,{key:n,value:null},i)}async get(t,n={}){const i=n.clock||this.clock,a=await D6(this.blocks,i,Ei.encode(t));if(!a||a.result===null)throw new Error("Not found");const u=a.result;return n.mvcc===!0&&(u._clock=this.clock),u._proof={data:await Po(a.cids),clock:this.clock},u._id=t,u}async*vis(){return yield*M6(this.blocks,this.clock)}setCarUploader(t){console.log("registering car uploader"),this.blocks.valet.uploadFunction=t}setRemoteBlockReader(t){this.blocks.valet.remoteBlockFunction=t}};let ac=Yc;ss=new WeakMap,il=new WeakSet,Dp=async function(t){for(const n of te(this,ss))await n(t)},ol=new WeakSet,Mp=async function(t){if(this.config&&this.config.validateChange){const n=await this.get(t._id).then(i=>i).catch(()=>({}));this.config.validateChange(t,n,this.authCtx)}},sl=new WeakSet,Bp=async function(t,n=null){const i=V6(t);if(n&&JSON.stringify(n)!==JSON.stringify(this.clock)&&(await Q0(this.blocks,this.clock,i.value._clock)).result.find(({key:f})=>f===i.key))throw new Error("MVCC conflict, document is changed, please reload the document and try again.");const a=await Id("#putToProllyTree",this.blocks,async u=>await R6(u,this.clock,i));if(!a)throw console.error("failed",i),new Error("failed to put at storage layer");return this.clock=a.head,await Ot(this,il,Dp).call(this,[t]),{id:t.key,clock:this.clock,proof:{data:await Po(a.cids),clock:await Po(a.clockCIDs)}}},jt(ac,"storage",t=>new Yc(new I6(t),[],{name:t}));async function Po(e){return!e||!e.all?[]:[...await e.all()].map(n=>n.toString())}function q0(e){const t=Ei.decode(e.key);return{...e,key:t}}function V6(e){if(!(e&&e.key))return;const t=Ei.encode(e.key);return{...e,key:t}}const W6=(e,t)=>{const[n,i]=e,[a,u]=t,c=vl(n,a);return c!==0?c:Z6(i,u)},Z6=(e,t)=>{if(Number.isNaN(e))return-1;if(Number.isNaN(t))throw new Error("ref may not be Infinity or NaN");return Number.isFinite(e)?vl(e,t):1},CE=async(e,t)=>{const n=[t,NaN],i=[t,1/0],{result:a,cids:u}=await e.getRangeEntries(n,i);return{result:a.map(c=>{const[f,p]=c.key;return{id:p,key:f,row:c.value}}),cids:u}},NE=async(e,t,n)=>{t=[t,NaN],n=[n,1/0];const{result:i,cids:a}=await e.getRangeEntries(t,n);return{result:i.map(c=>{const[f,p]=c.key;return{id:p,key:f,row:c.value}}),cids:a}};class H6 extends Ad{get(t){return CE(this,t)}range(t,n){return NE(this,t,n)}bulk(t,n={},i=!0){return super.bulk(t,{...om,...n},i)}}class K6 extends Td{get(t){return CE(this,t)}range(t,n){return NE(this,t,n)}bulk(t,n={},i=!0){return super.bulk(t,{...om,...n},i)}}const G6=H6,Q6=K6,om={LeafClass:G6,BranchClass:Q6,LeafEntryClass:Cd,BranchEntryClass:Nd},AE={...om,compare:W6},q6=e=>(e={...AE,...e},aE(e)),TE=e=>(e={...AE,...e},lE(e)),J6=(e,t)=>{const[n,i]=e,[a,u]=t,c=vl(n,a);return c!==0?c:Y6(i,u)},Y6=(e,t)=>{if(Number.isNaN(e))return-1;if(Number.isNaN(t))throw new Error("ref may not be Infinity or NaN");return Number.isFinite(e)?vl(e,t):1},sm={cache:uE,chunker:Yk(3),codec:wl,hasher:vs,compare:J6},X6=({key:e,value:t})=>({_id:e,...t}),eI=(e,t)=>{const n=[];return e.forEach(({key:i,value:a,del:u})=>{u||!a||t(X6({key:i,value:a}),(c,f)=>{n.push({key:[Ei.encode(c),i],value:f})})}),n},tI=async(e,t,n,i)=>{const{getBlock:a}=Ld(e);return await(await TE({cid:t.cid,get:a,...sm})).getMany(n)};var Xc,IE;class J0{constructor(t,n){Ze(this,Xc);this.database=t,this.mapFun=n,this.dbIndexRoot=null,this.dbIndex=null,this.byIDindexRoot=null,this.dbHead=null}async query(t){await Id("#updateIndex",this.database.blocks,async i=>{await Ot(this,Xc,IE).call(this,i)});const n=await nI(this.database.blocks,this.dbIndexRoot,this.dbIndex,t);return{proof:{index:await Po(n.cids)},rows:n.result.map(({id:i,key:a,row:u})=>({id:i,key:Ei.decode(a),value:u}))}}}Xc=new WeakSet,IE=async function(t){this.dbHead=null,this.dbIndex=null,this.dbIndexRoot=null;const n=await this.database.changesSince(this.dbHead);if(this.dbHead){const p=(await tI(t,this.byIDindexRoot,n.rows.map(({key:S})=>S),this.mapFun)).result.map(S=>({key:S,del:!0})),m=await Wu(t,this.dbIndexRoot,this.dbIndex,p);this.dbIndexRoot=m.root,this.dbIndex=m.dbIndex;const w=p.map(({key:S})=>({key:S[1],del:!0})),E=await Wu(t,this.byIDindexRoot,this.byIDIndex,w);this.byIDindexRoot=E.root,this.byIDIndex=E.dbIndex}const i=eI(n.rows,this.mapFun),a=i.map(({key:f})=>({key:f[1],value:f})),u=await Wu(t,this.byIDindexRoot,this.byIDIndex,a);this.byIDindexRoot=u.root,this.byIDIndex=u.dbIndex;const c=await Wu(t,this.dbIndexRoot,this.dbIndex,i);this.dbIndexRoot=c.root,this.dbIndex=c.dbIndex,this.dbHead=n.clock};async function Wu(e,t,n,i){if(!i.length)return{dbIndex:n,root:t};const a=e.put.bind(e),{getBlock:u}=Ld(e);let c,f;if(n){const{root:p,blocks:m}=await n.bulk(i);c=await p.block,f=p;for await(const w of m)await a(w.cid,w.bytes);await a(c.cid,c.bytes)}else for await(const p of await q6({get:u,list:i,...sm})){const m=await p.block;await a(m.cid,m.bytes),c=m,f=p}return{dbIndex:f,root:c}}async function nI(e,t,n,i){if(!n){const a=t&&t.cid;if(!a)return{result:[]};const{getBlock:u}=Ld(e);n=await TE({cid:a,get:u,...sm})}if(i.range){const a=i.range.map(u=>Ei.encode(u));return n.range(...a)}else if(i.key){const a=Ei.encode(i.key);return console.log("getting key",a),n.get(a)}}var as,ed,td,LE;class rI{constructor(t,n){Ze(this,td);Ze(this,as,new Map);Ze(this,ed,null);this.database=t,bn(this,ed,t.registerListener(i=>Ot(this,td,LE).call(this,i))),this.routingFn=n||function(i,a){a("*")},this.dbHead=null}on(t,n,i){const a=jp(te(this,as),t);return a.push(n),typeof i<"u"&&this.database.changesSince(i).then(({rows:u})=>{const c=Y0(u,this.routingFn).get(t);c&&c.forEach(f=>n(f))}),()=>{const u=a.indexOf(n);u>-1&&a.splice(u,1)}}}as=new WeakMap,ed=new WeakMap,td=new WeakSet,LE=function(t){if(Array.isArray(t)){const n=Y0(t,this.routingFn);for(const[i,a]of n)jp(te(this,as),i).forEach(c=>a.forEach(f=>c(f)))}else if(t.reset)for(const[,n]of te(this,as))n.forEach(i=>i(t))};function jp(e,t){let n=e.get(t);return n||(n=[],e.set(t,n)),n}const iI=({key:e,value:t})=>({_id:e,...t}),Y0=(e,t)=>{const n=new Map;return e.forEach(({key:i,value:a,del:u})=>{(u||!a)&&(a={_deleted:!0}),t(iI({key:i,value:a}),c=>{jp(n,c).push(i)})}),n},am=J.createContext({addSubscriber:()=>{},database:null,ready:!1}),X0=new Map,Mn=ac.storage(),oI=new rI(Mn);function sI(e,t){const[n,i]=J.useState(!1);e=e||(()=>{}),t=t||(()=>{}),n||e(Mn);const a=(c,f)=>{X0.set(c,f)},u=async()=>{xh("fireproof",JSON.stringify(Mn));for(const[,c]of X0)c()};return J.useEffect(()=>{(async()=>{if(n)return;const f=uI("fireproof");if(f){const{clock:p}=JSON.parse(f);console.log("Loading previous database clock. (localStorage.removeItem('fireproof') to reset)"),await Mn.setClock(p);try{if((await Mn.changesSince()).rows.length<2)throw console.log("Resetting database"),new Error("Resetting database")}catch(m){console.error(`Error loading previous database clock. ${f} Resetting.`,m),await Mn.setClock([]),await t(Mn),xh("fireproof",JSON.stringify(Mn))}}else await t(Mn),xh("fireproof",JSON.stringify(Mn));i(!0),oI.on("*",lI("*",u,250))})()},[n]),{addSubscriber:a,database:Mn,ready:n}}const Zu=new Map,aI=(e,t,n)=>(Zu.has(e)||Zu.set(e,t().finally(()=>setTimeout(()=>Zu.delete(e),n))),Zu.get(e)),lI=(e,t,n)=>()=>aI(e,t,n);let lm=!1;try{lm=window.localStorage&&!0}catch{}function uI(e){if(lm)return localStorage&&localStorage.getItem(e)}function xh(e,t){if(lm)return localStorage&&localStorage.setItem(e,t)}function um({ready:e,database:t}){return{fetchAllLists:async()=>(e&&t.allLists?await t.allLists.query({range:["list","listx"]}):{rows:[]}).rows.map(({value:E})=>E),fetchListWithTodos:async w=>{if(!e||!t.todosByList)return Promise.resolve({list:{title:"",type:"list",_id:""},todos:[]});const E=await t.get(w),S=await t.todosByList.query({range:[[w,"0"],[w,"9"]]});return{list:E,todos:S.rows.map(k=>k.value)}},addList:async w=>e&&await t.put({title:w,type:"list"}),addTodo:async(w,E)=>e&&await t.put({completed:!1,title:E,listId:w,type:"todo",createdAt:new Date().toISOString()}),toggle:async({completed:w,...E})=>e&&await t.put({completed:!w,...E}),destroy:async({_id:w})=>e&&await t.del(w),updateTitle:async(w,E)=>(w.title=E,e&&await t.put(w)),clearCompleted:async w=>{const k=(e&&await t.todosByList.query({range:[[w,"1"],[w,"x"]]})).rows.map(N=>N.value).filter(N=>N.completed);for(const N of k)await t.del(N._id)}}}function cI(e){return function(){let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}const e1=cI(1);async function dI(e){const t=(u="")=>u+e1().toString(32).slice(2),n=["Building Apps","Having Fun","Getting Groceries"],i=[["In the browser","On the phone","With or without Redux","Login components","GraphQL queries","Automatic replication and versioning"],["Rollerskating meetup","Motorcycle ride","Write a sci-fi story with ChatGPT"],["Macadamia nut milk","Avocado toast","Coffee","Bacon","Sourdough bread","Fruit salad"]];let a;for(let u=0;u<3;u++){a=await e.put({title:n[u],type:"list",_id:t(""+u)});for(let c=0;c<i[u].length;c++)await e.put({_id:t(),title:i[u][c],listId:a.id,completed:e1()>.75,type:"todo",createdAt:"2"+c})}}const fI=e=>oe("header",{className:"app-header",children:oe("div",{className:"app-title-wrapper",children:oe("div",{className:"app-title-wrapper",children:oe("div",{className:"app-left-nav",children:oe("div",{className:"app-title-text",children:oe("h1",{className:"app-title",children:"TodoMVC"})})})})})});let Up=!1;try{Up=window.localStorage&&!0}catch{}const t1="#*#*#*#*#*STRINGARRAYSERIALIZER#*#*#*#*#*",hI={stateObserver:yI,localStorageName:void 0,controlled:!1};function pI(e,t){const{stateObserver:n,localStorageName:i,controlled:a}=t||hI;let u=e;if(Up&&typeof i=="string"){let w=localStorage.getItem(i);w&&(typeof e=="number"?u=Number(w):Array.isArray(w)?u=w.split(t1):u=w,n&&n(u))}let[c,f]=J.useState(u);const p=w=>{if(w.target.type==="checkbox")throw new Error("useInput error - type=checkbox specified, this is likely a mistake by the developer. you may want useCheckInput instead");let E=typeof e=="number"?Number(w.target.value):w.target.value;f(E),Up&&typeof i=="string"&&(E!==e?localStorage.setItem(i,String(Array.isArray(E)?E.join(t1):E)):localStorage.removeItem(i)),n&&n(E)},m=()=>f(e);return a?{onChange:p,value:c,setValue:f,resetValue:m}:{onChange:p,value:c}}function yI(){}function cm({onSubmit:e,placeholder:t,autoFocus:n=!0}){const{setValue:i,resetValue:a,...u}=pI("",{controlled:!0});return n&&(u.autoFocus=!0),oe("input",{className:"new-todo",placeholder:t,onKeyDown:f=>{if(f.keyCode!==13)return;f.preventDefault();const p=f.target.value.trim();p&&(e(p),i(""))},...u})}var Gc={},mI={get exports(){return Gc},set exports(e){Gc=e}};function gI(){}function wI(e,t){if(e===t)return!0;if(!e||!t||typeof e!="object"||typeof t!="object")return!1;const n=Object.keys(e),i=Object.keys(t),{length:a}=n;if(i.length!==a)return!1;for(const u of n)if(e[u]!==t[u])return!1;return!0}function vI(e,t){if(bI(e)){const n=kI(t)?t():t;return e(n)}return e}function bI(e){return typeof e=="function"}function kI(e){return typeof e=="function"}function OE(e){return typeof e=="object"&&e!=null}function EI(e){return Array.isArray(e)?!e.length:OE(e)?!Object.keys(e).length:e==null||e===""}function xI(e){return Boolean(e&&"then"in e&&typeof e.then=="function")}function SI(e){return typeof e=="number"?Math.floor(e)===e:String(Math.floor(Number(e)))===e}function _I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function CI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(const i of t)typeof i=="function"&&i(...arguments)}}function NI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")||void 0}function AI(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function TI(e){if(window.queueMicrotask)return window.queueMicrotask(e);Promise.resolve().then(e)}const II=Object.freeze(Object.defineProperty({__proto__:null,applyState:vI,chain:CI,cx:NI,hasOwnProperty:_I,isEmpty:EI,isInteger:SI,isObject:OE,isPromise:xI,noop:gI,normalizeString:AI,queueMicrotask:TI,shallowEqual:wI},Symbol.toStringTag,{value:"Module"})),LI=BC(II);/**
 * react-keyring
 *
 * Copyright (c) Web3.Storage
 *
 * This source code is licensed under Apache-2.0 OR MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license Apache-2.0 OR MIT
 */(function(e,t){(function(n,i){i(t,J,LI)})(Su,function(n,i){var br,Yr,Ye,ra,zp,ia,Fp,oa,sa,Xr,kr,aa,To,lc;function a(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var u=a(i),c=0;function f(o){return"__private_"+c+++"_"+o}function p(o,r){if(!Object.prototype.hasOwnProperty.call(o,r))throw new TypeError("attempted to use private field on non-instance");return o}const m=o=>{if(o instanceof Uint8Array&&o.constructor.name==="Uint8Array")return o;if(o instanceof ArrayBuffer)return new Uint8Array(o);if(ArrayBuffer.isView(o))return new Uint8Array(o.buffer,o.byteOffset,o.byteLength);throw new Error("Unknown type, must be binary type")};var w=function o(r,s,l){s=s||[];for(var d=l=l||0;r>=E;)s[l++]=255&r|128,r/=128;for(;-128&r;)s[l++]=255&r|128,r>>>=7;return s[l]=0|r,o.bytes=l-d+1,s},E=Math.pow(2,31),S=function o(r,s){var l,d=0,h=0,y=s=s||0,g=r.length;do{if(y>=g)throw o.bytes=0,new RangeError("Could not decode varint");l=r[y++],d+=h<28?(127&l)<<h:(127&l)*Math.pow(2,h),h+=7}while(l>=128);return o.bytes=y-s,d},k=Math.pow(2,7),N=Math.pow(2,14),T=Math.pow(2,21),O=Math.pow(2,28),x=Math.pow(2,35),v=Math.pow(2,42),C=Math.pow(2,49),L=Math.pow(2,56),$=Math.pow(2,63),V={encode:w,decode:S,encodingLength:function(o){return o<k?1:o<N?2:o<T?3:o<O?4:o<x?5:o<v?6:o<C?7:o<L?8:o<$?9:10}};const W=(o,r=0)=>[V.decode(o,r),V.decode.bytes],F=(o,r,s=0)=>(V.encode(o,r,s),r),Y=o=>V.encodingLength(o),ue=(o,r)=>{const s=r.byteLength,l=Y(o),d=l+Y(s),h=new Uint8Array(d+s);return F(o,h,0),F(s,h,l),h.set(r,d),new tt(o,s,r,h)},$e=o=>{const r=m(o),[s,l]=W(r),[d,h]=W(r.subarray(l)),y=r.subarray(l+h);if(y.byteLength!==d)throw new Error("Incorrect length");return new tt(s,d,y,r)};class tt{constructor(r,s,l,d){this.code=r,this.size=s,this.digest=l,this.bytes=d}}const be=({name:o,code:r,encode:s})=>new fe(o,r,s);class fe{constructor(r,s,l){this.name=r,this.code=s,this.encode=l}digest(r){if(r instanceof Uint8Array){const s=this.encode(r);return s instanceof Uint8Array?ue(this.code,s):s.then(l=>ue(this.code,l))}throw Error("Unknown type, must be binary type")}}const _e=o=>async r=>new Uint8Array(await crypto.subtle.digest(o,r)),Ee=be({name:"sha2-256",code:18,encode:_e("SHA-256")});class Ne{constructor(r){this.id=r.id,this.options=r,this.encoder=r.encoder,this.decoder=r.decoder,this.channel=r.channel,this.hasher=r.hasher||Ee}execute(...r){return H(r,this)}}const H=async(o,r)=>{const s=await r.encoder.encode(o,r),l=await r.channel.request(s);return await r.decoder.decode(l)},de=["string","number","bigint","symbol"],me=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Pe(o){if(o===null)return"null";if(o===void 0)return"undefined";if(o===!0||o===!1)return"boolean";const r=typeof o;return de.includes(r)?r:r==="function"?"Function":Array.isArray(o)?"Array":function(l){return l&&l.constructor&&l.constructor.isBuffer&&l.constructor.isBuffer.call(null,l)}(o)?"Buffer":function(l){const d=Object.prototype.toString.call(l).slice(8,-1);if(me.includes(d))return d}(o)||"Object"}class A{constructor(r,s,l){this.major=r,this.majorEncoded=r<<5,this.name=s,this.terminal=l}toString(){return`Type[${this.major}].${this.name}`}compare(r){return this.major<r.major?-1:this.major>r.major?1:0}}A.uint=new A(0,"uint",!0),A.negint=new A(1,"negint",!0),A.bytes=new A(2,"bytes",!0),A.string=new A(3,"string",!0),A.array=new A(4,"array",!1),A.map=new A(5,"map",!1),A.tag=new A(6,"tag",!1),A.float=new A(7,"float",!0),A.false=new A(7,"false",!0),A.true=new A(7,"true",!0),A.null=new A(7,"null",!0),A.undefined=new A(7,"undefined",!0),A.break=new A(7,"break",!0);class U{constructor(r,s,l){this.type=r,this.value=s,this.encodedLength=l,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const St=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Ni=new TextDecoder,Tn=new TextEncoder;function In(o){return St&&globalThis.Buffer.isBuffer(o)}function cr(o){return o instanceof Uint8Array?In(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):o:Uint8Array.from(o)}const bl=St?(o,r,s)=>s-r>64?globalThis.Buffer.from(o.subarray(r,s)).toString("utf8"):Ss(o,r,s):(o,r,s)=>s-r>64?Ni.decode(o.subarray(r,s)):Ss(o,r,s),co=St?o=>o.length>64?globalThis.Buffer.from(o):El(o):o=>o.length>64?Tn.encode(o):El(o),an=o=>Uint8Array.from(o),Ai=St?(o,r,s)=>In(o)?new Uint8Array(o.subarray(r,s)):o.slice(r,s):(o,r,s)=>o.slice(r,s),fo=St?(o,r)=>(o=o.map(s=>s instanceof Uint8Array?s:globalThis.Buffer.from(s)),cr(globalThis.Buffer.concat(o,r))):(o,r)=>{const s=new Uint8Array(r);let l=0;for(let d of o)l+d.length>s.length&&(d=d.subarray(0,s.length-l)),s.set(d,l),l+=d.length;return s},kl=St?o=>globalThis.Buffer.allocUnsafe(o):o=>new Uint8Array(o);function El(o,r=1/0){let s;const l=o.length;let d=null;const h=[];for(let y=0;y<l;++y){if(s=o.charCodeAt(y),s>55295&&s<57344){if(!d){if(s>56319){(r-=3)>-1&&h.push(239,191,189);continue}if(y+1===l){(r-=3)>-1&&h.push(239,191,189);continue}d=s;continue}if(s<56320){(r-=3)>-1&&h.push(239,191,189),d=s;continue}s=65536+(d-55296<<10|s-56320)}else d&&(r-=3)>-1&&h.push(239,191,189);if(d=null,s<128){if((r-=1)<0)break;h.push(s)}else if(s<2048){if((r-=2)<0)break;h.push(s>>6|192,63&s|128)}else if(s<65536){if((r-=3)<0)break;h.push(s>>12|224,s>>6&63|128,63&s|128)}else{if(!(s<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;h.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}}return h}function Ss(o,r,s){const l=[];for(;r<s;){const d=o[r];let h=null,y=d>239?4:d>223?3:d>191?2:1;if(r+y<=s){let g,b,_,I;switch(y){case 1:d<128&&(h=d);break;case 2:g=o[r+1],(192&g)==128&&(I=(31&d)<<6|63&g,I>127&&(h=I));break;case 3:g=o[r+1],b=o[r+2],(192&g)==128&&(192&b)==128&&(I=(15&d)<<12|(63&g)<<6|63&b,I>2047&&(I<55296||I>57343)&&(h=I));break;case 4:g=o[r+1],b=o[r+2],_=o[r+3],(192&g)==128&&(192&b)==128&&(192&_)==128&&(I=(15&d)<<18|(63&g)<<12|(63&b)<<6|63&_,I>65535&&I<1114112&&(h=I))}}h===null?(h=65533,y=1):h>65535&&(h-=65536,l.push(h>>>10&1023|55296),h=56320|1023&h),l.push(h),r+=y}return xl(l)}function xl(o){const r=o.length;if(r<=4096)return String.fromCharCode.apply(String,o);let s="",l=0;for(;l<r;)s+=String.fromCharCode.apply(String,o.slice(l,l+=4096));return s}class zr{constructor(r=256){this.chunkSize=r,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(r){let s=this.chunks[this.chunks.length-1];if(this.cursor+r.length<=this.maxCursor+1){const l=s.length-(this.maxCursor-this.cursor)-1;s.set(r,l)}else{if(s){const l=s.length-(this.maxCursor-this.cursor)-1;l<s.length&&(this.chunks[this.chunks.length-1]=s.subarray(0,l),this.maxCursor=this.cursor-1)}r.length<64&&r.length<this.chunkSize?(s=kl(this.chunkSize),this.chunks.push(s),this.maxCursor+=s.length,this._initReuseChunk===null&&(this._initReuseChunk=s),s.set(r,0)):(this.chunks.push(r),this.maxCursor+=r.length)}this.cursor+=r.length}toBytes(r=!1){let s;if(this.chunks.length===1){const l=this.chunks[0];r&&this.cursor>l.length/2?(s=this.cursor===l.length?l:l.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):s=Ai(l,0,this.cursor)}else s=fo(this.chunks,this.cursor);return r&&this.reset(),s}}const ce="CBOR decode error:",Hn="CBOR encode error:";function Kn(o,r,s){if(o.length-r<s)throw new Error(`${ce} not enough data for type`)}const gt=[24,256,65536,4294967296,BigInt("18446744073709551616")];function dr(o,r,s){Kn(o,r,1);const l=o[r];if(s.strict===!0&&l<gt[0])throw new Error(`${ce} integer encoded in more bytes than necessary (strict decode)`);return l}function Gn(o,r,s){Kn(o,r,2);const l=o[r]<<8|o[r+1];if(s.strict===!0&&l<gt[1])throw new Error(`${ce} integer encoded in more bytes than necessary (strict decode)`);return l}function fr(o,r,s){Kn(o,r,4);const l=16777216*o[r]+(o[r+1]<<16)+(o[r+2]<<8)+o[r+3];if(s.strict===!0&&l<gt[2])throw new Error(`${ce} integer encoded in more bytes than necessary (strict decode)`);return l}function R(o,r,s){Kn(o,r,8);const l=16777216*o[r]+(o[r+1]<<16)+(o[r+2]<<8)+o[r+3],d=16777216*o[r+4]+(o[r+5]<<16)+(o[r+6]<<8)+o[r+7],h=(BigInt(l)<<BigInt(32))+BigInt(d);if(s.strict===!0&&h<gt[3])throw new Error(`${ce} integer encoded in more bytes than necessary (strict decode)`);if(h<=Number.MAX_SAFE_INTEGER)return Number(h);if(s.allowBigInt===!0)return h;throw new Error(`${ce} integers outside of the safe integer range are not supported`)}function D(o,r){return j(o,0,r.value)}function j(o,r,s){if(s<gt[0]){const l=Number(s);o.push([r|l])}else if(s<gt[1]){const l=Number(s);o.push([24|r,l])}else if(s<gt[2]){const l=Number(s);o.push([25|r,l>>>8,255&l])}else if(s<gt[3]){const l=Number(s);o.push([26|r,l>>>24&255,l>>>16&255,l>>>8&255,255&l])}else{const l=BigInt(s);if(!(l<gt[4]))throw new Error(`${ce} encountered BigInt larger than allowable range`);{const d=[27|r,0,0,0,0,0,0,0];let h=Number(l&BigInt(4294967295)),y=Number(l>>BigInt(32)&BigInt(4294967295));d[8]=255&h,h>>=8,d[7]=255&h,h>>=8,d[6]=255&h,h>>=8,d[5]=255&h,d[4]=255&y,y>>=8,d[3]=255&y,y>>=8,d[2]=255&y,y>>=8,d[1]=255&y,o.push(d)}}}D.encodedSize=function(o){return j.encodedSize(o.value)},j.encodedSize=function(o){return o<gt[0]?1:o<gt[1]?2:o<gt[2]?3:o<gt[3]?5:9},D.compareTokens=function(o,r){return o.value<r.value?-1:o.value>r.value?1:0};const re=BigInt(-1),ae=BigInt(1);function ge(o,r){const s=r.value,l=typeof s=="bigint"?s*re-ae:-1*s-1;j(o,r.type.majorEncoded,l)}function he(o,r,s,l){Kn(o,r,s+l);const d=Ai(o,r+s,r+s+l);return new U(A.bytes,d,s+l)}function xe(o,r,s,l){return he(o,r,1,s)}function ie(o){return o.encodedBytes===void 0&&(o.encodedBytes=o.type===A.string?co(o.value):o.value),o.encodedBytes}function ct(o,r){const s=ie(r);j(o,r.type.majorEncoded,s.length),o.push(s)}function Te(o,r,s,l,d){const h=s+l;Kn(o,r,h);const y=new U(A.string,bl(o,r+s,r+h),h);return d.retainStringBytes===!0&&(y.byteValue=Ai(o,r+s,r+h)),y}function _t(o,r,s,l){return Te(o,r,1,s,l)}ge.encodedSize=function(o){const r=o.value,s=typeof r=="bigint"?r*re-ae:-1*r-1;return s<gt[0]?1:s<gt[1]?2:s<gt[2]?3:s<gt[3]?5:9},ge.compareTokens=function(o,r){return o.value<r.value?1:o.value>r.value?-1:0},ct.encodedSize=function(o){const r=ie(o);return j.encodedSize(r.length)+r.length},ct.compareTokens=function(o,r){return s=ie(o),l=ie(r),s.length<l.length?-1:s.length>l.length?1:function(d,h){if(In(d)&&In(h))return d.compare(h);for(let y=0;y<d.length;y++)if(d[y]!==h[y])return d[y]<h[y]?-1:1;return 0}(s,l);var s,l};const ot=ct;function Ct(o,r,s,l){return new U(A.array,l,s)}function ln(o,r,s,l){return Ct(0,0,1,s)}function hr(o,r){j(o,A.array.majorEncoded,r.value)}function Ln(o,r,s,l){return new U(A.map,l,s)}function ho(o,r,s,l){return Ln(0,0,1,s)}function Qn(o,r){j(o,A.map.majorEncoded,r.value)}function _s(o,r,s,l){return new U(A.tag,s,1)}function ht(o,r){j(o,A.tag.majorEncoded,r.value)}hr.compareTokens=D.compareTokens,hr.encodedSize=function(o){return j.encodedSize(o.value)},Qn.compareTokens=D.compareTokens,Qn.encodedSize=function(o){return j.encodedSize(o.value)},ht.compareTokens=D.compareTokens,ht.encodedSize=function(o){return j.encodedSize(o.value)};function Jt(o,r,s){if(s){if(s.allowNaN===!1&&Number.isNaN(o))throw new Error(`${ce} NaN values are not supported`);if(s.allowInfinity===!1&&(o===1/0||o===-1/0))throw new Error(`${ce} Infinity values are not supported`)}return new U(A.float,o,r)}function On(o,r,s){const l=r.value;if(l===!1)o.push([20|A.float.majorEncoded]);else if(l===!0)o.push([21|A.float.majorEncoded]);else if(l===null)o.push([22|A.float.majorEncoded]);else if(l===void 0)o.push([23|A.float.majorEncoded]);else{let h,y=!1;s&&s.float64===!0||(Sl(l),h=cn(un,1),l===h||Number.isNaN(l)?(un[0]=249,o.push(un.slice(0,3)),y=!0):(po(l),h=yo(un,1),l===h&&(un[0]=250,o.push(un.slice(0,5)),y=!0))),y||(d=l,Mt.setFloat64(0,d,!1),h=_l(un,1),un[0]=251,o.push(un.slice(0,9)))}var d}On.encodedSize=function(o,r){const s=o.value;if(s===!1||s===!0||s==null)return 1;if(!r||r.float64!==!0){Sl(s);let l=cn(un,1);if(s===l||Number.isNaN(s))return 3;if(po(s),l=yo(un,1),s===l)return 5}return 9};const Ti=new ArrayBuffer(9),Mt=new DataView(Ti,1),un=new Uint8Array(Ti,0);function Sl(o){if(o===1/0)Mt.setUint16(0,31744,!1);else if(o===-1/0)Mt.setUint16(0,64512,!1);else if(Number.isNaN(o))Mt.setUint16(0,32256,!1);else{Mt.setFloat32(0,o);const r=Mt.getUint32(0),s=(2139095040&r)>>23,l=8388607&r;if(s===255)Mt.setUint16(0,31744,!1);else if(s===0)Mt.setUint16(0,(2147483648&o)>>16|l>>13,!1);else{const d=s-127;d<-24?Mt.setUint16(0,0):d<-14?Mt.setUint16(0,(2147483648&r)>>16|1<<24+d,!1):Mt.setUint16(0,(2147483648&r)>>16|d+15<<10|l>>13,!1)}}}function cn(o,r){if(o.length-r<2)throw new Error(`${ce} not enough data for float16`);const s=(o[r]<<8)+o[r+1];if(s===31744)return 1/0;if(s===64512)return-1/0;if(s===32256)return NaN;const l=s>>10&31,d=1023&s;let h;return h=l===0?d*2**-24:l!==31?(d+1024)*2**(l-25):d===0?1/0:NaN,32768&s?-h:h}function po(o){Mt.setFloat32(0,o,!1)}function yo(o,r){if(o.length-r<4)throw new Error(`${ce} not enough data for float32`);const s=(o.byteOffset||0)+r;return new DataView(o.buffer,s,4).getFloat32(0,!1)}function _l(o,r){if(o.length-r<8)throw new Error(`${ce} not enough data for float64`);const s=(o.byteOffset||0)+r;return new DataView(o.buffer,s,8).getFloat64(0,!1)}function je(o,r,s){throw new Error(`${ce} encountered invalid minor (${s}) for major ${o[r]>>>5}`)}function Cl(o){return()=>{throw new Error(`${ce} ${o}`)}}On.compareTokens=D.compareTokens;const G=[];for(let o=0;o<=23;o++)G[o]=je;G[24]=function(o,r,s,l){return new U(A.uint,dr(o,r+1,l),2)},G[25]=function(o,r,s,l){return new U(A.uint,Gn(o,r+1,l),3)},G[26]=function(o,r,s,l){return new U(A.uint,fr(o,r+1,l),5)},G[27]=function(o,r,s,l){return new U(A.uint,R(o,r+1,l),9)},G[28]=je,G[29]=je,G[30]=je,G[31]=je;for(let o=32;o<=55;o++)G[o]=je;G[56]=function(o,r,s,l){return new U(A.negint,-1-dr(o,r+1,l),2)},G[57]=function(o,r,s,l){return new U(A.negint,-1-Gn(o,r+1,l),3)},G[58]=function(o,r,s,l){return new U(A.negint,-1-fr(o,r+1,l),5)},G[59]=function(o,r,s,l){const d=R(o,r+1,l);if(typeof d!="bigint"){const h=-1-d;if(h>=Number.MIN_SAFE_INTEGER)return new U(A.negint,h,9)}if(l.allowBigInt!==!0)throw new Error(`${ce} integers outside of the safe integer range are not supported`);return new U(A.negint,re-BigInt(d),9)},G[60]=je,G[61]=je,G[62]=je,G[63]=je;for(let o=64;o<=87;o++)G[o]=xe;G[88]=function(o,r,s,l){return he(o,r,2,dr(o,r+1,l))},G[89]=function(o,r,s,l){return he(o,r,3,Gn(o,r+1,l))},G[90]=function(o,r,s,l){return he(o,r,5,fr(o,r+1,l))},G[91]=function(o,r,s,l){const d=R(o,r+1,l);if(typeof d=="bigint")throw new Error(`${ce} 64-bit integer bytes lengths not supported`);return he(o,r,9,d)},G[92]=je,G[93]=je,G[94]=je,G[95]=Cl("indefinite length bytes/strings are not supported");for(let o=96;o<=119;o++)G[o]=_t;G[120]=function(o,r,s,l){return Te(o,r,2,dr(o,r+1,l),l)},G[121]=function(o,r,s,l){return Te(o,r,3,Gn(o,r+1,l),l)},G[122]=function(o,r,s,l){return Te(o,r,5,fr(o,r+1,l),l)},G[123]=function(o,r,s,l){const d=R(o,r+1,l);if(typeof d=="bigint")throw new Error(`${ce} 64-bit integer string lengths not supported`);return Te(o,r,9,d,l)},G[124]=je,G[125]=je,G[126]=je,G[127]=Cl("indefinite length bytes/strings are not supported");for(let o=128;o<=151;o++)G[o]=ln;G[152]=function(o,r,s,l){return Ct(0,0,2,dr(o,r+1,l))},G[153]=function(o,r,s,l){return Ct(0,0,3,Gn(o,r+1,l))},G[154]=function(o,r,s,l){return Ct(0,0,5,fr(o,r+1,l))},G[155]=function(o,r,s,l){const d=R(o,r+1,l);if(typeof d=="bigint")throw new Error(`${ce} 64-bit integer array lengths not supported`);return Ct(0,0,9,d)},G[156]=je,G[157]=je,G[158]=je,G[159]=function(o,r,s,l){if(l.allowIndefinite===!1)throw new Error(`${ce} indefinite length items not allowed`);return Ct(0,0,1,1/0)};for(let o=160;o<=183;o++)G[o]=ho;G[184]=function(o,r,s,l){return Ln(0,0,2,dr(o,r+1,l))},G[185]=function(o,r,s,l){return Ln(0,0,3,Gn(o,r+1,l))},G[186]=function(o,r,s,l){return Ln(0,0,5,fr(o,r+1,l))},G[187]=function(o,r,s,l){const d=R(o,r+1,l);if(typeof d=="bigint")throw new Error(`${ce} 64-bit integer map lengths not supported`);return Ln(0,0,9,d)},G[188]=je,G[189]=je,G[190]=je,G[191]=function(o,r,s,l){if(l.allowIndefinite===!1)throw new Error(`${ce} indefinite length items not allowed`);return Ln(0,0,1,1/0)};for(let o=192;o<=215;o++)G[o]=_s;G[216]=function(o,r,s,l){return new U(A.tag,dr(o,r+1,l),2)},G[217]=function(o,r,s,l){return new U(A.tag,Gn(o,r+1,l),3)},G[218]=function(o,r,s,l){return new U(A.tag,fr(o,r+1,l),5)},G[219]=function(o,r,s,l){return new U(A.tag,R(o,r+1,l),9)},G[220]=je,G[221]=je,G[222]=je,G[223]=je;for(let o=224;o<=243;o++)G[o]=Cl("simple values are not supported");G[244]=je,G[245]=je,G[246]=je,G[247]=function(o,r,s,l){if(l.allowUndefined===!1)throw new Error(`${ce} undefined values are not supported`);return l.coerceUndefinedToNull===!0?new U(A.null,null,1):new U(A.undefined,void 0,1)},G[248]=Cl("simple values are not supported"),G[249]=function(o,r,s,l){return Jt(cn(o,r+1),3,l)},G[250]=function(o,r,s,l){return Jt(yo(o,r+1),5,l)},G[251]=function(o,r,s,l){return Jt(_l(o,r+1),9,l)},G[252]=je,G[253]=je,G[254]=je,G[255]=function(o,r,s,l){if(l.allowIndefinite===!1)throw new Error(`${ce} indefinite length items not allowed`);return new U(A.break,void 0,1)};const qn=[];for(let o=0;o<24;o++)qn[o]=new U(A.uint,o,1);for(let o=-1;o>=-24;o--)qn[31-o]=new U(A.negint,o,1);function dm(o){switch(o.type){case A.false:return an([244]);case A.true:return an([245]);case A.null:return an([246]);case A.bytes:return o.value.length?void 0:an([64]);case A.string:return o.value===""?an([96]):void 0;case A.array:return o.value===0?an([128]):void 0;case A.map:return o.value===0?an([160]):void 0;case A.uint:return o.value<24?an([Number(o.value)]):void 0;case A.negint:if(o.value>=-24)return an([31-Number(o.value)])}}qn[64]=new U(A.bytes,new Uint8Array(0),1),qn[96]=new U(A.string,"",1),qn[128]=new U(A.array,0,1),qn[160]=new U(A.map,0,1),qn[244]=new U(A.false,!1,1),qn[245]=new U(A.true,!0,1),qn[246]=new U(A.null,null,1);const RE={float64:!1,mapSorter:function(o,r){const s=Array.isArray(o[0])?o[0][0]:o[0],l=Array.isArray(r[0])?r[0][0]:r[0];if(s.type!==l.type)return s.type.compare(l.type);const d=s.type.major,h=hm[d].compareTokens(s,l);return h===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),h},quickEncodeToken:dm};function fm(){const o=[];return o[A.uint.major]=D,o[A.negint.major]=ge,o[A.bytes.major]=ct,o[A.string.major]=ot,o[A.array.major]=hr,o[A.map.major]=Qn,o[A.tag.major]=ht,o[A.float.major]=On,o}const hm=fm(),Od=new zr;class Nl{constructor(r,s){this.obj=r,this.parent=s}includes(r){let s=this;do if(s.obj===r)return!0;while(s=s.parent);return!1}static createCheck(r,s){if(r&&r.includes(s))throw new Error(`${Hn} object contains circular references`);return new Nl(s,r)}}const Fr={null:new U(A.null,null),undefined:new U(A.undefined,void 0),true:new U(A.true,!0),false:new U(A.false,!1),emptyArray:new U(A.array,0),emptyMap:new U(A.map,0)},Vr={number:(o,r,s,l)=>Number.isInteger(o)&&Number.isSafeInteger(o)?new U(o>=0?A.uint:A.negint,o):new U(A.float,o),bigint:(o,r,s,l)=>o>=BigInt(0)?new U(A.uint,o):new U(A.negint,o),Uint8Array:(o,r,s,l)=>new U(A.bytes,o),string:(o,r,s,l)=>new U(A.string,o),boolean:(o,r,s,l)=>o?Fr.true:Fr.false,null:(o,r,s,l)=>Fr.null,undefined:(o,r,s,l)=>Fr.undefined,ArrayBuffer:(o,r,s,l)=>new U(A.bytes,new Uint8Array(o)),DataView:(o,r,s,l)=>new U(A.bytes,new Uint8Array(o.buffer,o.byteOffset,o.byteLength)),Array(o,r,s,l){if(!o.length)return s.addBreakTokens===!0?[Fr.emptyArray,new U(A.break)]:Fr.emptyArray;l=Nl.createCheck(l,o);const d=[];let h=0;for(const y of o)d[h++]=Al(y,s,l);return s.addBreakTokens?[new U(A.array,o.length),d,new U(A.break)]:[new U(A.array,o.length),d]},Object(o,r,s,l){const d=r!=="Object",h=d?o.keys():Object.keys(o),y=d?o.size:h.length;if(!y)return s.addBreakTokens===!0?[Fr.emptyMap,new U(A.break)]:Fr.emptyMap;l=Nl.createCheck(l,o);const g=[];let b=0;for(const _ of h)g[b++]=[Al(_,s,l),Al(d?o.get(_):o[_],s,l)];return function(_,I){I.mapSorter&&_.sort(I.mapSorter)}(g,s),s.addBreakTokens?[new U(A.map,y),g,new U(A.break)]:[new U(A.map,y),g]}};Vr.Map=Vr.Object,Vr.Buffer=Vr.Uint8Array;for(const o of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Vr[`${o}Array`]=Vr.DataView;function Al(o,r={},s){const l=Pe(o),d=r&&r.typeEncoders&&r.typeEncoders[l]||Vr[l];if(typeof d=="function"){const y=d(o,l,r,s);if(y!=null)return y}const h=Vr[l];if(!h)throw new Error(`${Hn} unsupported type: ${l}`);return h(o,l,r,s)}function pm(o,r,s,l){if(Array.isArray(r))for(const d of r)pm(o,d,s,l);else s[r.type.major](o,r,l)}function ym(o,r,s){const l=Al(o,s);if(!Array.isArray(l)&&s.quickEncodeToken){const d=s.quickEncodeToken(l);if(d)return d;const h=r[l.type.major];if(h.encodedSize){const y=h.encodedSize(l,s),g=new zr(y);if(h(g,l,s),g.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${l} was wrong`);return cr(g.chunks[0])}}return Od.reset(),pm(Od,l,r,s),Od.toBytes(!0)}const $E={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class DE{constructor(r,s={}){this.pos=0,this.data=r,this.options=s}done(){return this.pos>=this.data.length}next(){const r=this.data[this.pos];let s=qn[r];if(s===void 0){const l=G[r];if(!l)throw new Error(`${ce} no decoder for major type ${r>>>5} (byte 0x${r.toString(16).padStart(2,"0")})`);const d=31&r;s=l(this.data,this.pos,d,this.options)}return this.pos+=s.encodedLength,s}}const Cs=Symbol.for("DONE"),Tl=Symbol.for("BREAK");function Ns(o,r){if(o.done())return Cs;const s=o.next();if(s.type===A.break)return Tl;if(s.type.terminal)return s.value;if(s.type===A.array)return function(l,d,h){const y=[];for(let g=0;g<l.value;g++){const b=Ns(d,h);if(b===Tl){if(l.value===1/0)break;throw new Error(`${ce} got unexpected break to lengthed array`)}if(b===Cs)throw new Error(`${ce} found array but not enough entries (got ${g}, expected ${l.value})`);y[g]=b}return y}(s,o,r);if(s.type===A.map)return function(l,d,h){const y=h.useMaps===!0,g=y?void 0:{},b=y?new Map:void 0;for(let _=0;_<l.value;_++){const I=Ns(d,h);if(I===Tl){if(l.value===1/0)break;throw new Error(`${ce} got unexpected break to lengthed map`)}if(I===Cs)throw new Error(`${ce} found map but not enough entries (got ${_} [no key], expected ${l.value})`);if(y!==!0&&typeof I!="string")throw new Error(`${ce} non-string keys not supported (got ${typeof I})`);if(h.rejectDuplicateMapKeys===!0&&(y&&b.has(I)||!y&&I in g))throw new Error(`${ce} found repeat map key "${I}"`);const P=Ns(d,h);if(P===Cs)throw new Error(`${ce} found map but not enough entries (got ${_} [no value], expected ${l.value})`);y?b.set(I,P):g[I]=P}return y?b:g}(s,o,r);if(s.type===A.tag){if(r.tags&&typeof r.tags[s.value]=="function"){const l=Ns(o,r);return r.tags[s.value](l)}throw new Error(`${ce} tag not supported (${s.value})`)}throw new Error("unsupported")}function mm(o,r){if(!(o instanceof Uint8Array))throw new Error(`${ce} data to decode must be a Uint8Array`);const s=(r=Object.assign({},$E,r)).tokenizer||new DE(o,r),l=Ns(s,r);if(l===Cs)throw new Error(`${ce} did not find any content to decode`);if(l===Tl)throw new Error(`${ce} got unexpected break`);if(!s.done())throw new Error(`${ce} too many terminals, data makes no sense`);return l}var ME=function(o,r){if(o.length>=255)throw new TypeError("Alphabet too long");for(var s=new Uint8Array(256),l=0;l<s.length;l++)s[l]=255;for(var d=0;d<o.length;d++){var h=o.charAt(d),y=h.charCodeAt(0);if(s[y]!==255)throw new TypeError(h+" is ambiguous");s[y]=d}var g=o.length,b=o.charAt(0),_=Math.log(g)/Math.log(256),I=Math.log(256)/Math.log(g);function P(B){if(typeof B!="string")throw new TypeError("Expected String");if(B.length===0)return new Uint8Array;var q=0;if(B[q]!==" "){for(var se=0,ye=0;B[q]===b;)se++,q++;for(var Re=(B.length-q)*_+1>>>0,pe=new Uint8Array(Re);B[q];){var ke=s[B.charCodeAt(q)];if(ke===255)return;for(var We=0,qe=Re-1;(ke!==0||We<ye)&&qe!==-1;qe--,We++)ke+=g*pe[qe]>>>0,pe[qe]=ke%256>>>0,ke=ke/256>>>0;if(ke!==0)throw new Error("Non-zero carry");ye=We,q++}if(B[q]!==" "){for(var Qe=Re-ye;Qe!==Re&&pe[Qe]===0;)Qe++;for(var Yt=new Uint8Array(se+(Re-Qe)),Fi=se;Qe!==Re;)Yt[Fi++]=pe[Qe++];return Yt}}}return{encode:function(B){if(B instanceof Uint8Array||(ArrayBuffer.isView(B)?B=new Uint8Array(B.buffer,B.byteOffset,B.byteLength):Array.isArray(B)&&(B=Uint8Array.from(B))),!(B instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(B.length===0)return"";for(var q=0,se=0,ye=0,Re=B.length;ye!==Re&&B[ye]===0;)ye++,q++;for(var pe=(Re-ye)*I+1>>>0,ke=new Uint8Array(pe);ye!==Re;){for(var We=B[ye],qe=0,Qe=pe-1;(We!==0||qe<se)&&Qe!==-1;Qe--,qe++)We+=256*ke[Qe]>>>0,ke[Qe]=We%g>>>0,We=We/g>>>0;if(We!==0)throw new Error("Non-zero carry");se=qe,ye++}for(var Yt=pe-se;Yt!==pe&&ke[Yt]===0;)Yt++;for(var Fi=b.repeat(q);Yt<pe;++Yt)Fi+=o.charAt(ke[Yt]);return Fi},decodeUnsafe:P,decode:function(B){var q=P(B);if(q)return q;throw new Error(`Non-${r} character`)}}},BE=ME;class jE{constructor(r,s,l){this.name=r,this.prefix=s,this.baseEncode=l}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class UE{constructor(r,s,l){if(this.name=r,this.prefix=s,s.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=s.codePointAt(0),this.baseDecode=l}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(r){return gm(this,r)}}class zE{constructor(r){this.decoders=r}or(r){return gm(this,r)}decode(r){const s=r[0],l=this.decoders[s];if(l)return l.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const gm=(o,r)=>new zE({...o.decoders||{[o.prefix]:o},...r.decoders||{[r.prefix]:r}});class FE{constructor(r,s,l,d){this.name=r,this.prefix=s,this.baseEncode=l,this.baseDecode=d,this.encoder=new jE(r,s,l),this.decoder=new UE(r,s,d)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}const Il=({name:o,prefix:r,encode:s,decode:l})=>new FE(o,r,s,l),As=({prefix:o,name:r,alphabet:s})=>{const{encode:l,decode:d}=BE(s,r);return Il({prefix:o,name:r,encode:l,decode:h=>m(d(h))})},Nt=({name:o,prefix:r,bitsPerChar:s,alphabet:l})=>Il({prefix:r,name:o,encode:d=>((h,y,g)=>{const b=y[y.length-1]==="=",_=(1<<g)-1;let I="",P=0,B=0;for(let q=0;q<h.length;++q)for(B=B<<8|h[q],P+=8;P>g;)P-=g,I+=y[_&B>>P];if(P&&(I+=y[_&B<<g-P]),b)for(;I.length*g&7;)I+="=";return I})(d,l,s),decode:d=>((h,y,g,b)=>{const _={};for(let ye=0;ye<y.length;++ye)_[y[ye]]=ye;let I=h.length;for(;h[I-1]==="=";)--I;const P=new Uint8Array(I*g/8|0);let B=0,q=0,se=0;for(let ye=0;ye<I;++ye){const Re=_[h[ye]];if(Re===void 0)throw new SyntaxError(`Non-${b} character`);q=q<<g|Re,B+=g,B>=8&&(B-=8,P[se++]=255&q>>B)}if(B>=g||255&q<<8-B)throw new SyntaxError("Unexpected end of data");return P})(d,l,s,o)}),dn=As({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),VE=As({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var WE=Object.freeze({__proto__:null,base58btc:dn,base58flickr:VE});const Ii=Nt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ZE=Nt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),HE=Nt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),KE=Nt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),GE=Nt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),QE=Nt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qE=Nt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),JE=Nt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),YE=Nt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var XE=Object.freeze({__proto__:null,base32:Ii,base32upper:ZE,base32pad:HE,base32padupper:KE,base32hex:GE,base32hexupper:QE,base32hexpad:qE,base32hexpadupper:JE,base32z:YE});const wm=(o,r)=>{const{bytes:s,version:l}=o;return l===0?tx(s,Pd(o),r||dn.encoder):nx(s,Pd(o),r||Ii.encoder)},vm=new WeakMap,Pd=o=>{const r=vm.get(o);if(r==null){const s=new Map;return vm.set(o,s),s}return r};class Ke{constructor(r,s,l,d){this.code=s,this.version=r,this.multihash=l,this.bytes=d,this["/"]=d}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:s}=this;if(r!==Ts)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(s.code!==rx)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ke.createV0(s)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:s}=this.multihash,l=ue(r,s);return Ke.createV1(this.code,l)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return Ke.equals(this,r)}static equals(r,s){const l=s;return l&&r.code===l.code&&r.version===l.version&&((d,h)=>{if(d===h)return!0;{const y=h;return d.code===y.code&&d.size===y.size&&y.bytes instanceof Uint8Array&&((g,b)=>{if(g===b)return!0;if(g.byteLength!==b.byteLength)return!1;for(let _=0;_<g.byteLength;_++)if(g[_]!==b[_])return!1;return!0})(d.bytes,y.bytes)}})(r.multihash,l.multihash)}toString(r){return wm(this,r)}toJSON(){return{"/":wm(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const s=r;if(s instanceof Ke)return s;if(s["/"]!=null&&s["/"]===s.bytes||s.asCID===s){const{version:l,code:d,multihash:h,bytes:y}=s;return new Ke(l,d,h,y||bm(l,d,h.bytes))}if(s[ix]===!0){const{version:l,multihash:d,code:h}=s,y=$e(d);return Ke.create(l,h,y)}return null}static create(r,s,l){if(typeof s!="number")throw new Error("String codecs are no longer supported");if(!(l.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:if(s!==Ts)throw new Error(`Version 0 CID must use dag-pb (code: ${Ts}) block encoding`);return new Ke(r,s,l,l.bytes);case 1:{const d=bm(r,s,l.bytes);return new Ke(r,s,l,d)}default:throw new Error("Invalid version")}}static createV0(r){return Ke.create(0,Ts,r)}static createV1(r,s){return Ke.create(1,r,s)}static decode(r){const[s,l]=Ke.decodeFirst(r);if(l.length)throw new Error("Incorrect length");return s}static decodeFirst(r){const s=Ke.inspectBytes(r),l=s.size-s.multihashSize,d=m(r.subarray(l,l+s.multihashSize));if(d.byteLength!==s.multihashSize)throw new Error("Incorrect length");const h=d.subarray(s.multihashSize-s.digestSize),y=new tt(s.multihashCode,s.digestSize,h,d);return[s.version===0?Ke.createV0(y):Ke.createV1(s.codec,y),r.subarray(s.size)]}static inspectBytes(r){let s=0;const l=()=>{const[I,P]=W(r.subarray(s));return s+=P,I};let d=l(),h=Ts;if(d===18?(d=0,s=0):h=l(),d!==0&&d!==1)throw new RangeError(`Invalid CID version ${d}`);const y=s,g=l(),b=l(),_=s+b;return{version:d,codec:h,multihashCode:g,digestSize:b,multihashSize:_-y,size:_}}static parse(r,s){const[l,d]=ex(r,s),h=Ke.decode(d);if(h.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Pd(h).set(l,r),h}}const ex=(o,r)=>{switch(o[0]){case"Q":{const s=r||dn;return[dn.prefix,s.decode(`${dn.prefix}${o}`)]}case dn.prefix:{const s=r||dn;return[dn.prefix,s.decode(o)]}case Ii.prefix:{const s=r||Ii;return[Ii.prefix,s.decode(o)]}default:if(r==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[o[0],r.decode(o)]}},tx=(o,r,s)=>{const{prefix:l}=s;if(l!==dn.prefix)throw Error(`Cannot string encode V0 in ${s.name} encoding`);const d=r.get(l);if(d==null){const h=s.encode(o).slice(1);return r.set(l,h),h}return d},nx=(o,r,s)=>{const{prefix:l}=s,d=r.get(l);if(d==null){const h=s.encode(o);return r.set(l,h),h}return d},Ts=112,rx=18,bm=(o,r,s)=>{const l=Y(o),d=l+Y(r),h=new Uint8Array(d+s.byteLength);return F(o,h,0),F(r,h,l),h.set(s,d),h},ix=Symbol.for("@ipld/js-cid/CID"),ox={float64:!0,typeEncoders:{Object:function(o){if(o.asCID!==o&&o["/"]!==o.bytes)return null;const r=Ke.asCID(o);if(!r)return null;const s=new Uint8Array(r.bytes.byteLength+1);return s.set(r.bytes,1),[new U(A.tag,42),new U(A.bytes,s)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(o){if(Number.isNaN(o))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(o===1/0||o===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},km={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};km.tags[42]=function(o){if(o[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Ke.decode(o.subarray(1))};const Rd=o=>{return r=o,s=ox,s=Object.assign({},RE,s),ym(r,hm,s);var r,s},Is=o=>mm(o,km),sx=new TextEncoder,ax=new TextDecoder,Ls=o=>sx.encode(o),Ll=o=>ax.decode(o),Os=(o,r)=>Ke.create(1,o,r),mo=o=>{if(o==null)return!1;const r=o;return r["/"]!=null&&r["/"]===r.bytes?!0:o.asCID===o},Em=(o,r)=>Ke.parse(o,r),xm=m,lx={code:0,name:"identity",encode:xm,digest:o=>ue(0,xm(o))},Sm="did:",ux=Sm.length,_m="did:key:",cx=_m.length,$d=3357,Dd=Y($d),Jn=o=>{if(o.startsWith(Sm)){if(o.startsWith(_m)){const r=dn.decode(o.slice(cx));return Md(r)}{const r=Ls(o.slice(ux)),s=new Uint8Array(r.byteLength+Dd);return F($d,s),s.set(r,Dd),new Ol(s)}}throw new RangeError(`Invalid DID "${o}", must start with 'did:'`)},Cm=o=>o.did(),Nm=o=>o instanceof Ol?o:o instanceof Uint8Array?Md(o):Jn(typeof o=="string"?o:o.did()),Md=o=>{const[r]=W(o),{buffer:s,byteOffset:l,byteLength:d}=o;switch(r){case 4608:if(o.length>35)throw new RangeError("Only p256-pub compressed is supported.");case 237:case 4613:case 4609:case 4610:return new dx(s,l,d);case $d:return new Ol(s,l,d);default:throw new RangeError(`Unsupported DID encoding, unknown multicode 0x${r.toString(16)}.`)}};class Ol extends Uint8Array{did(){const r=new Uint8Array(this.buffer,this.byteOffset+Dd);return`did:${Ll(r)}`}toJSON(){return this.did()}}class dx extends Ol{did(){return`did:key:${dn.encode(this)}`}}const Pl=Nt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),fx=Nt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Li=Nt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),hx=Nt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var px=Object.freeze({__proto__:null,base64:Pl,base64pad:fx,base64url:Li,base64urlpad:hx});const Bd=53248,jd=53485,Am=13636096,Tm=13636097,Im=13636098,Ud=13636101,Lm=o=>{switch(o){case 53479:return"ES256K";case 53482:return"BLS12381G1";case 53483:return"BLS12381G2";case jd:return"EdDSA";case Am:return"ES256";case Tm:return"ES384";case Im:return"ES512";case Ud:return"RS256";case 53649:return"EIP191";default:throw new RangeError(`Unknown signature algorithm code 0x${o.toString(16)}`)}};class zd extends Uint8Array{get code(){const[r]=W(this);return Object.defineProperties(this,{code:{value:r}}),r}get size(){const r=mx(this);return Object.defineProperties(this,{size:{value:r}}),r}get algorithm(){const r=yx(this);return Object.defineProperties(this,{algorithm:{value:r}}),r}get raw(){const{buffer:r,byteOffset:s,size:l,code:d}=this,h=Y(d),y=Y(l),g=new Uint8Array(r,s+h+y,l);return Object.defineProperties(this,{raw:{value:g}}),g}toJSON(){return vx(this)}}const yx=o=>{const{code:r,raw:s,buffer:l,byteOffset:d}=o;if(r===Bd){const h=s.byteLength+Y(r)+Y(s.byteLength),y=new Uint8Array(l,d+h);return Ll(y)}return Lm(r)},mx=o=>{const r=Y(o.code),[s]=W(new Uint8Array(o.buffer,o.byteOffset+r));return s},Fd=(o,r)=>{Lm(o);const s=Y(o),l=Y(r.byteLength),d=new zd(s+l+r.byteLength);return F(o,d),F(r.byteLength,d,s),d.set(r,s+l),Object.defineProperties(d,{code:{value:o},size:{value:r.byteLength}}),d},gx=(o,r)=>{const s=(l=>{switch(l){case"ES256K":return 53479;case"BLS12381G1":return 53482;case"BLS12381G2":return 53483;case"EdDSA":return jd;case"ES256":return Am;case"ES384":return Tm;case"ES512":return Im;case"RS256":return Ud;case"EIP191":return 53649;default:return Bd}})(o);return s===Bd?wx(o,r):Fd(s,r)},wx=(o,r)=>{const s=Y(53248),l=Y(r.byteLength),d=Ls(o),h=new zd(s+l+r.byteLength+d.byteLength);return F(53248,h),F(r.byteLength,h,s),h.set(r,s+l),h.set(d,s+l+r.byteLength),h},Vd=o=>{if(!(o instanceof Uint8Array))throw new TypeError(`Can only decode Uint8Array into a Signature, instead got ${JSON.stringify(o)}`);return(s=>new zd(s.buffer,s.byteOffset,s.byteLength))(o)},vx=o=>({"/":{bytes:Pl.baseEncode(o)}}),Wd=o=>Om(o,{readPrincipal:Lx,readProof:Ax}),Om=(o,{readPrincipal:r,readProof:s})=>({iss:r(o.iss,"iss"),aud:r(o.aud,"aud"),att:Ex(o.att,"att"),prf:$m(o.prf,s,"prf")||[],exp:Px(o.exp===1/0?null:o.exp,Pm,"exp"),nbf:Mm(o.nbf,Pm,"nbf"),fct:$m(o.fct,Nx,"fct")||[],nnc:Mm(o.nnc,Rl,"nnc")}),bx=o=>{if(o instanceof Uint8Array)return Vd(o);throw new TypeError(`Can only decode Uint8Array into a Signature, instead got ${JSON.stringify(o)}`)},Pm=(o,r)=>Number.isInteger(o)?o:Yn.throw(`Expected ${r} to be integer, instead got ${JSON.stringify(o)}`),kx=(o,r)=>Dm(o,xx,r),Ex=(o,r)=>Rm(o,kx,r),xx=o=>({...o,can:Sx(o.can),with:_x(o.with)}),Sx=o=>typeof o!="string"?Yn.throw(`Capability has invalid 'can: ${JSON.stringify(o)}', value must be a string`):o.slice(1,-1).includes("/")?o.toLocaleLowerCase():o==="*"?o:Yn.throw(`Capability has invalid 'can: "${o}"', value must have at least one path segment`),_x=o=>typeof o!="string"?Yn.throw(`Capability has invalid 'with: ${JSON.stringify(o)}', value must be a string`):Cx(o)||Yn.throw(`Capability has invalid 'with: "${o}"', value must be a valid URI string`),Cx=o=>{try{return new URL(o),o}catch{return null}},Rm=(o,r,s)=>Array.isArray(o)?o.map((l,d)=>r(l,`${s}[${d}]`)):Yn.throw(`${s} must be an array`),$m=(o,r,s)=>o===void 0?o:Rm(o,r,s),Dm=(o,r,s)=>o!=null&&typeof o=="object"?r(o):Yn.throw(`${s} must be of type object, instead got ${o}`),Nx=(o,r)=>Dm(o,Object,r),Ax=(o,r)=>mo(o)?o:$l(`Expected ${r} to be IPLD link, instead got ${JSON.stringify(o)}`),Tx=(o,r)=>Ix(Rl(o,r)),Ix=o=>{try{return Em(o)}catch{return Os(85,lx.digest(Ls(o)))}},Lx=(o,r)=>Md(Rx(o,r)),Ox=(o,r)=>Jn(Rl(o,r)),Mm=(o,r,s="Field")=>o!==void 0?r(o,s):void 0,Px=(o,r,s)=>o===null?null:r(o,s),Rl=(o,r="Field")=>typeof o=="string"?o:$l(`${r} has invalid value ${o}`),Rx=(o,r)=>o instanceof Uint8Array?o:$l(`Expected ${r} to be Uint8Array, instead got ${JSON.stringify(o)}`),Zd=(o,r)=>/\d+\.\d+\.\d+/.test(o)?o:Yn.throw(`Invalid version '${r}: ${JSON.stringify(o)}'`);class Yn extends TypeError{get name(){return"ParseError"}static throw(r){throw new this(r)}}const $l=o=>Yn.throw(o);class $x extends Array{constructor(){super(),this.inRecursive=[]}prefix(r){const s=this.inRecursive[this.inRecursive.length-1];s&&(s.type===A.array&&(s.elements++,s.elements!==1&&r.push([44])),s.type===A.map&&(s.elements++,s.elements!==1&&(s.elements%2==1?r.push([44]):r.push([58]))))}[A.uint.major](r,s){this.prefix(r);const l=String(s.value),d=[];for(let h=0;h<l.length;h++)d[h]=l.charCodeAt(h);r.push(d)}[A.negint.major](r,s){this[A.uint.major](r,s)}[A.bytes.major](r,s){throw new Error(`${Hn} unsupported type: Uint8Array`)}[A.string.major](r,s){this.prefix(r);const l=co(JSON.stringify(s.value));r.push(l.length>32?cr(l):l)}[A.array.major](r,s){this.prefix(r),this.inRecursive.push({type:A.array,elements:0}),r.push([91])}[A.map.major](r,s){this.prefix(r),this.inRecursive.push({type:A.map,elements:0}),r.push([123])}[A.tag.major](r,s){}[A.float.major](r,s){if(s.type.name==="break"){const y=this.inRecursive.pop();if(y){if(y.type===A.array)r.push([93]);else{if(y.type!==A.map)throw new Error("Unexpected recursive type; this should not happen!");r.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(s.value===void 0)throw new Error(`${Hn} unsupported type: undefined`);if(this.prefix(r),s.type.name==="true")return void r.push([116,114,117,101]);if(s.type.name==="false")return void r.push([102,97,108,115,101]);if(s.type.name==="null")return void r.push([110,117,108,108]);const l=String(s.value),d=[];let h=!1;for(let y=0;y<l.length;y++)d[y]=l.charCodeAt(y),h||d[y]!==46&&d[y]!==101&&d[y]!==69||(h=!0);h||(d.push(46),d.push(48)),r.push(d)}}const Dx={addBreakTokens:!0,mapSorter:function(o,r){if(Array.isArray(o[0])||Array.isArray(r[0]))throw new Error(`${Hn} complex map keys are not supported`);const s=o[0],l=r[0];if(s.type!==A.string||l.type!==A.string)throw new Error(`${Hn} non-string map keys are not supported`);if(s<l)return-1;if(s>l)return 1;throw new Error(`${Hn} unexpected duplicate map keys, this is not supported`)}};class Bm{constructor(r,s={}){this.pos=0,this.data=r,this.options=s,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let r=this.ch();for(;r===32||r===9||r===13||r===10;)r=this.data[++this.pos]}expect(r){if(this.data.length-this.pos<r.length)throw new Error(`${ce} unexpected end of input at position ${this.pos}`);for(let s=0;s<r.length;s++)if(this.data[this.pos++]!==r[s])throw new Error(`${ce} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...r)}'`)}parseNumber(){const r=this.pos;let s=!1,l=!1;const d=g=>{for(;!this.done();){const b=this.ch();if(!g.includes(b))break;this.pos++}};if(this.ch()===45&&(s=!0,this.pos++),this.ch()===48){if(this.pos++,this.ch()!==46)return new U(A.uint,0,this.pos-r);this.pos++,l=!0}if(d([48,49,50,51,52,53,54,55,56,57]),s&&this.pos===r+1)throw new Error(`${ce} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(l)throw new Error(`${ce} unexpected token at position ${this.pos}`);l=!0,this.pos++,d([48,49,50,51,52,53,54,55,56,57])}this.done()||this.ch()!==101&&this.ch()!==69||(l=!0,this.pos++,this.done()||this.ch()!==43&&this.ch()!==45||this.pos++,d([48,49,50,51,52,53,54,55,56,57]));const h=String.fromCharCode.apply(null,this.data.subarray(r,this.pos)),y=parseFloat(h);return l?new U(A.float,y,this.pos-r):this.options.allowBigInt!==!0||Number.isSafeInteger(y)?new U(y>=0?A.uint:A.negint,y,this.pos-r):new U(y>=0?A.uint:A.negint,BigInt(h),this.pos-r)}parseString(){if(this.ch()!==34)throw new Error(`${ce} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let h=this.pos,y=0;h<this.data.length&&y<65536;h++,y++){const g=this.data[h];if(g===92||g<32||g>=128)break;if(g===34){const b=String.fromCharCode.apply(null,this.data.subarray(this.pos,h));return this.pos=h+1,new U(A.string,b,y)}}const r=this.pos,s=[],l=()=>{if(this.pos+4>=this.data.length)throw new Error(`${ce} unexpected end of unicode escape sequence at position ${this.pos}`);let h=0;for(let y=0;y<4;y++){let g=this.ch();if(g>=48&&g<=57)g-=48;else if(g>=97&&g<=102)g=g-97+10;else{if(!(g>=65&&g<=70))throw new Error(`${ce} unexpected unicode escape character at position ${this.pos}`);g=g-65+10}h=16*h+g,this.pos++}return h},d=()=>{const h=this.ch();let y,g,b,_,I=null,P=h>239?4:h>223?3:h>191?2:1;if(this.pos+P>this.data.length)throw new Error(`${ce} unexpected unicode sequence at position ${this.pos}`);switch(P){case 1:h<128&&(I=h);break;case 2:y=this.data[this.pos+1],(192&y)==128&&(_=(31&h)<<6|63&y,_>127&&(I=_));break;case 3:y=this.data[this.pos+1],g=this.data[this.pos+2],(192&y)==128&&(192&g)==128&&(_=(15&h)<<12|(63&y)<<6|63&g,_>2047&&(_<55296||_>57343)&&(I=_));break;case 4:y=this.data[this.pos+1],g=this.data[this.pos+2],b=this.data[this.pos+3],(192&y)==128&&(192&g)==128&&(192&b)==128&&(_=(15&h)<<18|(63&y)<<12|(63&g)<<6|63&b,_>65535&&_<1114112&&(I=_))}I===null?(I=65533,P=1):I>65535&&(I-=65536,s.push(I>>>10&1023|55296),I=56320|1023&I),s.push(I),this.pos+=P};for(;!this.done();){const h=this.ch();let y;switch(h){case 92:if(this.pos++,this.done())throw new Error(`${ce} unexpected string termination at position ${this.pos}`);switch(y=this.ch(),this.pos++,y){case 34:case 39:case 92:case 47:s.push(y);break;case 98:s.push(8);break;case 116:s.push(9);break;case 110:s.push(10);break;case 102:s.push(12);break;case 114:s.push(13);break;case 117:s.push(l());break;default:throw new Error(`${ce} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new U(A.string,xl(s),this.pos-r);default:if(h<32)throw new Error(`${ce} invalid control character at position ${this.pos}`);h<128?(s.push(h),this.pos++):d()}}throw new Error(`${ce} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new U(A.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new U(A.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new U(A.null,null,4);case 102:return this.expect([102,97,108,115,101]),new U(A.false,!1,5);case 116:return this.expect([116,114,117,101]),new U(A.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${ce} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new U(A.break,void 0,1);if(this.ch()!==44)throw new Error(`${ce} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new U(A.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new U(A.break,void 0,1);if(this.ch()!==44)throw new Error(`${ce} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new U(A.break,void 0,1);const r=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${ce} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),r}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${ce} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function jm(o){const r=Pl.encode(o).slice(1);return[new U(A.map,1/0,1),new U(A.string,"/",1),new U(A.map,1/0,1),new U(A.string,"bytes",5),new U(A.string,r,r.length),new U(A.break,void 0,1),new U(A.break,void 0,1)]}const Mx={typeEncoders:{Object:function(o){if(o.asCID!==o&&o["/"]!==o.bytes)return null;const r=Ke.asCID(o);if(!r)return null;const s=r.toString();return[new U(A.map,1/0,1),new U(A.string,"/",1),new U(A.string,s,s.length),new U(A.break,void 0,1)]},Uint8Array:jm,Buffer:jm,undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(o){if(Number.isNaN(o))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(o===1/0||o===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};class Bx extends Bm{constructor(r,s){super(r,s),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const r=this._next();if(r.type===A.map){const s=this._next();if(s.type===A.string&&s.value==="/"){const l=this._next();if(l.type===A.string){if(this._next().type!==A.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(l),new U(A.tag,42,0)}if(l.type===A.map){const d=this._next();if(d.type===A.string&&d.value==="bytes"){const h=this._next();if(h.type===A.string){for(let g=0;g<2;g++)if(this._next().type!==A.break)throw new Error("Invalid encoded Bytes form");const y=Pl.decode(`m${h.value}`);return new U(A.bytes,y,h.value.length)}this.tokenBuffer.push(h)}this.tokenBuffer.push(d)}this.tokenBuffer.push(l)}this.tokenBuffer.push(s)}return r}}const Hd={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Hd.tags[42]=Ke.parse;const Kd=o=>{return r=o,s=Mx,s=Object.assign({},Dx,s),ym(r,new $x,s);var r,s},Um=o=>function(r,s){return mm(r,s=Object.assign({tokenizer:new Bm(r,s)},s))}(o,Object.assign(Hd,{tokenizer:new Bx(o,Hd)}));new TextDecoder,new TextEncoder;const zm=(o,r)=>Li.baseEncode(Ux(o,r)),Fm=o=>Li.baseEncode(zx(o)),jx=o=>Li.baseEncode(o.raw),Ux=(o,r)=>Kd({alg:r,ucv:o,typ:"JWT"}),zx=o=>Kd({iss:Cm(o.iss),aud:Cm(o.aud),att:o.att,exp:o.exp,prf:o.prf.map(Fx),...o.fct.length>0&&{fct:o.fct},...o.nnc&&{nnc:o.nnc},...o.nbf&&{nbf:o.nbf}}),Fx=o=>o.toString();class Vm{constructor(r){this.model=r}get version(){return this.model.v}get issuer(){return Nm(this.model.iss)}get audience(){return Nm(this.model.aud)}get capabilities(){return this.model.att}get expiration(){const{exp:r}=this.model;return r===null?1/0:r}get notBefore(){return this.model.nbf}get nonce(){return this.model.nnc}get facts(){return this.model.fct}get proofs(){return this.model.prf}get signature(){return this.model.s}get jwt(){return this.model.jwt}get s(){return this.model.s}get v(){return this.model.v}get iss(){return this.model.iss}get aud(){return this.model.aud}get att(){return this.model.att}get exp(){return this.model.exp}get nbf(){return this.model.nbf}get nnc(){return this.model.nnc}get fct(){return this.model.fct}get prf(){return this.model.prf}toJSON(){const{v:r,iss:s,aud:l,s:d,att:h,prf:y,exp:g,fct:b,nnc:_,nbf:I}=this.model;return{iss:s,aud:l,v:r,s:d,exp:g,...(P={att:h,prf:y,...b.length>0&&{fct:b}},JSON.parse(Ll(Kd(P)))),..._!=null&&{nnc:_},...I&&{nbf:I}};var P}}const Wm=o=>{const{fct:r,nnc:s,nbf:l,...d}=Wd(o);return Rd({...r.length>0&&{fct:r},...s!=null&&{nnc:s},...l&&{nbf:l},...d,v:Zd(o.v,"v"),s:Vx(o.s,"s")})},Vx=(o,r)=>{try{return(s=>Vd(s))(o)}catch(s){throw new Error(`Expected signature ${r}, instead got ${JSON.stringify(o)}`,{cause:s})}};class Zm extends Vm{get code(){return 113}format(){return r=this.model,`${zm(r.v,r.s.algorithm)}.${Fm(r)}.${jx(r.s)}`;var r}encode(){return Wm(this.model)}}const Wx=o=>{const r=o.split("."),[s,l,d]=r.length===3?r:$l(`Can't parse UCAN: ${o}: Expected JWT format: 3 dot-separated base64url-encoded values.`),{ucv:h,alg:y}=Zx(s);return{...Hx(l),v:h,s:gx(y,Li.baseDecode(d))}},Zx=o=>{const{ucv:r,alg:s,typ:l}=Um(Li.baseDecode(o));return{typ:(d=l,h="JWT",y="typ",d===h?h:Yn.throw(`Expected ${y} to be a ${JSON.stringify(h)} instead got ${JSON.stringify(d)}`)),ucv:Zd(r,"ucv"),alg:Rl(s,"alg")};var d,h,y},Hx=o=>{const r=Um(Li.baseDecode(o));return Om(r,{readPrincipal:Ox,readProof:Tx})},Hm=({jwt:o})=>Ls(o);class Kx extends Vm{constructor(r){super(r),this.model=r}get code(){return 85}format(){return(({jwt:r})=>r)(this.model)}encode(){return Hm(this.model)}}const Gx=Ee,Qx=o=>{try{return(r=>{const s=Is(r);return new Zm({...Wd(s),v:Zd(s.v,"v"),s:bx(s.s)})})(o)}catch{return(s=>{const l=Ll(s);return new Kx({...Wx(l),jwt:l})})(o)}},Km=async({issuer:o,audience:r,capabilities:s,lifetimeInSeconds:l=30,expiration:d=Jx()+l,notBefore:h,facts:y=[],proofs:g=[],nonce:b})=>{const _="0.9.1",I=Wd({iss:Jn(o.did()),aud:Jn(r.did()),att:s,fct:y,exp:d,nbf:h,prf:g,nnc:b}),P=qx(I,_,o.signatureAlgorithm);return B={...I,v:_,s:await o.sign(P)},new Zm(B);var B},qx=(o,r,s)=>Ls(((l,d,h)=>`${zm(d,h)}.${Fm(l)}`)(o,r,s)),Jx=()=>Math.floor(Date.now()/1e3),Gd=o=>!mo(o);class Dl{constructor(r,s=new Map){this.root=r,this.blocks=s,Object.defineProperties(this,{blocks:{enumerable:!1}})}get version(){return this.data.version}get signature(){return this.data.signature}get cid(){return this.root.cid}get asCID(){return this.cid}get bytes(){return this.root.bytes}get data(){const r=qd(this.root);return Object.defineProperties(this,{data:{value:r,enumerable:!1}}),r}export(){return Qm(this.root,this.blocks)}get proofs(){return Xx(this)}get issuer(){return this.data.issuer}get audience(){return this.data.audience}get capabilities(){return this.data.capabilities}get expiration(){return this.data.expiration}get notBefore(){return this.data.notBefore}get nonce(){return this.data.nonce}get facts(){return this.data.facts}iterate(){return Gm(this)}delegate(){return this}toJSON(){return{...this.data.toJSON(),"/":this.cid.toString(),prf:this.proofs.map(r=>Gd(r)?r:{"/":r.toString()})}}}const Gm=function*(o){for(const r of o.proofs)Gd(r)&&(yield*Gm(r),yield r)},Qd=new WeakMap,qd=({bytes:o})=>{const r=Qd.get(o);if(!r){const s=Qx(o);return Qd.set(o,s),s}return r},Jd=async({issuer:o,audience:r,proofs:s=[],...l},d)=>{const h=[],y=new Map;for(const P of s)if(Gd(P)){h.push(P.cid);for(const B of P.export())y.set(B.cid.toString(),B)}else h.push(P);const g=await Km({...l,issuer:o,audience:r,proofs:h}),{cid:b,bytes:_}=await(async(P,{hasher:B=Gx}={})=>{const[q,se]=P.jwt?[85,Hm(P)]:[113,Wm(P)],ye=await B.digest(se);return{bytes:se,cid:Os(q,ye),data:P}})(g,d);Qd.set(b,g);const I=new Dl({cid:b,bytes:_},y);return Object.defineProperties(I,{proofs:{value:s}}),I},Qm=function*(o,r){for(const s of qd(o).proofs){const l=r.get(s.toString());l&&(yield*Qm(l,r))}yield o},Yx=o=>{let r=[];for(const l of o)r.push([l.cid.toString(),l]);const s=r.pop();if(s){const[,l]=s;return new Dl(l,new Map(r))}throw new RangeError("Empty DAG can not be turned into a delegation")},qm=({root:o,blocks:r})=>new Dl(o,r),Xx=o=>{const r=[],{root:s,blocks:l}=o;for(const d of qd(s).proofs){const h=l.get(d.toString());r.push(h?qm({root:h,blocks:l}):d)}return Object.defineProperty(o,"proofs",{value:r}),r},Jm=o=>new eS(o);class eS{constructor({issuer:r,audience:s,capability:l,proofs:d=[],expiration:h,lifetimeInSeconds:y,notBefore:g,nonce:b,facts:_=[]}){this.issuer=r,this.audience=s,this.proofs=d,this.capabilities=[l],this.expiration=h,this.lifetimeInSeconds=y,this.notBefore=g,this.nonce=b,this.facts=_}delegate(){return Jd(this)}async execute(r){const[s]=await r.execute(this);return s}}var tS=function o(r,s,l){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw o.bytes=0,new RangeError("Could not encode varint");s=s||[];for(var d=l=l||0;r>=nS;)s[l++]=255&r|128,r/=128;for(;-128&r;)s[l++]=255&r|128,r>>>=7;return s[l]=0|r,o.bytes=l-d+1,s},nS=Math.pow(2,31),rS=function o(r,s){var l,d=0,h=0,y=s=s||0,g=r.length;do{if(y>=g||h>49)throw o.bytes=0,new RangeError("Could not decode varint");l=r[y++],d+=h<28?(127&l)<<h:(127&l)*Math.pow(2,h),h+=7}while(l>=128);return o.bytes=y-s,d},iS=Math.pow(2,7),oS=Math.pow(2,14),sS=Math.pow(2,21),aS=Math.pow(2,28),lS=Math.pow(2,35),uS=Math.pow(2,42),cS=Math.pow(2,49),dS=Math.pow(2,56),fS=Math.pow(2,63),bt={encode:tS,decode:rS,encodingLength:function(o){return o<iS?1:o<oS?2:o<sS?3:o<aS?4:o<lS?5:o<uS?6:o<cS?7:o<dS?8:o<fS?9:10}};const hS=fm(),pS={float64:!1,quickEncodeToken:dm};function Ym(o,r=hS,s=pS){if(Array.isArray(o)){let l=0;for(const d of o)l+=Ym(d,r,s);return l}{const l=r[o.type.major];if(l.encodedSize===void 0||typeof l.encodedSize!="function")throw new Error(`Encoder for ${o.type.name} does not have an encodedSize()`);return l.encodedSize(o,s)}}class yS{constructor(r,s){this.bytes=r,this.byteOffset=s,this.roots=[],this.headerSize=s}addRoot(r,s){return mS(this,r,s),this}write(r){return gS(this,r),this}close(r){return wS(this,r)}}const mS=(o,r,s={})=>{const{resize:l=!1}=s,{bytes:d,headerSize:h,byteOffset:y,roots:g}=o;o.roots.push(r);const b=ef(o);if(b>h){if(!(b-h+y<d.byteLength))throw g.pop(),new RangeError(`Buffer has no capacity for a new root ${r}`);if(!l)throw g.pop(),new RangeError(`Header of size ${h} has no capacity for new root ${r}.
  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`);Xm(o,b)}},Yd=({cid:o,bytes:r})=>{const s=o.bytes.byteLength+r.byteLength;return bt.encodingLength(s)+s},gS=(o,{cid:r,bytes:s})=>{const l=r.bytes.byteLength+s.byteLength,d=bt.encode(l);if(o.byteOffset+d.length+l>o.bytes.byteLength)throw new RangeError("Buffer has no capacity for this block");Xd(o,d),Xd(o,r.bytes),Xd(o,s)},wS=(o,r={})=>{const{resize:s=!1}=r,{roots:l,bytes:d,byteOffset:h,headerSize:y}=o,g=Rd({version:1,roots:l}),b=bt.encode(g.length),_=b.length+g.byteLength;if(y-_===0)return eg(o,b,g),d.subarray(0,h);if(s)return Xm(o,_),eg(o,b,g),d.subarray(0,o.byteOffset);throw new RangeError(`Header size was overestimated.
You can use close({ resize: true }) to resize header`)},Xm=(o,r)=>{const{bytes:s,headerSize:l}=o;s.set(s.subarray(l,o.byteOffset),r),o.byteOffset+=r-l,o.headerSize=r},Xd=(o,r)=>{o.bytes.set(r,o.byteOffset),o.byteOffset+=r.length},eg=({bytes:o},r,s)=>{o.set(r),o.set(s,r.length)},vS=[new U(A.map,2),new U(A.string,"version"),new U(A.uint,1),new U(A.string,"roots")],bS=new U(A.tag,42),tg=o=>{const r=[...vS];r.push(new U(A.array,o.length));for(const l of o)r.push(bS),r.push(new U(A.bytes,{length:l+1}));const s=Ym(r);return bt.encodingLength(s)+s},ef=({roots:o})=>tg(o.map(r=>r.bytes.byteLength)),ng=(o,r={})=>{const{roots:s=[],byteOffset:l=0,byteLength:d=o.byteLength,headerSize:h=ef({roots:s})}=r,y=new Uint8Array(o,l,d),g=new yS(y,h);for(const b of s)g.addRoot(b);return g},Wr={Null:o=>o===null,Int:o=>Number.isInteger(o),Float:o=>typeof o=="number"&&Number.isFinite(o),String:o=>typeof o=="string",Bool:o=>typeof o=="boolean",Bytes:o=>o instanceof Uint8Array,Link:o=>!Wr.Null(o)&&typeof o=="object"&&o.asCID===o,List:o=>Array.isArray(o),Map:o=>!Wr.Null(o)&&typeof o=="object"&&o.asCID!==o&&!Wr.List(o)&&!Wr.Bytes(o)},go={Int:Wr.Int,"CarHeader > version":o=>go.Int(o),"CarHeader > roots (anon) > valueType (anon)":Wr.Link,"CarHeader > roots (anon)":o=>Wr.List(o)&&Array.prototype.every.call(o,go["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":o=>go["CarHeader > roots (anon)"](o),CarHeader:o=>{const r=o&&Object.keys(o);return Wr.Map(o)&&["version"].every(s=>r.includes(s))&&Object.entries(o).every(([s,l])=>go["CarHeader > "+s]&&go["CarHeader > "+s](l))}},kS=go.CarHeader,ES=18,xS=32,SS=112;function Ml(o,r){if(!o.length)throw new Error("Unexpected end of data");const s=bt.decode(o);return r.seek(bt.decode.bytes),s}async function rg(o,r){const s=Ml(await o.upTo(8),o);if(s===0)throw new Error("Invalid CAR header (zero length)");const l=await o.exactly(s,!0),d=Is(l);if(!kS(d))throw new Error("Invalid CAR header format");if(d.version!==1&&d.version!==2||r!==void 0&&d.version!==r)throw new Error(`Invalid CAR version: ${d.version}${r!==void 0?` (expected ${r})`:""}`);const h=Array.isArray(d.roots);if(d.version===1&&!h||d.version===2&&h)throw new Error("Invalid CAR header format");if(d.version===1)return d;const y=function(b){const _=new DataView(b.buffer,b.byteOffset,b.byteLength);let I=0;return{version:2,characteristics:[_.getBigUint64(I,!0),_.getBigUint64(I+=8,!0)],dataOffset:Number(_.getBigUint64(I+=8,!0)),dataSize:Number(_.getBigUint64(I+=8,!0)),indexOffset:Number(_.getBigUint64(I+=8,!0))}}(await o.exactly(40,!0));o.seek(y.dataOffset-o.pos);const g=await rg(o,1);return Object.assign(g,y)}async function _S(o){const r=await o.exactly(2,!1);if(r[0]===ES&&r[1]===xS){const y=await o.exactly(34,!0),g=$e(y);return Ke.create(0,SS,g)}const s=Ml(await o.upTo(8),o);if(s!==1)throw new Error(`Unexpected CID version (${s})`);const l=Ml(await o.upTo(8),o),d=await o.exactly(function(y){bt.decode(y);const g=bt.decode.bytes,b=bt.decode(y.subarray(bt.decode.bytes));return g+bt.decode.bytes+b}(await o.upTo(8)),!0),h=$e(d);return Ke.create(s,l,h)}async function ig(o){const r=o.pos;let s=Ml(await o.upTo(8),o);if(s===0)throw new Error("Invalid CAR section (zero length)");return s+=o.pos-r,{cid:await _S(o),length:s,blockLength:s-Number(o.pos-r)}}async function CS(o){const{cid:r,blockLength:s}=await ig(o);return{bytes:await o.exactly(s,!0),cid:r}}async function NS(o){const r=o.pos,{cid:s,length:l,blockLength:d}=await ig(o),h={cid:s,length:l,blockLength:d,offset:r,blockOffset:o.pos};return o.seek(h.blockLength),h}function AS(o){const r=(async()=>{const s=await rg(o);if(s.version===2){const l=o.pos-s.dataOffset;o=function(d,h){let y=0;return{async upTo(g){let b=await d.upTo(g);return b.length+y>h&&(b=b.subarray(0,h-y)),b},async exactly(g,b=!1){const _=await d.exactly(g,b);if(_.length+y>h)throw new Error("Unexpected end of data");return b&&(y+=g),_},seek(g){y+=g,d.seek(g)},get pos(){return d.pos}}}(o,s.dataSize-l)}return s})();return{header:()=>r,async*blocks(){for(await r;(await o.upTo(8)).length>0;)yield await CS(o)},async*blocksIndex(){for(await r;(await o.upTo(8)).length>0;)yield await NS(o)}}}function TS(o){const r=o[Symbol.asyncIterator]();return function(s){let l=0,d=0,h=0,y=new Uint8Array(0);const g=async b=>{d=y.length-h;const _=[y.subarray(h)];for(;d<b;){const P=await s();if(P==null)break;d<0?P.length>d&&_.push(P.subarray(-d)):_.push(P),d+=P.length}y=new Uint8Array(_.reduce((P,B)=>P+B.length,0));let I=0;for(const P of _)y.set(P,I),I+=P.length;h=0};return{upTo:async b=>(y.length-h<b&&await g(b),y.subarray(h,h+Math.min(y.length-h,b))),async exactly(b,_=!1){if(y.length-h<b&&await g(b),y.length-h<b)throw new Error("Unexpected end of data");const I=y.subarray(h,h+b);return _&&(l+=b,h+=b),I},seek(b){l+=b,h+=b},get pos(){return l}}}(async function(){const s=await r.next();return s.done?null:s.value})}class og{constructor(r,s){this._header=r,this._blocks=s,this._keys=s.map(l=>l.cid.toString())}get version(){return this._header.version}async getRoots(){return this._header.roots}async has(r){return this._keys.indexOf(r.toString())>-1}async get(r){const s=this._keys.indexOf(r.toString());return s>-1?this._blocks[s]:void 0}async*blocks(){for(const r of this._blocks)yield r}async*cids(){for(const r of this._blocks)yield r.cid}static async fromBytes(r){if(!(r instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return sg(function(s){let l=0;return{upTo:async d=>s.subarray(l,l+Math.min(d,s.length-l)),async exactly(d,h=!1){if(d>s.length-l)throw new Error("Unexpected end of data");const y=s.subarray(l,l+d);return h&&(l+=d),y},seek(d){l+=d},get pos(){return l}}}(r))}static async fromIterable(r){if(!r||typeof r[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return sg(TS(r))}}async function sg(o){const r=AS(o),s=await r.header(),l=[];for await(const d of r.blocks())l.push(d);return new og(s,l)}class ag{constructor(r=[],s=0){this.written=new Set,this.blocks=r,this.byteLength=s}write(...r){for(const s of r){const l=s.cid.toString(Ii);this.written.has(l)||(this.blocks.push(s),this.byteLength+=Yd(s),this.written.add(l))}return this}flush(...r){const s=[];for(const h of r.reverse()){const y=h.cid.toString(Ii);this.written.has(y)||(this.blocks.unshift(h),this.byteLength+=Yd({cid:h.cid,bytes:h.bytes}),this.written.add(y)),s.push(h.cid)}this.byteLength+=ef({roots:s});const l=new ArrayBuffer(this.byteLength),d=ng(l,{roots:s});for(const h of this.blocks)d.write(h);return d.close()}}const tf=({roots:o=[],blocks:r})=>{const s=new ag;return r&&s.write(...r.values()),s.flush(...o)},lg=async o=>{const r=await og.fromBytes(o),{_header:s,_blocks:l,_keys:d}=r,h=[],y=new Map,g=s.roots.map(b=>d.indexOf(String(b)));for(const[b,_]of l.entries())g.includes(b)?h.push(_):y.set(_.cid.toString(),_);return{roots:h,blocks:y}},ug=async(o,{hasher:r=Ee}={})=>Os(514,await r.digest(o));var IS=Object.freeze({__proto__:null,code:514,createWriter:()=>new ag,encode:tf,decode:lg,link:ug,write:async(o,r)=>{const s=tf(o);return{bytes:s,cid:await ug(s,r)}}});const LS=Object.freeze({"content-type":"application/car"});var OS=Object.freeze({__proto__:null,codec:IS,encode:async(o,r)=>{const s=[],l=new Map;for(const h of o){const y=await h.delegate();s.push(y.root);for(const g of y.export())l.set(g.cid.toString(),g);l.delete(y.root.cid.toString())}const d=tf({roots:s,blocks:l});return{headers:LS,body:d}},decode:async({headers:o,body:r})=>{const s=o["content-type"]||o["Content-Type"];if(s!=="application/car")throw TypeError(`Only 'content-type: application/car' is supported, instead got '${s}'`);const{roots:l,blocks:d}=await lg(r),h=[];for(const y of l)h.push(qm({root:y,blocks:d}));return h}});const Bl=(o,r)=>{if(r.has(o))throw new TypeError("Can not encode circular structure");if(o===void 0&&r.size===0||o===null||typeof o=="symbol"&&r.size===0)return null;if(mo(o)||ArrayBuffer.isView(o))return o;if(Array.isArray(o)){r.add(o);const s=[];for(const l of o)s.push(l===void 0||typeof l=="symbol"?null:Bl(l,r));return s}if(typeof o.toJSON=="function"){r.add(o);const s=o.toJSON();return Bl(s,r)}if(typeof o=="object"){r.add(o);const s={};for(const[l,d]of Object.entries(o))d!==void 0&&typeof d!="symbol"&&(s[l]=Bl(d,r));return s}return o},nf=o=>Rd(Bl(o,new Set)),cg=async(o,{hasher:r=Ee}={})=>Os(113,await r.digest(o));var PS=Object.freeze({__proto__:null,encode:nf,link:cg,write:async(o,r)=>{const s=nf(o);return{cid:await cg(s,r),bytes:s}},code:113,decode:Is});const RS=Object.freeze({"content-type":"application/cbor"});var $S=Object.freeze({__proto__:null,codec:PS,encode:o=>({headers:RS,body:nf(o)}),decode:async({headers:o,body:r})=>{const s=o["content-type"]||o["Content-Type"];if(s!=="application/cbor")throw TypeError(`Only 'content-type: application/cbor' is supported, intsead got '${s}'`);return Is(r)}});const DS=({url:o,method:r="POST",fetch:s})=>{if(!s){if(globalThis.fetch===void 0)throw new TypeError("ucanto HTTP transport got undefined `fetch`. Try passing in a `fetch` implementation explicitly.");s=globalThis.fetch.bind(globalThis)}return new MS({url:o,method:r,fetch:s})};class MS{constructor({url:r,fetch:s,method:l}){this.fetch=s,this.method=l,this.url=r}async request({headers:r,body:s}){const l=await this.fetch(this.url.href,{headers:r,body:s,method:this.method}),d=l.ok?await l.arrayBuffer():BS.throw("HTTP Request failed",l);return{headers:l.headers.entries?Object.fromEntries(l.headers.entries()):{},body:new Uint8Array(d)}}}class BS extends Error{static throw(r,s){throw new this(r,s)}constructor(r,{url:s,status:l=500,statusText:d="Server error"}){super(r),this.name="HTTPError",this.url=s,this.status=l,this.statusText=d}}const dg=o=>Object.entries(o),fg=(o,r)=>{const[s,l]=o.length<r.length?[new Set(o),new Set(r)]:[new Set(r),new Set(o)];for(const d of s)l.has(d)||s.delete(d);return[...s]};class Wt extends Error{get error(){return!0}describe(){return this.name}get message(){return this.describe()}toJSON(){const{error:r,name:s,message:l,stack:d}=this;return{error:r,name:s,message:l,stack:d}}}class hg extends Wt{constructor(r,s,l){super(),this.claimed=r,this.delegated=s,this.cause=l,this.name="EscalatedCapability"}describe(){return`Constraint violation: ${this.cause.message}`}}class wo extends Wt{constructor(r,s){super(),this.name="InvalidClaim",this.causes=r,this.context=s}describe(){return[`Can not derive ${this.context} from delegated capabilities:`,...this.causes.map(r=>gg(r.message))].join(`
`)}get cause(){if(this.causes.length!==1)return this;{const[r]=this.causes,s=r.name==="InvalidClaim"?r.cause:r;return Object.defineProperties(this,{cause:{value:s}}),s}}}class pg extends Wt{constructor(r,s){super(),this.name="MalformedCapability",this.capability=r,this.cause=s}describe(){return[`Encountered malformed '${this.capability.can}' capability: ${mg(this.capability)}`,gg(this.cause.message)].join(`
`)}}class yg extends Wt{constructor(r){super(),this.name="UnknownCapability",this.capability=r}describe(){return`Encountered unknown capability: ${mg(this.capability)}`}}const mg=(o,r)=>JSON.stringify(o,(s,l)=>mo(l)?l.toString():l,r),gg=o=>((r,s="  ")=>`${s}${r.split(`
`).join(`
${s}`)}`)(`- ${o}`),At=o=>new jS(o);class wg{match(r){return new yg(r.capability)}select(r){return VS(this,r)}derive({derives:r,to:s}){return(({from:l,to:d,derives:h})=>new zS(l,d,h))({derives:r,to:s,from:this})}}class rf extends wg{or(r){return new US(this,r)}and(r){return((...s)=>new of(s))(this,r)}}class jS extends rf{constructor(r){super(),this.descriptor={derives:kg,...r}}create(r){const{descriptor:s,can:l}=this,d=s.nb,h=r.nb||{},y=s.with.read(r.with);if(y.error)throw Object.assign(new Error(`Invalid 'with' - ${y.message}`),{cause:y});const g={can:l,with:y};for(const[b,_]of Object.entries(d||{})){const I=b,P=_.read(h[I]);if(P!=null&&P.error)throw Object.assign(new Error(`Invalid 'nb.${I}' - ${P.message}`),{cause:P});P!==void 0&&((g.nb||(g.nb={}))[b]=P)}return g}invoke({with:r,nb:s,...l}){return Jm({...l,capability:this.create({with:r,nb:s})})}async delegate({with:r,nb:s,...l}){const{descriptor:d,can:h}=this,y=d.nb,g=s||{},b=d.with.read(r);if(b.error)throw Object.assign(new Error(`Invalid 'with' - ${b.message}`),{cause:b});const _={can:h,with:b};for(const[I,P]of Object.entries(y||{})){const B=I,q=g[B],se=q===void 0?q:P.read(g[B]);if(se!=null&&se.error)throw Object.assign(new Error(`Invalid 'nb.${B}' - ${se.message}`),{cause:se});se!==void 0&&((_.nb||(_.nb={}))[I]=se)}return await Jd({capabilities:[_],...l})}get can(){return this.descriptor.can}match(r){const s=vg(this,r);return s.error?s:new sf(r,s,this.descriptor)}toString(){return JSON.stringify({can:this.descriptor.can})}}class US extends rf{constructor(r,s){super(),this.left=r,this.right=s}match(r){const s=this.left.match(r);if(s.error){const l=this.right.match(r);return l.error?l.name==="MalformedCapability"?l:s:l}return s}toString(){return`${this.left.toString()}|${this.right.toString()}`}}class of extends wg{constructor(r){super(),this.selectors=r}match(r){const s=[];for(const l of this.selectors){const d=l.match(r);if(d.error)return d;s.push(d)}return new Ul(s)}select(r){return bg(this,r)}and(r){return new of([...this.selectors,r])}toString(){return`[${this.selectors.map(String).join(", ")}]`}}class zS extends rf{constructor(r,s,l){super(),this.from=r,this.to=s,this.derives=l}create(r){return this.to.create(r)}invoke(r){return this.to.invoke(r)}delegate(r){return this.to.delegate(r)}get can(){return this.to.can}match(r){const s=this.to.match(r);return s.error?s:new jl(s,this.from,this.derives)}toString(){return this.to.toString()}}class sf{constructor(r,s,l){this.source=[r],this.value=s,this.descriptor={derives:kg,...l}}get can(){return this.value.can}get proofs(){const r=[this.source[0].delegation];return Object.defineProperties(this,{proofs:{value:r}}),r}prune(r){return r.canIssue(this.value,this.source[0].delegation.issuer.did())?null:this}select(r){const s=[],l=[],d=[];for(const h of r){const y=vg(this,h,!0);if(y.error)y.name==="UnknownCapability"?s.push(y.capability):l.push(new wo([y],this));else{const g=this.descriptor.derives(this.value,y);g.error?l.push(new wo([new hg(this.value,y,g)],this)):d.push(new sf(h,y,this.descriptor))}}return{matches:d,unknown:s,errors:l}}toString(){const{nb:r}=this.value;return JSON.stringify({can:this.descriptor.can,with:this.value.with,nb:r&&Object.keys(r).length>0?r:void 0})}}class jl{constructor(r,s,l){this.selected=r,this.from=s,this.derives=l}get can(){return this.value.can}get source(){return this.selected.source}get proofs(){const r=[];for(const{delegation:s}of this.selected.source)r.push(s);return Object.defineProperties(this,{proofs:{value:r}}),r}get value(){return this.selected.value}prune(r){const s=this.selected.prune(r);return s?new jl(s,this.from,this.derives):null}select(r){const{derives:s,selected:l,from:d}=this,{value:h}=l,y=l.select(r),g=d.select(r),b=[],_=[];for(const I of g.matches){const P=s(h,I.value);P.error?_.push(new wo([new hg(h,I.value,P)],this)):b.push(I)}return{unknown:fg(y.unknown,g.unknown),errors:[..._,...y.errors,...g.errors.map(I=>new wo([I],this))],matches:[...y.matches.map(I=>new jl(I,d,s)),...b]}}toString(){return this.selected.toString()}}class Ul{constructor(r){this.matches=r}get selectors(){return this.matches}get source(){const r=[];for(const s of this.matches)r.push(...s.source);return Object.defineProperties(this,{source:{value:r}}),r}prune(r){const s=[];for(const l of this.matches){const d=l.prune(r);d&&s.push(d)}return s.length===0?null:new Ul(s)}get proofs(){const r=[];for(const{delegation:s}of this.source)r.push(s);return Object.defineProperties(this,{proofs:{value:r}}),r}get value(){const r=[];for(const s of this.matches)r.push(s.value);return Object.defineProperties(this,{value:{value:r}}),r}select(r){return bg(this,r)}toString(){return`[${this.matches.map(r=>r.toString()).join(", ")}]`}}const vg=(o,r,s=!1)=>{const{can:l,with:d,nb:h}=o.descriptor,{delegation:y}=r,g=r.capability;if(g.can!==l)return new yg(g);const b=d.read(g.with);if(b.error)return new pg(g,b);const _={};if(h){const I=g.nb||{};for(const[P,B]of dg(h)){const q=P;if(q in I||!s){const se=B.read(I[q]);if(se!=null&&se.error)return new pg(g,se);se!=null&&(_[q]=se)}}}return new FS(l,g.with,_,y)};class FS{constructor(r,s,l,d){this.can=r,this.with=s,this.delegation=d,this.nb=l}}const VS=(o,r)=>{const s=[],l=[],d=[];for(const h of r){const y=o.match(h);y.error?y.name==="UnknownCapability"?s.push(y.capability):d.push(new wo([y],y.capability)):l.push(y)}return{matches:l,errors:d,unknown:s}},bg=(o,r)=>{let s;const l=[],d=[];for(const h of o.selectors){const y=h.select(r);s=s?fg(s,y.unknown):y.unknown;for(const g of y.errors)d.push(new wo([g],o));l.push(y.matches)}return{unknown:s||[],errors:d,matches:(([h,...y])=>{const g=h.map(b=>[b]);for(const b of y){const _=g.splice(0);for(const I of b)for(const P of _)g.push([...P,I])}return g})(l).map(h=>new Ul(h))}},kg=(o,r)=>{if(r.with.endsWith("*")){if(!o.with.startsWith(r.with.slice(0,-1)))return new Wt(`Resource ${o.with} does not match delegated ${r.with} `)}else if(r.with!==o.with)return new Wt(`Resource ${o.with} is not contained by ${r.with}`);const s=r.nb||{},l=o.nb||{},d=dg(s);for(const[h,y]of d)if(l[h]!=y)return new Wt(`${String(h)}: ${l[h]} violates ${y}`);return!0};class Tt{constructor(r){this.settings=r}toString(){return`new ${this.constructor.name}()`}readWith(r,s){throw new Error("Abstract method readWith must be implemented by subclass")}read(r){return this.readWith(r,this.settings)}is(r){var s;return!((s=this.read(r))!=null&&s.error)}from(r){const s=this.read(r);if(s!=null&&s.error)throw s;return s}optional(){return GS(this)}nullable(){return ZS(this)}array(){return qS(this)}or(r){return YS(this,r)}and(r){return e2(this,r)}refine(r){return g2(this,r)}brand(r){return this}default(r){const s=this.from(r);if(s===void 0)throw new Error("Value of type undefined is not a vaild default");return new KS({reader:this,value:s})}}class WS extends Tt{readWith(r,s){const l=s.read(r);return l!=null&&l.error?r===null?null:new Cg({causes:[l,Oi({expect:"null",actual:r})]}):l}toString(){return`${this.settings}.nullable()`}}const ZS=o=>new WS(o);class HS extends Tt{optional(){return this}readWith(r,s){const l=s.read(r);return l!=null&&l.error&&r===void 0?void 0:l}toString(){return`${this.settings}.optional()`}}class KS extends Tt{optional(){return this}readWith(r,{reader:s,value:l}){if(r===void 0)return l;{const d=s.read(r);return d===void 0?l:d}}toString(){return`${this.settings.reader}.default(${JSON.stringify(this.settings.value)})`}get value(){return this.settings.value}}const GS=o=>new HS(o);class QS extends Tt{readWith(r,s){if(!Array.isArray(r))return Oi({expect:"array",actual:r});const l=[];for(const[d,h]of r.entries()){const y=s.read(h);if(y!=null&&y.error)return E2({at:d,cause:y});l.push(y)}return l}get element(){return this.settings}toString(){return`array(${this.element})`}}const qS=o=>new QS(o);class JS extends Tt{readWith(r,s){const l=[];for(const d of s){const h=d.read(r);if(!(h!=null&&h.error))return h;l.push(h)}return new Cg({causes:l})}get variants(){return this.settings}toString(){return`union([${this.variants.map(r=>r.toString()).join(", ")}])`}}const YS=(o,r)=>new JS([o,r]);class XS extends Tt{readWith(r,s){const l=[];for(const d of s){const h=d.read(r);h!=null&&h.error&&l.push(h)}return l.length>0?new x2({causes:l}):r}toString(){return`intersection([${this.settings.map(r=>r.toString()).join(",")}])`}}const e2=(o,r)=>new XS([o,r]),t2=new class extends Tt{readWith(o){switch(o){case!0:case!1:return o;default:return Oi({expect:"boolean",actual:o})}}toString(){return"boolean()"}},Eg=()=>t2;class xg extends Tt{greaterThan(r){return this.refine(s2(r))}lessThan(r){return this.refine(i2(r))}refine(r){return new n2({base:this,schema:r})}}const Sg=new class extends xg{readWith(o){return typeof o=="number"?o:Oi({expect:"number",actual:o})}toString(){return"number()"}};class n2 extends xg{readWith(r,{base:s,schema:l}){const d=s.read(r);return d!=null&&d.error?d:l.read(d)}toString(){return`${this.settings.base}.refine(${this.settings.schema})`}}class r2 extends Tt{readWith(r,s){return r<s?r:fn(`Expected ${r} < ${s}`)}toString(){return`lessThan(${this.settings})`}}const i2=o=>new r2(o);class o2 extends Tt{readWith(r,s){return r>s?r:fn(`Expected ${r} > ${s}`)}toString(){return`greaterThan(${this.settings})`}}const s2=o=>new o2(o),a2={read:o=>Number.isInteger(o)?o:Oi({expect:"integer",actual:o}),toString:()=>"Integer"},l2=Sg.refine(a2),af=()=>l2,u2={read:o=>Number.isFinite(o)?o:Oi({expect:"Float",actual:o}),toString:()=>"Float"};Sg.refine(u2);class _g extends Tt{refine(r){return new c2({base:this,schema:r})}startsWith(r){return this.refine(h2(r))}endsWith(r){return this.refine(y2(r))}toString(){return"string()"}}class c2 extends _g{readWith(r,{base:s,schema:l}){const d=s.read(r);return d!=null&&d.error?d:l.read(d)}toString(){return`${this.settings.base}.refine(${this.settings.schema})`}}const d2=new class extends _g{readWith(o){return typeof o=="string"?o:Oi({expect:"string",actual:o})}},zl=()=>d2;class f2 extends Tt{readWith(r,s){return r.startsWith(s)?r:fn(`Expect string to start with "${s}" instead got "${r}"`)}get prefix(){return this.settings}toString(){return`startsWith("${this.prefix}")`}}const h2=o=>new f2(o);class p2 extends Tt{readWith(r,s){return r.endsWith(s)?r:fn(`Expect string to end with "${s}" instead got "${r}"`)}get suffix(){return this.settings}toString(){return`endsWith("${this.suffix}")`}}const y2=o=>new p2(o);class m2 extends Tt{readWith(r,{base:s,schema:l}){const d=s.read(r);return d!=null&&d.error?d:l.read(d)}toString(){return`${this.settings.base}.refine(${this.settings.schema})`}}const g2=(o,r)=>new m2({base:o,schema:r}),fn=o=>new vo(o);class vo extends Error{get name(){return"SchemaError"}get error(){return!0}describe(){return this.name}get message(){return this.describe()}toJSON(){const{error:r,name:s,message:l,stack:d}=this;return{error:r,name:s,message:l,stack:d}}}class w2 extends vo{constructor({expect:r,actual:s}){super(),this.expect=r,this.actual=s}get name(){return"TypeError"}describe(){return`Expected value of type ${this.expect} instead got ${v2(this.actual)}`}}const Oi=o=>new w2(o),v2=o=>{const r=typeof o;switch(r){case"boolean":case"string":return JSON.stringify(o);case"bigint":return`${o}n`;case"number":case"symbol":case"undefined":return String(o);case"object":return o===null?"null":Array.isArray(o)?"array":"object";default:return r}};class b2 extends vo{constructor({at:r,cause:s}){super(),this.at=r,this.cause=s}get name(){return"ElementError"}describe(){return[`Array contains invalid element at ${this.at}:`,Fl(this.cause.message)].join(`
`)}}class k2 extends vo{constructor({at:r,cause:s}){super(),this.at=r,this.cause=s}get name(){return"FieldError"}describe(){return[`Object contains invalid field "${this.at}":`,Fl(this.cause.message)].join(`
`)}}const E2=({at:o,cause:r})=>typeof o=="string"?new k2({at:o,cause:r}):new b2({at:o,cause:r});class Cg extends vo{constructor({causes:r}){super(),this.causes=r}get name(){return"UnionError"}describe(){const{causes:r}=this;return["Value does not match any type of the union:",...r.map(s=>Fl(s.message))].join(`
`)}}class x2 extends vo{constructor({causes:r}){super(),this.causes=r}get name(){return"IntersectionError"}describe(){const{causes:r}=this;return["Value does not match following types of the intersection:",...r.map(s=>Fl(s.message))].join(`
`)}}const Fl=o=>((r,s="  ")=>`${s}${r.split(`
`).join(`
${s}`)}`)(`- ${o}`);class Ng extends Tt{readWith(r,{protocol:s}={}){if(typeof r!="string"&&!(r instanceof URL))return fn("Expected URI but got "+(r===null?"null":typeof r));try{const l=new URL(String(r));return s!=null&&l.protocol!==s?fn(`Expected ${s} URI instead got ${l.href}`):l.href}catch{return fn("Invalid URI")}}}const Ag=new Ng({}),pt=o=>new Ng(o),bo=o=>Ag.from(o);class Tg extends Tt{readWith(r,{code:s,algorithm:l,version:d}){return r==null?fn(`Expected link but got ${r} instead`):mo(r)?s!=null&&r.code!==s?fn(`Expected link to be CID with 0x${s.toString(16)} codec`):l!=null&&r.multihash.code!==l?fn(`Expected link to be CID with 0x${l.toString(16)} hashing algorithm`):d!=null&&r.version!==d?fn(`Expected link to be CID version ${d} instead of ${r.version}`):r:fn(`Expected link to be a CID instead of ${r}`)}}const Vl=new Tg({}),Ig=(o={})=>new Tg(o),Lg=()=>Vl.optional();var Wl=Object.freeze({__proto__:null,create:Os,createLegacy:o=>Ke.create(0,112,o),isLink:mo,parse:Em,schema:Vl,link:()=>Vl,match:Ig,read:o=>Vl.read(o),optional:Lg});class Og extends Tt{readWith(r,s){const l=s?`did:${s}:`:"did:";return r.startsWith(l)?r:fn(`Expected a ${l} but got "${r}" instead`)}}const Pg=zl().refine(new Og),lf=o=>zl().refine(new Og(o.method));At({can:"*",with:Object.freeze({__proto__:null,did:()=>Pg,read:o=>Pg.read(o),match:lf,from:o=>lf({}).from(o)})});var S2=Object.freeze({__proto__:null,default:{}});/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const It=BigInt(0),De=BigInt(1),ko=BigInt(2),Rg=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),nt=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:Rg,n:Rg,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),$g=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Ps=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const _2=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),C2=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),N2=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),A2=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class Ue{constructor(r,s,l,d){this.x=r,this.y=s,this.z=l,this.t=d}static fromAffine(r){if(!(r instanceof dt))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return r.equals(dt.ZERO)?Ue.ZERO:new Ue(r.x,r.y,De,z(r.x*r.y))}static toAffineBatch(r){const s=function(l,d=nt.P){const h=new Array(l.length),y=Zl(l.reduce((g,b,_)=>b===It?g:(h[_]=g,z(g*b,d)),De),d);return l.reduceRight((g,b,_)=>b===It?g:(h[_]=z(g*h[_],d),z(g*b,d)),y),h}(r.map(l=>l.z));return r.map((l,d)=>l.toAffine(s[d]))}static normalizeZ(r){return this.toAffineBatch(r).map(this.fromAffine)}equals(r){Dg(r);const{x:s,y:l,z:d}=this,{x:h,y,z:g}=r,b=z(s*g),_=z(h*d),I=z(l*g),P=z(y*d);return b===_&&I===P}negate(){return new Ue(z(-this.x),this.y,this.z,z(-this.t))}double(){const{x:r,y:s,z:l}=this,{a:d}=nt,h=z(r*r),y=z(s*s),g=z(ko*z(l*l)),b=z(d*h),_=r+s,I=z(z(_*_)-h-y),P=b+y,B=P-g,q=b-y,se=z(I*B),ye=z(P*q),Re=z(I*q),pe=z(B*P);return new Ue(se,ye,pe,Re)}add(r){Dg(r);const{x:s,y:l,z:d,t:h}=this,{x:y,y:g,z:b,t:_}=r,I=z((l-s)*(g+y)),P=z((l+s)*(g-y)),B=z(P-I);if(B===It)return this.double();const q=z(d*ko*_),se=z(h*ko*b),ye=se+q,Re=P+I,pe=se-q,ke=z(ye*B),We=z(Re*pe),qe=z(ye*pe),Qe=z(B*Re);return new Ue(ke,We,Qe,qe)}subtract(r){return this.add(r.negate())}precomputeWindow(r){const s=1+256/r,l=[];let d=this,h=d;for(let y=0;y<s;y++){h=d,l.push(h);for(let g=1;g<2**(r-1);g++)h=h.add(d),l.push(h);d=h.double()}return l}wNAF(r,s){!s&&this.equals(Ue.BASE)&&(s=dt.BASE);const l=s&&s._WINDOW_SIZE||1;if(256%l)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let d=s&&df.get(s);d||(d=this.precomputeWindow(l),s&&l!==1&&(d=Ue.normalizeZ(d),df.set(s,d)));let h=Ue.ZERO,y=Ue.ZERO;const g=1+256/l,b=2**(l-1),_=BigInt(2**l-1),I=2**l,P=BigInt(l);for(let B=0;B<g;B++){const q=B*b;let se=Number(r&_);if(r>>=P,se>b&&(se-=I,r+=De),se===0){let ye=d[q];B%2&&(ye=ye.negate()),y=y.add(ye)}else{let ye=d[q+Math.abs(se)-1];se<0&&(ye=ye.negate()),h=h.add(ye)}}return Ue.normalizeZ([h,y])[0]}multiply(r,s){return this.wNAF(Kl(r,nt.l),s)}multiplyUnsafe(r){let s=Kl(r,nt.l,!1);const l=Ue.BASE,d=Ue.ZERO;if(s===It)return d;if(this.equals(d)||s===De)return this;if(this.equals(l))return this.wNAF(s);let h=d,y=this;for(;s>It;)s&De&&(h=h.add(y)),y=y.double(),s>>=De;return h}isSmallOrder(){return this.multiplyUnsafe(nt.h).equals(Ue.ZERO)}isTorsionFree(){return this.multiplyUnsafe(nt.l).equals(Ue.ZERO)}toAffine(r=Zl(this.z)){const{x:s,y:l,z:d}=this,h=z(s*r),y=z(l*r);if(z(d*r)!==De)throw new Error("invZ was invalid");return new dt(h,y)}fromRistrettoBytes(){cf()}toRistrettoBytes(){cf()}fromRistrettoHash(){cf()}}function Dg(o){if(!(o instanceof Ue))throw new TypeError("ExtendedPoint expected")}function uf(o){if(!(o instanceof vn))throw new TypeError("RistrettoPoint expected")}function cf(){throw new Error("Legacy method: switch to RistrettoPoint")}Ue.BASE=new Ue(nt.Gx,nt.Gy,De,z(nt.Gx*nt.Gy)),Ue.ZERO=new Ue(It,De,De,It);class vn{constructor(r){this.ep=r}static calcElligatorRistrettoMap(r){const{d:s}=nt,l=z(Ps*r*r),d=z((l+De)*N2);let h=BigInt(-1);const y=z((h-s*l)*z(l+s));let{isValid:g,value:b}=pf(d,y),_=z(b*r);Zr(_)||(_=z(-_)),g||(b=_),g||(h=l);const I=z(h*(l-De)*A2-y),P=b*b,B=z((b+b)*y),q=z(I*_2),se=z(De-P),ye=z(De+P);return new Ue(z(B*ye),z(se*q),z(q*ye),z(B*se))}static hashToCurve(r){const s=hf((r=Hr(r,64)).slice(0,32)),l=this.calcElligatorRistrettoMap(s),d=hf(r.slice(32,64)),h=this.calcElligatorRistrettoMap(d);return new vn(l.add(h))}static fromHex(r){r=Hr(r,32);const{a:s,d:l}=nt,d="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",h=hf(r);if(!function(We,qe){if(We.length!==qe.length)return!1;for(let Qe=0;Qe<We.length;Qe++)if(We[Qe]!==qe[Qe])return!1;return!0}(Ds(h),r)||Zr(h))throw new Error(d);const y=z(h*h),g=z(De+s*y),b=z(De-s*y),_=z(g*g),I=z(b*b),P=z(s*l*_-I),{isValid:B,value:q}=jg(z(P*I)),se=z(q*b),ye=z(q*se*P);let Re=z((h+h)*se);Zr(Re)&&(Re=z(-Re));const pe=z(g*ye),ke=z(Re*pe);if(!B||Zr(ke)||pe===It)throw new Error(d);return new vn(new Ue(Re,pe,De,ke))}toRawBytes(){let{x:r,y:s,z:l,t:d}=this.ep;const h=z(z(l+s)*z(l-s)),y=z(r*s),g=z(y*y),{value:b}=jg(z(h*g)),_=z(b*h),I=z(b*y),P=z(_*I*d);let B;if(Zr(d*P)){let se=z(s*Ps),ye=z(r*Ps);r=se,s=ye,B=z(_*C2)}else B=I;Zr(r*P)&&(s=z(-s));let q=z((l-s)*B);return Zr(q)&&(q=z(-q)),Ds(q)}toHex(){return $s(this.toRawBytes())}toString(){return this.toHex()}equals(r){uf(r);const s=this.ep,l=r.ep,d=z(s.x*l.y)===z(s.y*l.x),h=z(s.y*l.y)===z(s.x*l.x);return d||h}add(r){return uf(r),new vn(this.ep.add(r.ep))}subtract(r){return uf(r),new vn(this.ep.subtract(r.ep))}multiply(r){return new vn(this.ep.multiply(r))}multiplyUnsafe(r){return new vn(this.ep.multiplyUnsafe(r))}}vn.BASE=new vn(Ue.BASE),vn.ZERO=new vn(Ue.ZERO);const df=new WeakMap;class dt{constructor(r,s){this.x=r,this.y=s}_setWindowSize(r){this._WINDOW_SIZE=r,df.delete(this)}static fromHex(r,s=!0){const{d:l,P:d}=nt,h=(r=Hr(r,32)).slice();h[31]=-129&r[31];const y=Ms(h);if(s&&y>=d)throw new Error("Expected 0 < hex < P");if(!s&&y>=$g)throw new Error("Expected 0 < hex < 2**256");const g=z(y*y),b=z(g-De),_=z(l*g+De);let{isValid:I,value:P}=pf(b,_);if(!I)throw new Error("Point.fromHex: invalid y coordinate");const B=(P&De)===De;return(128&r[31])!=0!==B&&(P=z(-P)),new dt(P,y)}static async fromPrivateKey(r){return(await Gl(r)).point}toRawBytes(){const r=Ds(this.y);return r[31]|=this.x&De?128:0,r}toHex(){return $s(this.toRawBytes())}toX25519(){const{y:r}=this;return Ds(z((De+r)*Zl(De-r)))}isTorsionFree(){return Ue.fromAffine(this).isTorsionFree()}equals(r){return this.x===r.x&&this.y===r.y}negate(){return new dt(z(-this.x),this.y)}add(r){return Ue.fromAffine(this).add(Ue.fromAffine(r)).toAffine()}subtract(r){return this.add(r.negate())}multiply(r){return Ue.fromAffine(this).multiply(r,this).toAffine()}}dt.BASE=new dt(nt.Gx,nt.Gy),dt.ZERO=new dt(It,De);class Rs{constructor(r,s){this.r=r,this.s=s,this.assertValidity()}static fromHex(r){const s=Hr(r,64),l=dt.fromHex(s.slice(0,32),!1),d=Ms(s.slice(32,64));return new Rs(l,d)}assertValidity(){const{r,s}=this;if(!(r instanceof dt))throw new Error("Expected Point instance");return Kl(s,nt.l,!1),this}toRawBytes(){const r=new Uint8Array(64);return r.set(this.r.toRawBytes()),r.set(Ds(this.s),32),r}toHex(){return $s(this.toRawBytes())}}function Mg(...o){if(!o.every(l=>l instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(o.length===1)return o[0];const r=o.reduce((l,d)=>l+d.length,0),s=new Uint8Array(r);for(let l=0,d=0;l<o.length;l++){const h=o[l];s.set(h,d),d+=h.length}return s}const T2=Array.from({length:256},(o,r)=>r.toString(16).padStart(2,"0"));function $s(o){if(!(o instanceof Uint8Array))throw new Error("Uint8Array expected");let r="";for(let s=0;s<o.length;s++)r+=T2[o[s]];return r}function ff(o){if(typeof o!="string")throw new TypeError("hexToBytes: expected string, got "+typeof o);if(o.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const r=new Uint8Array(o.length/2);for(let s=0;s<r.length;s++){const l=2*s,d=o.slice(l,l+2),h=Number.parseInt(d,16);if(Number.isNaN(h)||h<0)throw new Error("Invalid byte sequence");r[s]=h}return r}function Bg(o){return ff(o.toString(16).padStart(64,"0"))}function Ds(o){return Bg(o).reverse()}function Zr(o){return(z(o)&De)===De}function Ms(o){if(!(o instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+$s(Uint8Array.from(o).reverse()))}const I2=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hf(o){return z(Ms(o)&I2)}function z(o,r=nt.P){const s=o%r;return s>=It?s:r+s}function Zl(o,r=nt.P){if(o===It||r<=It)throw new Error(`invert: expected positive integers, got n=${o} mod=${r}`);let s=z(o,r),l=r,d=It,h=De;for(;s!==It;){const y=l%s,g=d-h*(l/s);l=s,s=y,d=h,h=g}if(l!==De)throw new Error("invert: does not exist");return z(d,r)}function Xn(o,r){const{P:s}=nt;let l=o;for(;r-- >It;)l*=l,l%=s;return l}function pf(o,r){const s=z(r*r*r),l=function(P){const{P:B}=nt,q=BigInt(5),se=BigInt(10),ye=BigInt(20),Re=BigInt(40),pe=BigInt(80),ke=P*P%B*P%B,We=Xn(ke,ko)*ke%B,qe=Xn(We,De)*P%B,Qe=Xn(qe,q)*qe%B,Yt=Xn(Qe,se)*Qe%B,Fi=Xn(Yt,ye)*Yt%B,Uf=Xn(Fi,Re)*Fi%B,OC=Xn(Uf,pe)*Uf%B,PC=Xn(OC,pe)*Uf%B,RC=Xn(PC,se)*Qe%B;return{pow_p_5_8:Xn(RC,ko)*P%B,b2:ke}}(o*z(s*s*r)).pow_p_5_8;let d=z(o*s*l);const h=z(r*d*d),y=d,g=z(d*Ps),b=h===o,_=h===z(-o),I=h===z(-o*Ps);return b&&(d=y),(_||I)&&(d=g),Zr(d)&&(d=z(-d)),{isValid:b||_,value:d}}function jg(o){return pf(De,o)}function Hl(o){return z(Ms(o),nt.l)}function Hr(o,r){const s=o instanceof Uint8Array?Uint8Array.from(o):ff(o);if(typeof r=="number"&&s.length!==r)throw new Error(`Expected ${r} bytes`);return s}function Kl(o,r,s=!0){if(!r)throw new TypeError("Specify max value");if(typeof o=="number"&&Number.isSafeInteger(o)&&(o=BigInt(o)),typeof o=="bigint"&&o<r){if(s){if(It<o)return o}else if(It<=o)return o}throw new TypeError("Expected valid scalar: 0 < scalar < max")}let yf;async function Gl(o){return function(r){const s=((l=r.slice(0,32))[0]&=248,l[31]&=127,l[31]|=64,l);var l;const d=r.slice(32,64),h=Hl(s),y=dt.BASE.multiply(h),g=y.toRawBytes();return{head:s,prefix:d,scalar:h,point:y,pointBytes:g}}(await Pi.sha512(function(r){if((r=typeof r=="bigint"||typeof r=="number"?Bg(Kl(r,$g)):Hr(r)).length!==32)throw new Error("Expected 32 bytes");return r}(o)))}async function L2(o,r,s){const{r:l,SB:d,msg:h,pub:y}=function(b,_,I){_=Hr(_),I instanceof dt||(I=dt.fromHex(I,!1));const{r:P,s:B}=b instanceof Rs?b.assertValidity():Rs.fromHex(b);return{r:P,s:B,SB:Ue.BASE.multiplyUnsafe(B),pub:I,msg:_}}(o,r,s),g=await Pi.sha512(l.toRawBytes(),y.toRawBytes(),h);return function(b,_,I,P){const B=Hl(P),q=Ue.fromAffine(b).multiplyUnsafe(B);return Ue.fromAffine(_).add(q).subtract(I).multiplyUnsafe(nt.h).equals(Ue.ZERO)}(y,l,d,g)}dt.BASE._setWindowSize(8);const Kr={node:S2,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Pi={bytesToHex:$s,hexToBytes:ff,concatBytes:Mg,getExtendedPublicKey:Gl,mod:z,invert:Zl,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:o=>{if((o=Hr(o)).length<40||o.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return z(Ms(o),nt.l-De)+De},randomBytes:(o=32)=>{if(Kr.web)return Kr.web.getRandomValues(new Uint8Array(o));if(Kr.node){const{randomBytes:r}=Kr.node;return new Uint8Array(r(o).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Pi.randomBytes(32),sha512:async(...o)=>{const r=Mg(...o);if(Kr.web){const s=await Kr.web.subtle.digest("SHA-512",r.buffer);return new Uint8Array(s)}if(Kr.node)return Uint8Array.from(Kr.node.createHash("sha512").update(r).digest());throw new Error("The environment doesn't have sha512 function")},precompute(o=8,r=dt.BASE){const s=r.equals(dt.BASE)?r:new dt(r.x,r.y);return s._setWindowSize(o),s.multiply(ko),s},sha512Sync:void 0};Object.defineProperties(Pi,{sha512Sync:{configurable:!1,get:()=>yf,set(o){yf||(yf=o)}}});const Ug=(o,r)=>new mf([o,r]);class mf{constructor(r){this.variants=r}parse(r){return((s,l)=>{if(s.startsWith("did:")){for(const d of l)try{return d.parse(s)}catch{}throw new Error(`Unsupported did ${s}`)}throw new Error(`Expected did instead got ${s}`)})(r,this.variants)}or(r){return new mf([...this.variants,r])}}const gf=(o,r)=>new O2(r,o);class O2{constructor(r,s){this.id=r,this.key=s}did(){return this.id}toDIDKey(){return this.key.toDIDKey()}verify(r,s){return this.key.verify(r,s)}withDID(r){return gf(this.key,r)}}const Ri=237,zg="EdDSA",Fg=Y(Ri),Vg=32+Fg,Wg=o=>Zg(Jn(o)),Zg=o=>{const[r]=W(o);if(r!==Ri)throw new RangeError(`Unsupported key algorithm with multicode 0x${Ri.toString(16)}`);if(o.byteLength!==Vg)throw new RangeError(`Expected Uint8Array with byteLength ${Vg}, instead got Uint8Array with byteLength ${o.byteLength}`);return new P2(o.buffer,o.byteOffset,o.byteLength)};class P2 extends Uint8Array{get code(){return Ri}get signatureCode(){return 53485}get signatureAlgorithm(){return zg}get publicKey(){const r=new Uint8Array(this.buffer,this.byteOffset+Fg);return Object.defineProperties(this,{publicKey:{value:r}}),r}did(){return`did:key:${dn.encode(this)}`}verify(r,s){return s.code===53485&&L2(s.raw,r,this.publicKey)}withDID(r){return gf(this,r)}toDIDKey(){return this.did()}}const Hg=(o,r)=>new wf([o,r]);class wf{constructor(r){this.variants=r,this.from=R2(r)}or(r){return new wf([r,...this.variants])}}const R2=o=>r=>{if(r.id.startsWith("did:key:"))return Kg(r,o);for(const[s,l]of Object.entries(r.keys))return Kg({id:s,keys:{[s]:l}},o).withDID(r.id);throw new Error(`Archive ${r.id} contains no keys`)},Kg=(o,r)=>{for(const s of r)try{return s.from(o)}catch{}throw new Error("Unsupported signer")},Ql=({signer:o,verifier:r},s)=>new $2(o,r.withDID(s));class $2{constructor(r,s){this.key=r,this.verifier=s}get signer(){return this}get signatureAlgorithm(){return this.key.signatureAlgorithm}get signatureCode(){return this.key.signatureCode}did(){return this.verifier.did()}toDIDKey(){return this.verifier.toDIDKey()}withDID(r){return Ql(this.key,r)}sign(r){return this.key.sign(r)}verify(r,s){return this.verifier.verify(r,s)}toArchive(){const{keys:r}=this.key.toArchive();return{id:this.did(),keys:r}}}const ql=4864,D2=zg,$i=Y(ql),Gg=Y(Ri),Gr=32,vf=$i+Gr+Gg+Gr,M2=$i+Gr,Qg=()=>B2(Pi.randomPrivateKey()),B2=async o=>{if(o.byteLength!==Gr)throw new Error(`Expected Uint8Array with byteLength of 32 instead not ${o.byteLength}`);const r=await async function(l){return(await Gl(l)).pointBytes}(o),s=new qg(vf);return F(ql,s,0),s.set(o,$i),F(Ri,s,$i+Gr),s.set(r,$i+Gr+Gg),s},j2=({id:o,keys:r})=>{if(o.startsWith("did:key:")){const s=r[o];if(s instanceof Uint8Array)return U2(s)}throw new TypeError("Unsupported archive format")},U2=o=>{if(o.byteLength!==vf)throw new Error(`Expected Uint8Array with byteLength of ${vf} instead not ${o.byteLength}`);{const[r]=W(o);if(r!==ql)throw new Error("Given bytes must be a multiformat with 4864 tag")}{const[r]=W(o.subarray(M2));if(r!==Ri)throw new Error("Given bytes must contain public key in multiformats with 237 tag")}return new qg(o)};class qg extends Uint8Array{get code(){return ql}get signer(){return this}get verifier(){const r=new Uint8Array(this.buffer,$i+Gr),s=Zg(r);return Object.defineProperties(this,{verifier:{value:s}}),s}get secret(){const r=new Uint8Array(this.buffer,$i,Gr);return Object.defineProperties(this,{secret:{value:r}}),r}did(){return this.verifier.did()}toDIDKey(){return this.verifier.toDIDKey()}withDID(r){return Ql(this,r)}async sign(r){const s=await async function(l,d){l=Hr(l);const{prefix:h,scalar:y,pointBytes:g}=await Gl(d),b=Hl(await Pi.sha512(h,l)),_=dt.BASE.multiply(b),I=z(b+Hl(await Pi.sha512(_.toRawBytes(),g,l))*y,nt.l);return new Rs(_,I).toRawBytes()}(r,this.secret);return Fd(this.signatureCode,s)}verify(r,s){return this.verifier.verify(r,s)}get signatureAlgorithm(){return D2}get signatureCode(){return jd}encode(){return this}toArchive(){const r=this.did();return{id:r,keys:{[r]:this.encode()}}}}function Jg(o){return globalThis.Buffer!=null?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):o}const z2=Il({prefix:"\0",name:"identity",encode:o=>{return r=o,new TextDecoder().decode(r);var r},decode:o=>(r=>new TextEncoder().encode(r))(o)});var F2=Object.freeze({__proto__:null,identity:z2});const V2=Nt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var W2=Object.freeze({__proto__:null,base2:V2});const Z2=Nt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var H2=Object.freeze({__proto__:null,base8:Z2});const K2=As({prefix:"9",name:"base10",alphabet:"0123456789"});var G2=Object.freeze({__proto__:null,base10:K2});const Q2=Nt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),q2=Nt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var J2=Object.freeze({__proto__:null,base16:Q2,base16upper:q2});const Y2=As({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),X2=As({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var e_=Object.freeze({__proto__:null,base36:Y2,base36upper:X2});const Yg=Array.from(""),t_=Yg.reduce((o,r,s)=>(o[s]=r,o),[]),n_=Yg.reduce((o,r,s)=>(o[r.codePointAt(0)]=s,o),[]),r_=Il({prefix:"",name:"base256emoji",encode:function(o){return o.reduce((r,s)=>r+=t_[s],"")},decode:function(o){const r=[];for(const s of o){const l=n_[s.codePointAt(0)];if(l===void 0)throw new Error(`Non-base256emoji character: ${s}`);r.push(l)}return new Uint8Array(r)}});var i_=Object.freeze({__proto__:null,base256emoji:r_});new TextEncoder,new TextDecoder;const Xg={...F2,...W2,...H2,...G2,...J2,...XE,...e_,...WE,...px,...i_};function ew(o,r,s,l){return{name:o,prefix:r,encoder:{name:o,prefix:r,encode:s},decoder:{decode:l}}}const tw=ew("utf8","u",o=>"u"+new TextDecoder("utf8").decode(o),o=>new TextEncoder().encode(o.substring(1))),bf=ew("ascii","a",o=>{let r="a";for(let s=0;s<o.length;s++)r+=String.fromCharCode(o[s]);return r},o=>{const r=function(s=0){var l;return((l=globalThis.Buffer)==null?void 0:l.allocUnsafe)!=null?Jg(globalThis.Buffer.allocUnsafe(s)):new Uint8Array(s)}((o=o.substring(1)).length);for(let s=0;s<o.length;s++)r[s]=o.charCodeAt(s);return r}),nw={utf8:tw,"utf-8":tw,hex:Xg.base16,latin1:bf,ascii:bf,binary:bf,...Xg};function Jl(o,r="utf8"){const s=nw[r];if(s==null)throw new Error(`Unsupported encoding "${r}"`);return r!=="utf8"&&r!=="utf-8"||globalThis.Buffer==null||globalThis.Buffer.from==null?s.decoder.decode(`${s.prefix}${o}`):Jg(globalThis.Buffer.from(o,"utf-8"))}function rw(o,r="utf8"){const s=nw[r];if(s==null)throw new Error(`Unsupported encoding "${r}"`);return r!=="utf8"&&r!=="utf-8"||globalThis.Buffer==null||globalThis.Buffer.from==null?s.encoder.encode(o).substring(1):globalThis.Buffer.from(o.buffer,o.byteOffset,o.byteLength).toString("utf8")}const Qr={Null:o=>o===null,Int:o=>Number.isInteger(o),Float:o=>typeof o=="number"&&Number.isFinite(o),String:o=>typeof o=="string",Bool:o=>typeof o=="boolean",Bytes:o=>o instanceof Uint8Array,Link:o=>!Qr.Null(o)&&typeof o=="object"&&o.asCID===o,List:o=>Array.isArray(o),Map:o=>!Qr.Null(o)&&typeof o=="object"&&o.asCID!==o&&!Qr.List(o)&&!Qr.Bytes(o)},Eo={Int:Qr.Int,"CarHeader > version":o=>Eo.Int(o),"CarHeader > roots (anon) > valueType (anon)":Qr.Link,"CarHeader > roots (anon)":o=>Qr.List(o)&&Array.prototype.every.call(o,Eo["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":o=>Eo["CarHeader > roots (anon)"](o),CarHeader:o=>{const r=o&&Object.keys(o);return Qr.Map(o)&&["version"].every(s=>r.includes(s))&&Object.entries(o).every(([s,l])=>Eo["CarHeader > "+s]&&Eo["CarHeader > "+s](l))}},o_=Eo.CarHeader,s_=18,a_=32,l_=112;function Yl(o){const r=o.upTo(8);if(r.length===0)throw new Error("Unexpected end of data");const s=bt.decode(r);return o.seek(bt.decode.bytes),s}function u_(o){const r=o.exactly(2);if(r[0]===s_&&r[1]===a_){const y=o.exactly(34);o.seek(34);const g=$e(y);return Ke.create(0,l_,g)}const s=Yl(o);if(s!==1)throw new Error(`Unexpected CID version (${s})`);const l=Yl(o),d=function(y){const g=y.upTo(8);bt.decode(g);const b=bt.decode.bytes,_=bt.decode(g.subarray(bt.decode.bytes)),I=b+bt.decode.bytes+_,P=y.exactly(I);return y.seek(I),P}(o),h=$e(d);return Ke.create(s,l,h)}function iw(o){const r=o.pos;let s=Yl(o);if(s===0)throw new Error("Invalid CAR section (zero length)");return s+=o.pos-r,{cid:u_(o),length:s,blockLength:s-Number(o.pos-r)}}function c_(o){const{cid:r,blockLength:s}=iw(o),l=o.exactly(s);return o.seek(s),{bytes:l,cid:r}}function ow(o,r){const s=Yl(o);if(s===0)throw new Error("Invalid CAR header (zero length)");const l=o.exactly(s);o.seek(s);const d=Is(l);if(!o_(d))throw new Error("Invalid CAR header format");if(d.version!==1&&d.version!==2||r!==void 0&&d.version!==r)throw new Error(`Invalid CAR version: ${d.version}${r===void 0?"":` (expected ${r})`}`);const h=Array.isArray(d.roots);if(d.version===1&&!h||d.version===2&&h)throw new Error("Invalid CAR header format");if(d.version===1)return d;const y=function(b){const _=b.exactly(40),I=new DataView(_.buffer,_.byteOffset,_.byteLength);let P=0;const B={version:2,characteristics:[I.getBigUint64(P,!0),I.getBigUint64(P+=8,!0)],dataOffset:Number(I.getBigUint64(P+=8,!0)),dataSize:Number(I.getBigUint64(P+=8,!0)),indexOffset:Number(I.getBigUint64(P+=8,!0))};return b.seek(40),B}(o);o.seek(y.dataOffset-o.pos);const g=ow(o,1);return Object.assign(g,y)}function d_(o){const r=ow(o);if(r.version===2){const s=o.pos-r.dataOffset;o=function(l,d){let h=0;return{upTo(y){let g=l.upTo(y);return g.length+h>d&&(g=g.subarray(0,d-h)),g},exactly(y){const g=l.exactly(y);if(g.length+h>d)throw new Error("Unexpected end of data");return g},seek(y){h+=y,l.seek(y)},get pos(){return l.pos}}}(o,r.dataSize-s)}return{header:()=>r,*blocks(){for(;o.upTo(8).length>0;)yield c_(o)},*blocksIndex(){for(;o.upTo(8).length>0;)yield f_(o)}}}function f_(o){const r=o.pos,{cid:s,length:l,blockLength:d}=iw(o),h={cid:s,length:l,blockLength:d,offset:r,blockOffset:o.pos};return o.seek(h.blockLength),h}class kf{constructor(r,s){this._header=r,this._blocks=s,this._keys=s.map(l=>l.cid.toString())}get version(){return this._header.version}getRoots(){return this._header.roots}has(r){return this._keys.indexOf(r.toString())>-1}get(r){const s=this._keys.indexOf(r.toString());return s>-1?this._blocks[s]:void 0}*blocks(){for(const r of this._blocks)yield r}*cids(){for(const r of this._blocks)yield r.cid}static fromBytes(r){if(!(r instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return function(s){const l=d_(s),d=l.header(),h=[];for(const y of l.blocks())h.push(y);return new kf(d,h)}(function(s){let l=0;return{upTo:d=>s.subarray(l,l+Math.min(d,s.length-l)),exactly(d){if(d>s.length-l)throw new Error("Unexpected end of data");return s.subarray(l,l+d)},seek(d){l+=d},get pos(){return l}}}(r))}}function h_(o){if(!Array.isArray(o)||o.length===0)throw new Error("Delegations required to be an non empty array.");const r=o.map(g=>g.root.cid),s=new Set,l=[];let d=0;for(const g of o)for(const b of g.export()){const _=b.cid.toV1().toString();s.has(_)||(d+=Yd(b),l.push(b),s.add(_))}const h=((g,b=36)=>tg(new Array(g).fill(b)))(r.length),y=ng(new ArrayBuffer(h+d),{roots:r});for(const g of l)y.write(g);return y.close()}function p_(o,r="base64url"){return rw(h_(o),r)}function sw(o,r="base64url"){return function(s){if(!(s instanceof Uint8Array)||s.length===0)throw new TypeError("Input should be a non-empty Uint8Array.");const l=kf.fromBytes(s),d=l.getRoots(),h=[];for(const y of d){const g=l.get(y);if(!g)throw new Error("Failed to find root from raw delegation.");{const b=new Map;for(const _ of l.blocks())_.cid.toString()!==y.toString()&&b.set(_.cid.toString(),_);h.push(new Dl(g,b))}}return h}(Jl(o,r))}function aw(o,r){return sw(o,r)[0]}var Me;(function(o){o.assertEqual=r=>r,o.assertIs=function(r){},o.assertNever=function(r){throw new Error},o.arrayToEnum=r=>{const s={};for(const l of r)s[l]=l;return s},o.getValidEnumValues=r=>{const s=o.objectKeys(r).filter(d=>typeof r[r[d]]!="number"),l={};for(const d of s)l[d]=r[d];return o.objectValues(l)},o.objectValues=r=>o.objectKeys(r).map(function(s){return r[s]}),o.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const l in r)Object.prototype.hasOwnProperty.call(r,l)&&s.push(l);return s},o.find=(r,s)=>{for(const l of r)if(s(l))return l},o.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r,o.joinValues=function(r,s=" | "){return r.map(l=>typeof l=="string"?`'${l}'`:l).join(s)},o.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(Me||(Me={}));const X=Me.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),qr=o=>{switch(typeof o){case"undefined":return X.undefined;case"string":return X.string;case"number":return isNaN(o)?X.nan:X.number;case"boolean":return X.boolean;case"function":return X.function;case"bigint":return X.bigint;case"symbol":return X.symbol;case"object":return Array.isArray(o)?X.array:o===null?X.null:o.then&&typeof o.then=="function"&&o.catch&&typeof o.catch=="function"?X.promise:typeof Map<"u"&&o instanceof Map?X.map:typeof Set<"u"&&o instanceof Set?X.set:typeof Date<"u"&&o instanceof Date?X.date:X.object;default:return X.unknown}},K=Me.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class pr extends Error{constructor(r){super(),this.issues=[],this.addIssue=l=>{this.issues=[...this.issues,l]},this.addIssues=(l=[])=>{this.issues=[...this.issues,...l]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=r}get errors(){return this.issues}format(r){const s=r||function(h){return h.message},l={_errors:[]},d=h=>{for(const y of h.issues)if(y.code==="invalid_union")y.unionErrors.map(d);else if(y.code==="invalid_return_type")d(y.returnTypeError);else if(y.code==="invalid_arguments")d(y.argumentsError);else if(y.path.length===0)l._errors.push(s(y));else{let g=l,b=0;for(;b<y.path.length;){const _=y.path[b];b===y.path.length-1?(g[_]=g[_]||{_errors:[]},g[_]._errors.push(s(y))):g[_]=g[_]||{_errors:[]},g=g[_],b++}}};return d(this),l}toString(){return this.message}get message(){return JSON.stringify(this.issues,Me.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(r=s=>s.message){const s={},l=[];for(const d of this.issues)d.path.length>0?(s[d.path[0]]=s[d.path[0]]||[],s[d.path[0]].push(r(d))):l.push(r(d));return{formErrors:l,fieldErrors:s}}get formErrors(){return this.flatten()}}pr.create=o=>new pr(o);const Bs=(o,r)=>{let s;switch(o.code){case K.invalid_type:s=o.received===X.undefined?"Required":`Expected ${o.expected}, received ${o.received}`;break;case K.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(o.expected,Me.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:s=`Unrecognized key(s) in object: ${Me.joinValues(o.keys,", ")}`;break;case K.invalid_union:s="Invalid input";break;case K.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${Me.joinValues(o.options)}`;break;case K.invalid_enum_value:s=`Invalid enum value. Expected ${Me.joinValues(o.options)}, received '${o.received}'`;break;case K.invalid_arguments:s="Invalid function arguments";break;case K.invalid_return_type:s="Invalid function return type";break;case K.invalid_date:s="Invalid date";break;case K.invalid_string:typeof o.validation=="object"?"startsWith"in o.validation?s=`Invalid input: must start with "${o.validation.startsWith}"`:"endsWith"in o.validation?s=`Invalid input: must end with "${o.validation.endsWith}"`:Me.assertNever(o.validation):s=o.validation!=="regex"?`Invalid ${o.validation}`:"Invalid";break;case K.too_small:s=o.type==="array"?`Array must contain ${o.exact?"exactly":o.inclusive?"at least":"more than"} ${o.minimum} element(s)`:o.type==="string"?`String must contain ${o.exact?"exactly":o.inclusive?"at least":"over"} ${o.minimum} character(s)`:o.type==="number"?`Number must be ${o.exact?"exactly equal to ":o.inclusive?"greater than or equal to ":"greater than "}${o.minimum}`:o.type==="date"?`Date must be ${o.exact?"exactly equal to ":o.inclusive?"greater than or equal to ":"greater than "}${new Date(o.minimum)}`:"Invalid input";break;case K.too_big:s=o.type==="array"?`Array must contain ${o.exact?"exactly":o.inclusive?"at most":"less than"} ${o.maximum} element(s)`:o.type==="string"?`String must contain ${o.exact?"exactly":o.inclusive?"at most":"under"} ${o.maximum} character(s)`:o.type==="number"?`Number must be ${o.exact?"exactly":o.inclusive?"less than or equal to":"less than"} ${o.maximum}`:o.type==="date"?`Date must be ${o.exact?"exactly":o.inclusive?"smaller than or equal to":"smaller than"} ${new Date(o.maximum)}`:"Invalid input";break;case K.custom:s="Invalid input";break;case K.invalid_intersection_types:s="Intersection results could not be merged";break;case K.not_multiple_of:s=`Number must be a multiple of ${o.multipleOf}`;break;case K.not_finite:s="Number must be finite";break;default:s=r.defaultError,Me.assertNever(o)}return{message:s}};let lw=Bs;function Xl(){return lw}const eu=o=>{const{data:r,path:s,errorMaps:l,issueData:d}=o,h=[...s,...d.path||[]],y={...d,path:h};let g="";const b=l.filter(_=>!!_).slice().reverse();for(const _ of b)g=_(y,{data:r,defaultError:g}).message;return{...d,path:h,message:d.message||g}};function le(o,r){const s=eu({issueData:r,data:o.data,path:o.path,errorMaps:[o.common.contextualErrorMap,o.schemaErrorMap,Xl(),Bs].filter(l=>!!l)});o.common.issues.push(s)}class Zt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(r,s){const l=[];for(const d of s){if(d.status==="aborted")return ve;d.status==="dirty"&&r.dirty(),l.push(d.value)}return{status:r.value,value:l}}static async mergeObjectAsync(r,s){const l=[];for(const d of s)l.push({key:await d.key,value:await d.value});return Zt.mergeObjectSync(r,l)}static mergeObjectSync(r,s){const l={};for(const d of s){const{key:h,value:y}=d;if(h.status==="aborted"||y.status==="aborted")return ve;h.status==="dirty"&&r.dirty(),y.status==="dirty"&&r.dirty(),(y.value!==void 0||d.alwaysSet)&&(l[h.value]=y.value)}return{status:r.value,value:l}}}const ve=Object.freeze({status:"aborted"}),uw=o=>({status:"dirty",value:o}),Bt=o=>({status:"valid",value:o}),Ef=o=>o.status==="aborted",xf=o=>o.status==="dirty",tu=o=>o.status==="valid",nu=o=>typeof Promise!==void 0&&o instanceof Promise;var Ie;(function(o){o.errToObj=r=>typeof r=="string"?{message:r}:r||{},o.toString=r=>typeof r=="string"?r:r==null?void 0:r.message})(Ie||(Ie={}));class er{constructor(r,s,l,d){this.parent=r,this.data=s,this._path=l,this._key=d}get path(){return this._path.concat(this._key)}}const cw=(o,r)=>{if(tu(r))return{success:!0,data:r.value};if(!o.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new pr(o.common.issues)}};function Ae(o){if(!o)return{};const{errorMap:r,invalid_type_error:s,required_error:l,description:d}=o;if(r&&(s||l))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return r?{errorMap:r,description:d}:{errorMap:(h,y)=>h.code!=="invalid_type"?{message:y.defaultError}:y.data===void 0?{message:l??y.defaultError}:{message:s??y.defaultError},description:d}}class Ce{constructor(r){this.spa=this.safeParseAsync,this._def=r,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(r){return qr(r.data)}_getOrReturnCtx(r,s){return s||{common:r.parent.common,data:r.data,parsedType:qr(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}_processInputParams(r){return{status:new Zt,ctx:{common:r.parent.common,data:r.data,parsedType:qr(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}}_parseSync(r){const s=this._parse(r);if(nu(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(r){const s=this._parse(r);return Promise.resolve(s)}parse(r,s){const l=this.safeParse(r,s);if(l.success)return l.data;throw l.error}safeParse(r,s){var l;const d={common:{issues:[],async:(l=s==null?void 0:s.async)!==null&&l!==void 0&&l,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:qr(r)},h=this._parseSync({data:r,path:d.path,parent:d});return cw(d,h)}async parseAsync(r,s){const l=await this.safeParseAsync(r,s);if(l.success)return l.data;throw l.error}async safeParseAsync(r,s){const l={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:qr(r)},d=this._parse({data:r,path:l.path,parent:l}),h=await(nu(d)?d:Promise.resolve(d));return cw(l,h)}refine(r,s){const l=d=>typeof s=="string"||s===void 0?{message:s}:typeof s=="function"?s(d):s;return this._refinement((d,h)=>{const y=r(d),g=()=>h.addIssue({code:K.custom,...l(d)});return typeof Promise<"u"&&y instanceof Promise?y.then(b=>!!b||(g(),!1)):!!y||(g(),!1)})}refinement(r,s){return this._refinement((l,d)=>!!r(l)||(d.addIssue(typeof s=="function"?s(l,d):s),!1))}_refinement(r){return new Rn({schema:this,typeName:we.ZodEffects,effect:{type:"refinement",refinement:r}})}superRefine(r){return this._refinement(r)}optional(){return nr.create(this)}nullable(){return ji.create(this)}nullish(){return this.optional().nullable()}array(){return Pn.create(this)}promise(){return Co.create(this)}or(r){return Vs.create([this,r])}and(r){return Ws.create(this,r)}transform(r){return new Rn({schema:this,typeName:we.ZodEffects,effect:{type:"transform",transform:r}})}default(r){return new Qs({innerType:this,defaultValue:typeof r=="function"?r:()=>r,typeName:we.ZodDefault})}brand(){return new hw({typeName:we.ZodBranded,type:this,...Ae(void 0)})}catch(r){return new cu({innerType:this,defaultValue:typeof r=="function"?r:()=>r,typeName:we.ZodCatch})}describe(r){return new this.constructor({...this._def,description:r})}pipe(r){return qs.create(this,r)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const y_=/^c[^\s-]{8,}$/i,m_=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,g_=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;class yr extends Ce{constructor(){super(...arguments),this._regex=(r,s,l)=>this.refinement(d=>r.test(d),{validation:s,code:K.invalid_string,...Ie.errToObj(l)}),this.nonempty=r=>this.min(1,Ie.errToObj(r)),this.trim=()=>new yr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(r){if(this._def.coerce&&(r.data=String(r.data)),this._getType(r)!==X.string){const h=this._getOrReturnCtx(r);return le(h,{code:K.invalid_type,expected:X.string,received:h.parsedType}),ve}const s=new Zt;let l;for(const h of this._def.checks)if(h.kind==="min")r.data.length<h.value&&(l=this._getOrReturnCtx(r,l),le(l,{code:K.too_small,minimum:h.value,type:"string",inclusive:!0,exact:!1,message:h.message}),s.dirty());else if(h.kind==="max")r.data.length>h.value&&(l=this._getOrReturnCtx(r,l),le(l,{code:K.too_big,maximum:h.value,type:"string",inclusive:!0,exact:!1,message:h.message}),s.dirty());else if(h.kind==="length"){const y=r.data.length>h.value,g=r.data.length<h.value;(y||g)&&(l=this._getOrReturnCtx(r,l),y?le(l,{code:K.too_big,maximum:h.value,type:"string",inclusive:!0,exact:!0,message:h.message}):g&&le(l,{code:K.too_small,minimum:h.value,type:"string",inclusive:!0,exact:!0,message:h.message}),s.dirty())}else if(h.kind==="email")g_.test(r.data)||(l=this._getOrReturnCtx(r,l),le(l,{validation:"email",code:K.invalid_string,message:h.message}),s.dirty());else if(h.kind==="uuid")m_.test(r.data)||(l=this._getOrReturnCtx(r,l),le(l,{validation:"uuid",code:K.invalid_string,message:h.message}),s.dirty());else if(h.kind==="cuid")y_.test(r.data)||(l=this._getOrReturnCtx(r,l),le(l,{validation:"cuid",code:K.invalid_string,message:h.message}),s.dirty());else if(h.kind==="url")try{new URL(r.data)}catch{l=this._getOrReturnCtx(r,l),le(l,{validation:"url",code:K.invalid_string,message:h.message}),s.dirty()}else h.kind==="regex"?(h.regex.lastIndex=0,h.regex.test(r.data)||(l=this._getOrReturnCtx(r,l),le(l,{validation:"regex",code:K.invalid_string,message:h.message}),s.dirty())):h.kind==="trim"?r.data=r.data.trim():h.kind==="startsWith"?r.data.startsWith(h.value)||(l=this._getOrReturnCtx(r,l),le(l,{code:K.invalid_string,validation:{startsWith:h.value},message:h.message}),s.dirty()):h.kind==="endsWith"?r.data.endsWith(h.value)||(l=this._getOrReturnCtx(r,l),le(l,{code:K.invalid_string,validation:{endsWith:h.value},message:h.message}),s.dirty()):h.kind==="datetime"?((d=h).precision?d.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${d.precision}}(([+-]\\d{2}:\\d{2})|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${d.precision}}Z$`):d.precision===0?d.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}:\\d{2})|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):d.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}:\\d{2})|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(r.data)||(l=this._getOrReturnCtx(r,l),le(l,{code:K.invalid_string,validation:"datetime",message:h.message}),s.dirty()):Me.assertNever(h);var d;return{status:s.value,value:r.data}}_addCheck(r){return new yr({...this._def,checks:[...this._def.checks,r]})}email(r){return this._addCheck({kind:"email",...Ie.errToObj(r)})}url(r){return this._addCheck({kind:"url",...Ie.errToObj(r)})}uuid(r){return this._addCheck({kind:"uuid",...Ie.errToObj(r)})}cuid(r){return this._addCheck({kind:"cuid",...Ie.errToObj(r)})}datetime(r){var s;return typeof r=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:r}):this._addCheck({kind:"datetime",precision:(r==null?void 0:r.precision)===void 0?null:r==null?void 0:r.precision,offset:(s=r==null?void 0:r.offset)!==null&&s!==void 0&&s,...Ie.errToObj(r==null?void 0:r.message)})}regex(r,s){return this._addCheck({kind:"regex",regex:r,...Ie.errToObj(s)})}startsWith(r,s){return this._addCheck({kind:"startsWith",value:r,...Ie.errToObj(s)})}endsWith(r,s){return this._addCheck({kind:"endsWith",value:r,...Ie.errToObj(s)})}min(r,s){return this._addCheck({kind:"min",value:r,...Ie.errToObj(s)})}max(r,s){return this._addCheck({kind:"max",value:r,...Ie.errToObj(s)})}length(r,s){return this._addCheck({kind:"length",value:r,...Ie.errToObj(s)})}get isDatetime(){return!!this._def.checks.find(r=>r.kind==="datetime")}get isEmail(){return!!this._def.checks.find(r=>r.kind==="email")}get isURL(){return!!this._def.checks.find(r=>r.kind==="url")}get isUUID(){return!!this._def.checks.find(r=>r.kind==="uuid")}get isCUID(){return!!this._def.checks.find(r=>r.kind==="cuid")}get minLength(){let r=null;for(const s of this._def.checks)s.kind==="min"&&(r===null||s.value>r)&&(r=s.value);return r}get maxLength(){let r=null;for(const s of this._def.checks)s.kind==="max"&&(r===null||s.value<r)&&(r=s.value);return r}}function w_(o,r){const s=(o.toString().split(".")[1]||"").length,l=(r.toString().split(".")[1]||"").length,d=s>l?s:l;return parseInt(o.toFixed(d).replace(".",""))%parseInt(r.toFixed(d).replace(".",""))/Math.pow(10,d)}yr.create=o=>{var r;return new yr({checks:[],typeName:we.ZodString,coerce:(r=o==null?void 0:o.coerce)!==null&&r!==void 0&&r,...Ae(o)})};class Jr extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(r){if(this._def.coerce&&(r.data=Number(r.data)),this._getType(r)!==X.number){const d=this._getOrReturnCtx(r);return le(d,{code:K.invalid_type,expected:X.number,received:d.parsedType}),ve}let s;const l=new Zt;for(const d of this._def.checks)d.kind==="int"?Me.isInteger(r.data)||(s=this._getOrReturnCtx(r,s),le(s,{code:K.invalid_type,expected:"integer",received:"float",message:d.message}),l.dirty()):d.kind==="min"?(d.inclusive?r.data<d.value:r.data<=d.value)&&(s=this._getOrReturnCtx(r,s),le(s,{code:K.too_small,minimum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),l.dirty()):d.kind==="max"?(d.inclusive?r.data>d.value:r.data>=d.value)&&(s=this._getOrReturnCtx(r,s),le(s,{code:K.too_big,maximum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),l.dirty()):d.kind==="multipleOf"?w_(r.data,d.value)!==0&&(s=this._getOrReturnCtx(r,s),le(s,{code:K.not_multiple_of,multipleOf:d.value,message:d.message}),l.dirty()):d.kind==="finite"?Number.isFinite(r.data)||(s=this._getOrReturnCtx(r,s),le(s,{code:K.not_finite,message:d.message}),l.dirty()):Me.assertNever(d);return{status:l.value,value:r.data}}gte(r,s){return this.setLimit("min",r,!0,Ie.toString(s))}gt(r,s){return this.setLimit("min",r,!1,Ie.toString(s))}lte(r,s){return this.setLimit("max",r,!0,Ie.toString(s))}lt(r,s){return this.setLimit("max",r,!1,Ie.toString(s))}setLimit(r,s,l,d){return new Jr({...this._def,checks:[...this._def.checks,{kind:r,value:s,inclusive:l,message:Ie.toString(d)}]})}_addCheck(r){return new Jr({...this._def,checks:[...this._def.checks,r]})}int(r){return this._addCheck({kind:"int",message:Ie.toString(r)})}positive(r){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ie.toString(r)})}negative(r){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ie.toString(r)})}nonpositive(r){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ie.toString(r)})}nonnegative(r){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ie.toString(r)})}multipleOf(r,s){return this._addCheck({kind:"multipleOf",value:r,message:Ie.toString(s)})}finite(r){return this._addCheck({kind:"finite",message:Ie.toString(r)})}get minValue(){let r=null;for(const s of this._def.checks)s.kind==="min"&&(r===null||s.value>r)&&(r=s.value);return r}get maxValue(){let r=null;for(const s of this._def.checks)s.kind==="max"&&(r===null||s.value<r)&&(r=s.value);return r}get isInt(){return!!this._def.checks.find(r=>r.kind==="int")}}Jr.create=o=>new Jr({checks:[],typeName:we.ZodNumber,coerce:(o==null?void 0:o.coerce)||!1,...Ae(o)});class js extends Ce{_parse(r){if(this._def.coerce&&(r.data=BigInt(r.data)),this._getType(r)!==X.bigint){const s=this._getOrReturnCtx(r);return le(s,{code:K.invalid_type,expected:X.bigint,received:s.parsedType}),ve}return Bt(r.data)}}js.create=o=>{var r;return new js({typeName:we.ZodBigInt,coerce:(r=o==null?void 0:o.coerce)!==null&&r!==void 0&&r,...Ae(o)})};class Us extends Ce{_parse(r){if(this._def.coerce&&(r.data=Boolean(r.data)),this._getType(r)!==X.boolean){const s=this._getOrReturnCtx(r);return le(s,{code:K.invalid_type,expected:X.boolean,received:s.parsedType}),ve}return Bt(r.data)}}Us.create=o=>new Us({typeName:we.ZodBoolean,coerce:(o==null?void 0:o.coerce)||!1,...Ae(o)});class Di extends Ce{_parse(r){if(this._def.coerce&&(r.data=new Date(r.data)),this._getType(r)!==X.date){const d=this._getOrReturnCtx(r);return le(d,{code:K.invalid_type,expected:X.date,received:d.parsedType}),ve}if(isNaN(r.data.getTime()))return le(this._getOrReturnCtx(r),{code:K.invalid_date}),ve;const s=new Zt;let l;for(const d of this._def.checks)d.kind==="min"?r.data.getTime()<d.value&&(l=this._getOrReturnCtx(r,l),le(l,{code:K.too_small,message:d.message,inclusive:!0,exact:!1,minimum:d.value,type:"date"}),s.dirty()):d.kind==="max"?r.data.getTime()>d.value&&(l=this._getOrReturnCtx(r,l),le(l,{code:K.too_big,message:d.message,inclusive:!0,exact:!1,maximum:d.value,type:"date"}),s.dirty()):Me.assertNever(d);return{status:s.value,value:new Date(r.data.getTime())}}_addCheck(r){return new Di({...this._def,checks:[...this._def.checks,r]})}min(r,s){return this._addCheck({kind:"min",value:r.getTime(),message:Ie.toString(s)})}max(r,s){return this._addCheck({kind:"max",value:r.getTime(),message:Ie.toString(s)})}get minDate(){let r=null;for(const s of this._def.checks)s.kind==="min"&&(r===null||s.value>r)&&(r=s.value);return r!=null?new Date(r):null}get maxDate(){let r=null;for(const s of this._def.checks)s.kind==="max"&&(r===null||s.value<r)&&(r=s.value);return r!=null?new Date(r):null}}Di.create=o=>new Di({checks:[],coerce:(o==null?void 0:o.coerce)||!1,typeName:we.ZodDate,...Ae(o)});class ru extends Ce{_parse(r){if(this._getType(r)!==X.symbol){const s=this._getOrReturnCtx(r);return le(s,{code:K.invalid_type,expected:X.symbol,received:s.parsedType}),ve}return Bt(r.data)}}ru.create=o=>new ru({typeName:we.ZodSymbol,...Ae(o)});class zs extends Ce{_parse(r){if(this._getType(r)!==X.undefined){const s=this._getOrReturnCtx(r);return le(s,{code:K.invalid_type,expected:X.undefined,received:s.parsedType}),ve}return Bt(r.data)}}zs.create=o=>new zs({typeName:we.ZodUndefined,...Ae(o)});class Fs extends Ce{_parse(r){if(this._getType(r)!==X.null){const s=this._getOrReturnCtx(r);return le(s,{code:K.invalid_type,expected:X.null,received:s.parsedType}),ve}return Bt(r.data)}}Fs.create=o=>new Fs({typeName:we.ZodNull,...Ae(o)});class xo extends Ce{constructor(){super(...arguments),this._any=!0}_parse(r){return Bt(r.data)}}xo.create=o=>new xo({typeName:we.ZodAny,...Ae(o)});class Mi extends Ce{constructor(){super(...arguments),this._unknown=!0}_parse(r){return Bt(r.data)}}Mi.create=o=>new Mi({typeName:we.ZodUnknown,...Ae(o)});class mr extends Ce{_parse(r){const s=this._getOrReturnCtx(r);return le(s,{code:K.invalid_type,expected:X.never,received:s.parsedType}),ve}}mr.create=o=>new mr({typeName:we.ZodNever,...Ae(o)});class iu extends Ce{_parse(r){if(this._getType(r)!==X.undefined){const s=this._getOrReturnCtx(r);return le(s,{code:K.invalid_type,expected:X.void,received:s.parsedType}),ve}return Bt(r.data)}}iu.create=o=>new iu({typeName:we.ZodVoid,...Ae(o)});class Pn extends Ce{_parse(r){const{ctx:s,status:l}=this._processInputParams(r),d=this._def;if(s.parsedType!==X.array)return le(s,{code:K.invalid_type,expected:X.array,received:s.parsedType}),ve;if(d.exactLength!==null){const y=s.data.length>d.exactLength.value,g=s.data.length<d.exactLength.value;(y||g)&&(le(s,{code:y?K.too_big:K.too_small,minimum:g?d.exactLength.value:void 0,maximum:y?d.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:d.exactLength.message}),l.dirty())}if(d.minLength!==null&&s.data.length<d.minLength.value&&(le(s,{code:K.too_small,minimum:d.minLength.value,type:"array",inclusive:!0,exact:!1,message:d.minLength.message}),l.dirty()),d.maxLength!==null&&s.data.length>d.maxLength.value&&(le(s,{code:K.too_big,maximum:d.maxLength.value,type:"array",inclusive:!0,exact:!1,message:d.maxLength.message}),l.dirty()),s.common.async)return Promise.all(s.data.map((y,g)=>d.type._parseAsync(new er(s,y,s.path,g)))).then(y=>Zt.mergeArray(l,y));const h=s.data.map((y,g)=>d.type._parseSync(new er(s,y,s.path,g)));return Zt.mergeArray(l,h)}get element(){return this._def.type}min(r,s){return new Pn({...this._def,minLength:{value:r,message:Ie.toString(s)}})}max(r,s){return new Pn({...this._def,maxLength:{value:r,message:Ie.toString(s)}})}length(r,s){return new Pn({...this._def,exactLength:{value:r,message:Ie.toString(s)}})}nonempty(r){return this.min(1,r)}}var ou;Pn.create=(o,r)=>new Pn({type:o,minLength:null,maxLength:null,exactLength:null,typeName:we.ZodArray,...Ae(r)}),function(o){o.mergeShapes=(r,s)=>({...r,...s})}(ou||(ou={}));const dw=o=>r=>new rt({...o,shape:()=>({...o.shape(),...r})});function So(o){if(o instanceof rt){const r={};for(const s in o.shape){const l=o.shape[s];r[s]=nr.create(So(l))}return new rt({...o._def,shape:()=>r})}return o instanceof Pn?Pn.create(So(o.element)):o instanceof nr?nr.create(So(o.unwrap())):o instanceof ji?ji.create(So(o.unwrap())):o instanceof tr?tr.create(o.items.map(r=>So(r))):o}class rt extends Ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=dw(this._def),this.extend=dw(this._def)}_getCached(){if(this._cached!==null)return this._cached;const r=this._def.shape(),s=Me.objectKeys(r);return this._cached={shape:r,keys:s}}_parse(r){if(this._getType(r)!==X.object){const b=this._getOrReturnCtx(r);return le(b,{code:K.invalid_type,expected:X.object,received:b.parsedType}),ve}const{status:s,ctx:l}=this._processInputParams(r),{shape:d,keys:h}=this._getCached(),y=[];if(!(this._def.catchall instanceof mr&&this._def.unknownKeys==="strip"))for(const b in l.data)h.includes(b)||y.push(b);const g=[];for(const b of h){const _=d[b],I=l.data[b];g.push({key:{status:"valid",value:b},value:_._parse(new er(l,I,l.path,b)),alwaysSet:b in l.data})}if(this._def.catchall instanceof mr){const b=this._def.unknownKeys;if(b==="passthrough")for(const _ of y)g.push({key:{status:"valid",value:_},value:{status:"valid",value:l.data[_]}});else if(b==="strict")y.length>0&&(le(l,{code:K.unrecognized_keys,keys:y}),s.dirty());else if(b!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const b=this._def.catchall;for(const _ of y){const I=l.data[_];g.push({key:{status:"valid",value:_},value:b._parse(new er(l,I,l.path,_)),alwaysSet:_ in l.data})}}return l.common.async?Promise.resolve().then(async()=>{const b=[];for(const _ of g){const I=await _.key;b.push({key:I,value:await _.value,alwaysSet:_.alwaysSet})}return b}).then(b=>Zt.mergeObjectSync(s,b)):Zt.mergeObjectSync(s,g)}get shape(){return this._def.shape()}strict(r){return Ie.errToObj,new rt({...this._def,unknownKeys:"strict",...r!==void 0?{errorMap:(s,l)=>{var d,h,y,g;const b=(y=(h=(d=this._def).errorMap)===null||h===void 0?void 0:h.call(d,s,l).message)!==null&&y!==void 0?y:l.defaultError;return s.code==="unrecognized_keys"?{message:(g=Ie.errToObj(r).message)!==null&&g!==void 0?g:b}:{message:b}}}:{}})}strip(){return new rt({...this._def,unknownKeys:"strip"})}passthrough(){return new rt({...this._def,unknownKeys:"passthrough"})}setKey(r,s){return this.augment({[r]:s})}merge(r){return new rt({unknownKeys:r._def.unknownKeys,catchall:r._def.catchall,shape:()=>ou.mergeShapes(this._def.shape(),r._def.shape()),typeName:we.ZodObject})}catchall(r){return new rt({...this._def,catchall:r})}pick(r){const s={};return Me.objectKeys(r).map(l=>{this.shape[l]&&(s[l]=this.shape[l])}),new rt({...this._def,shape:()=>s})}omit(r){const s={};return Me.objectKeys(this.shape).map(l=>{Me.objectKeys(r).indexOf(l)===-1&&(s[l]=this.shape[l])}),new rt({...this._def,shape:()=>s})}deepPartial(){return So(this)}partial(r){const s={};if(r)return Me.objectKeys(this.shape).map(l=>{Me.objectKeys(r).indexOf(l)===-1?s[l]=this.shape[l]:s[l]=this.shape[l].optional()}),new rt({...this._def,shape:()=>s});for(const l in this.shape){const d=this.shape[l];s[l]=d.optional()}return new rt({...this._def,shape:()=>s})}required(r){const s={};if(r)Me.objectKeys(this.shape).map(l=>{if(Me.objectKeys(r).indexOf(l)===-1)s[l]=this.shape[l];else{let d=this.shape[l];for(;d instanceof nr;)d=d._def.innerType;s[l]=d}});else for(const l in this.shape){let d=this.shape[l];for(;d instanceof nr;)d=d._def.innerType;s[l]=d}return new rt({...this._def,shape:()=>s})}keyof(){return fw(Me.objectKeys(this.shape))}}rt.create=(o,r)=>new rt({shape:()=>o,unknownKeys:"strip",catchall:mr.create(),typeName:we.ZodObject,...Ae(r)}),rt.strictCreate=(o,r)=>new rt({shape:()=>o,unknownKeys:"strict",catchall:mr.create(),typeName:we.ZodObject,...Ae(r)}),rt.lazycreate=(o,r)=>new rt({shape:o,unknownKeys:"strip",catchall:mr.create(),typeName:we.ZodObject,...Ae(r)});class Vs extends Ce{_parse(r){const{ctx:s}=this._processInputParams(r),l=this._def.options;if(s.common.async)return Promise.all(l.map(async d=>{const h={...s,common:{...s.common,issues:[]},parent:null};return{result:await d._parseAsync({data:s.data,path:s.path,parent:h}),ctx:h}})).then(function(d){for(const y of d)if(y.result.status==="valid")return y.result;for(const y of d)if(y.result.status==="dirty")return s.common.issues.push(...y.ctx.common.issues),y.result;const h=d.map(y=>new pr(y.ctx.common.issues));return le(s,{code:K.invalid_union,unionErrors:h}),ve});{let d;const h=[];for(const g of l){const b={...s,common:{...s.common,issues:[]},parent:null},_=g._parseSync({data:s.data,path:s.path,parent:b});if(_.status==="valid")return _;_.status!=="dirty"||d||(d={result:_,ctx:b}),b.common.issues.length&&h.push(b.common.issues)}if(d)return s.common.issues.push(...d.ctx.common.issues),d.result;const y=h.map(g=>new pr(g));return le(s,{code:K.invalid_union,unionErrors:y}),ve}}get options(){return this._def.options}}Vs.create=(o,r)=>new Vs({options:o,typeName:we.ZodUnion,...Ae(r)});const su=o=>o instanceof Zs?su(o.schema):o instanceof Rn?su(o.innerType()):o instanceof Hs?[o.value]:o instanceof Ks?o.options:o instanceof Gs?Object.keys(o.enum):o instanceof Qs?su(o._def.innerType):o instanceof zs?[void 0]:o instanceof Fs?[null]:null;class au extends Ce{_parse(r){const{ctx:s}=this._processInputParams(r);if(s.parsedType!==X.object)return le(s,{code:K.invalid_type,expected:X.object,received:s.parsedType}),ve;const l=this.discriminator,d=s.data[l],h=this.optionsMap.get(d);return h?s.common.async?h._parseAsync({data:s.data,path:s.path,parent:s}):h._parseSync({data:s.data,path:s.path,parent:s}):(le(s,{code:K.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[l]}),ve)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(r,s,l){const d=new Map;for(const h of s){const y=su(h.shape[r]);if(!y)throw new Error(`A discriminator value for key \`${r}\` could not be extracted from all schema options`);for(const g of y){if(d.has(g))throw new Error(`Discriminator property ${String(r)} has duplicate value ${String(g)}`);d.set(g,h)}}return new au({typeName:we.ZodDiscriminatedUnion,discriminator:r,options:s,optionsMap:d,...Ae(l)})}}function Sf(o,r){const s=qr(o),l=qr(r);if(o===r)return{valid:!0,data:o};if(s===X.object&&l===X.object){const d=Me.objectKeys(r),h=Me.objectKeys(o).filter(g=>d.indexOf(g)!==-1),y={...o,...r};for(const g of h){const b=Sf(o[g],r[g]);if(!b.valid)return{valid:!1};y[g]=b.data}return{valid:!0,data:y}}if(s===X.array&&l===X.array){if(o.length!==r.length)return{valid:!1};const d=[];for(let h=0;h<o.length;h++){const y=Sf(o[h],r[h]);if(!y.valid)return{valid:!1};d.push(y.data)}return{valid:!0,data:d}}return s===X.date&&l===X.date&&+o==+r?{valid:!0,data:o}:{valid:!1}}class Ws extends Ce{_parse(r){const{status:s,ctx:l}=this._processInputParams(r),d=(h,y)=>{if(Ef(h)||Ef(y))return ve;const g=Sf(h.value,y.value);return g.valid?((xf(h)||xf(y))&&s.dirty(),{status:s.value,value:g.data}):(le(l,{code:K.invalid_intersection_types}),ve)};return l.common.async?Promise.all([this._def.left._parseAsync({data:l.data,path:l.path,parent:l}),this._def.right._parseAsync({data:l.data,path:l.path,parent:l})]).then(([h,y])=>d(h,y)):d(this._def.left._parseSync({data:l.data,path:l.path,parent:l}),this._def.right._parseSync({data:l.data,path:l.path,parent:l}))}}Ws.create=(o,r,s)=>new Ws({left:o,right:r,typeName:we.ZodIntersection,...Ae(s)});class tr extends Ce{_parse(r){const{status:s,ctx:l}=this._processInputParams(r);if(l.parsedType!==X.array)return le(l,{code:K.invalid_type,expected:X.array,received:l.parsedType}),ve;if(l.data.length<this._def.items.length)return le(l,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ve;!this._def.rest&&l.data.length>this._def.items.length&&(le(l,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const d=l.data.map((h,y)=>{const g=this._def.items[y]||this._def.rest;return g?g._parse(new er(l,h,l.path,y)):null}).filter(h=>!!h);return l.common.async?Promise.all(d).then(h=>Zt.mergeArray(s,h)):Zt.mergeArray(s,d)}get items(){return this._def.items}rest(r){return new tr({...this._def,rest:r})}}tr.create=(o,r)=>{if(!Array.isArray(o))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new tr({items:o,typeName:we.ZodTuple,rest:null,...Ae(r)})};class lu extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(r){const{status:s,ctx:l}=this._processInputParams(r);if(l.parsedType!==X.object)return le(l,{code:K.invalid_type,expected:X.object,received:l.parsedType}),ve;const d=[],h=this._def.keyType,y=this._def.valueType;for(const g in l.data)d.push({key:h._parse(new er(l,g,l.path,g)),value:y._parse(new er(l,l.data[g],l.path,g))});return l.common.async?Zt.mergeObjectAsync(s,d):Zt.mergeObjectSync(s,d)}get element(){return this._def.valueType}static create(r,s,l){return new lu(s instanceof Ce?{keyType:r,valueType:s,typeName:we.ZodRecord,...Ae(l)}:{keyType:yr.create(),valueType:r,typeName:we.ZodRecord,...Ae(s)})}}class uu extends Ce{_parse(r){const{status:s,ctx:l}=this._processInputParams(r);if(l.parsedType!==X.map)return le(l,{code:K.invalid_type,expected:X.map,received:l.parsedType}),ve;const d=this._def.keyType,h=this._def.valueType,y=[...l.data.entries()].map(([g,b],_)=>({key:d._parse(new er(l,g,l.path,[_,"key"])),value:h._parse(new er(l,b,l.path,[_,"value"]))}));if(l.common.async){const g=new Map;return Promise.resolve().then(async()=>{for(const b of y){const _=await b.key,I=await b.value;if(_.status==="aborted"||I.status==="aborted")return ve;_.status!=="dirty"&&I.status!=="dirty"||s.dirty(),g.set(_.value,I.value)}return{status:s.value,value:g}})}{const g=new Map;for(const b of y){const _=b.key,I=b.value;if(_.status==="aborted"||I.status==="aborted")return ve;_.status!=="dirty"&&I.status!=="dirty"||s.dirty(),g.set(_.value,I.value)}return{status:s.value,value:g}}}}uu.create=(o,r,s)=>new uu({valueType:r,keyType:o,typeName:we.ZodMap,...Ae(s)});class Bi extends Ce{_parse(r){const{status:s,ctx:l}=this._processInputParams(r);if(l.parsedType!==X.set)return le(l,{code:K.invalid_type,expected:X.set,received:l.parsedType}),ve;const d=this._def;d.minSize!==null&&l.data.size<d.minSize.value&&(le(l,{code:K.too_small,minimum:d.minSize.value,type:"set",inclusive:!0,exact:!1,message:d.minSize.message}),s.dirty()),d.maxSize!==null&&l.data.size>d.maxSize.value&&(le(l,{code:K.too_big,maximum:d.maxSize.value,type:"set",inclusive:!0,exact:!1,message:d.maxSize.message}),s.dirty());const h=this._def.valueType;function y(b){const _=new Set;for(const I of b){if(I.status==="aborted")return ve;I.status==="dirty"&&s.dirty(),_.add(I.value)}return{status:s.value,value:_}}const g=[...l.data.values()].map((b,_)=>h._parse(new er(l,b,l.path,_)));return l.common.async?Promise.all(g).then(b=>y(b)):y(g)}min(r,s){return new Bi({...this._def,minSize:{value:r,message:Ie.toString(s)}})}max(r,s){return new Bi({...this._def,maxSize:{value:r,message:Ie.toString(s)}})}size(r,s){return this.min(r,s).max(r,s)}nonempty(r){return this.min(1,r)}}Bi.create=(o,r)=>new Bi({valueType:o,minSize:null,maxSize:null,typeName:we.ZodSet,...Ae(r)});class _o extends Ce{constructor(){super(...arguments),this.validate=this.implement}_parse(r){const{ctx:s}=this._processInputParams(r);if(s.parsedType!==X.function)return le(s,{code:K.invalid_type,expected:X.function,received:s.parsedType}),ve;function l(g,b){return eu({data:g,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,Xl(),Bs].filter(_=>!!_),issueData:{code:K.invalid_arguments,argumentsError:b}})}function d(g,b){return eu({data:g,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,Xl(),Bs].filter(_=>!!_),issueData:{code:K.invalid_return_type,returnTypeError:b}})}const h={errorMap:s.common.contextualErrorMap},y=s.data;return this._def.returns instanceof Co?Bt(async(...g)=>{const b=new pr([]),_=await this._def.args.parseAsync(g,h).catch(P=>{throw b.addIssue(l(g,P)),b}),I=await y(..._);return await this._def.returns._def.type.parseAsync(I,h).catch(P=>{throw b.addIssue(d(I,P)),b})}):Bt((...g)=>{const b=this._def.args.safeParse(g,h);if(!b.success)throw new pr([l(g,b.error)]);const _=y(...b.data),I=this._def.returns.safeParse(_,h);if(!I.success)throw new pr([d(_,I.error)]);return I.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...r){return new _o({...this._def,args:tr.create(r).rest(Mi.create())})}returns(r){return new _o({...this._def,returns:r})}implement(r){return this.parse(r)}strictImplement(r){return this.parse(r)}static create(r,s,l){return new _o({args:r||tr.create([]).rest(Mi.create()),returns:s||Mi.create(),typeName:we.ZodFunction,...Ae(l)})}}class Zs extends Ce{get schema(){return this._def.getter()}_parse(r){const{ctx:s}=this._processInputParams(r);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}Zs.create=(o,r)=>new Zs({getter:o,typeName:we.ZodLazy,...Ae(r)});class Hs extends Ce{_parse(r){return r.data!==this._def.value?(le(this._getOrReturnCtx(r),{code:K.invalid_literal,expected:this._def.value}),ve):{status:"valid",value:r.data}}get value(){return this._def.value}}function fw(o,r){return new Ks({values:o,typeName:we.ZodEnum,...Ae(r)})}Hs.create=(o,r)=>new Hs({value:o,typeName:we.ZodLiteral,...Ae(r)});class Ks extends Ce{_parse(r){if(typeof r.data!="string"){const s=this._getOrReturnCtx(r),l=this._def.values;return le(s,{expected:Me.joinValues(l),received:s.parsedType,code:K.invalid_type}),ve}if(this._def.values.indexOf(r.data)===-1){const s=this._getOrReturnCtx(r),l=this._def.values;return le(s,{received:s.data,code:K.invalid_enum_value,options:l}),ve}return Bt(r.data)}get options(){return this._def.values}get enum(){const r={};for(const s of this._def.values)r[s]=s;return r}get Values(){const r={};for(const s of this._def.values)r[s]=s;return r}get Enum(){const r={};for(const s of this._def.values)r[s]=s;return r}}Ks.create=fw;class Gs extends Ce{_parse(r){const s=Me.getValidEnumValues(this._def.values),l=this._getOrReturnCtx(r);if(l.parsedType!==X.string&&l.parsedType!==X.number){const d=Me.objectValues(s);return le(l,{expected:Me.joinValues(d),received:l.parsedType,code:K.invalid_type}),ve}if(s.indexOf(r.data)===-1){const d=Me.objectValues(s);return le(l,{received:l.data,code:K.invalid_enum_value,options:d}),ve}return Bt(r.data)}get enum(){return this._def.values}}Gs.create=(o,r)=>new Gs({values:o,typeName:we.ZodNativeEnum,...Ae(r)});class Co extends Ce{_parse(r){const{ctx:s}=this._processInputParams(r);if(s.parsedType!==X.promise&&s.common.async===!1)return le(s,{code:K.invalid_type,expected:X.promise,received:s.parsedType}),ve;const l=s.parsedType===X.promise?s.data:Promise.resolve(s.data);return Bt(l.then(d=>this._def.type.parseAsync(d,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Co.create=(o,r)=>new Co({type:o,typeName:we.ZodPromise,...Ae(r)});class Rn extends Ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===we.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(r){const{status:s,ctx:l}=this._processInputParams(r),d=this._def.effect||null;if(d.type==="preprocess"){const y=d.transform(l.data);return l.common.async?Promise.resolve(y).then(g=>this._def.schema._parseAsync({data:g,path:l.path,parent:l})):this._def.schema._parseSync({data:y,path:l.path,parent:l})}const h={addIssue:y=>{le(l,y),y.fatal?s.abort():s.dirty()},get path(){return l.path}};if(h.addIssue=h.addIssue.bind(h),d.type==="refinement"){const y=g=>{const b=d.refinement(g,h);if(l.common.async)return Promise.resolve(b);if(b instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return g};if(l.common.async===!1){const g=this._def.schema._parseSync({data:l.data,path:l.path,parent:l});return g.status==="aborted"?ve:(g.status==="dirty"&&s.dirty(),y(g.value),{status:s.value,value:g.value})}return this._def.schema._parseAsync({data:l.data,path:l.path,parent:l}).then(g=>g.status==="aborted"?ve:(g.status==="dirty"&&s.dirty(),y(g.value).then(()=>({status:s.value,value:g.value}))))}if(d.type==="transform"){if(l.common.async===!1){const y=this._def.schema._parseSync({data:l.data,path:l.path,parent:l});if(!tu(y))return y;const g=d.transform(y.value,h);if(g instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:g}}return this._def.schema._parseAsync({data:l.data,path:l.path,parent:l}).then(y=>tu(y)?Promise.resolve(d.transform(y.value,h)).then(g=>({status:s.value,value:g})):y)}Me.assertNever(d)}}Rn.create=(o,r,s)=>new Rn({schema:o,typeName:we.ZodEffects,effect:r,...Ae(s)}),Rn.createWithPreprocess=(o,r,s)=>new Rn({schema:r,effect:{type:"preprocess",transform:o},typeName:we.ZodEffects,...Ae(s)});class nr extends Ce{_parse(r){return this._getType(r)===X.undefined?Bt(void 0):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}}nr.create=(o,r)=>new nr({innerType:o,typeName:we.ZodOptional,...Ae(r)});class ji extends Ce{_parse(r){return this._getType(r)===X.null?Bt(null):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}}ji.create=(o,r)=>new ji({innerType:o,typeName:we.ZodNullable,...Ae(r)});class Qs extends Ce{_parse(r){const{ctx:s}=this._processInputParams(r);let l=s.data;return s.parsedType===X.undefined&&(l=this._def.defaultValue()),this._def.innerType._parse({data:l,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}Qs.create=(o,r)=>new Qs({innerType:o,typeName:we.ZodDefault,defaultValue:typeof r.default=="function"?r.default:()=>r.default,...Ae(r)});class cu extends Ce{_parse(r){const{ctx:s}=this._processInputParams(r),l=this._def.innerType._parse({data:s.data,path:s.path,parent:s});return nu(l)?l.then(d=>({status:"valid",value:d.status==="valid"?d.value:this._def.defaultValue()})):{status:"valid",value:l.status==="valid"?l.value:this._def.defaultValue()}}removeDefault(){return this._def.innerType}}cu.create=(o,r)=>new cu({innerType:o,typeName:we.ZodCatch,defaultValue:typeof r.default=="function"?r.default:()=>r.default,...Ae(r)});class du extends Ce{_parse(r){if(this._getType(r)!==X.nan){const s=this._getOrReturnCtx(r);return le(s,{code:K.invalid_type,expected:X.nan,received:s.parsedType}),ve}return{status:"valid",value:r.data}}}du.create=o=>new du({typeName:we.ZodNaN,...Ae(o)});const v_=Symbol("zod_brand");class hw extends Ce{_parse(r){const{ctx:s}=this._processInputParams(r),l=s.data;return this._def.type._parse({data:l,path:s.path,parent:s})}unwrap(){return this._def.type}}class qs extends Ce{_parse(r){const{status:s,ctx:l}=this._processInputParams(r);if(l.common.async)return(async()=>{const d=await this._def.in._parseAsync({data:l.data,path:l.path,parent:l});return d.status==="aborted"?ve:d.status==="dirty"?(s.dirty(),uw(d.value)):this._def.out._parseAsync({data:d.value,path:l.path,parent:l})})();{const d=this._def.in._parseSync({data:l.data,path:l.path,parent:l});return d.status==="aborted"?ve:d.status==="dirty"?(s.dirty(),{status:"dirty",value:d.value}):this._def.out._parseSync({data:d.value,path:l.path,parent:l})}}static create(r,s){return new qs({in:r,out:s,typeName:we.ZodPipeline})}}const pw=(o,r={},s)=>o?xo.create().superRefine((l,d)=>{if(!o(l)){const h=typeof r=="function"?r(l):r,y=typeof h=="string"?{message:h}:h;d.addIssue({code:"custom",...y,fatal:s})}}):xo.create(),b_={object:rt.lazycreate};var we;(function(o){o.ZodString="ZodString",o.ZodNumber="ZodNumber",o.ZodNaN="ZodNaN",o.ZodBigInt="ZodBigInt",o.ZodBoolean="ZodBoolean",o.ZodDate="ZodDate",o.ZodSymbol="ZodSymbol",o.ZodUndefined="ZodUndefined",o.ZodNull="ZodNull",o.ZodAny="ZodAny",o.ZodUnknown="ZodUnknown",o.ZodNever="ZodNever",o.ZodVoid="ZodVoid",o.ZodArray="ZodArray",o.ZodObject="ZodObject",o.ZodUnion="ZodUnion",o.ZodDiscriminatedUnion="ZodDiscriminatedUnion",o.ZodIntersection="ZodIntersection",o.ZodTuple="ZodTuple",o.ZodRecord="ZodRecord",o.ZodMap="ZodMap",o.ZodSet="ZodSet",o.ZodFunction="ZodFunction",o.ZodLazy="ZodLazy",o.ZodLiteral="ZodLiteral",o.ZodEnum="ZodEnum",o.ZodEffects="ZodEffects",o.ZodNativeEnum="ZodNativeEnum",o.ZodOptional="ZodOptional",o.ZodNullable="ZodNullable",o.ZodDefault="ZodDefault",o.ZodCatch="ZodCatch",o.ZodPromise="ZodPromise",o.ZodBranded="ZodBranded",o.ZodPipeline="ZodPipeline"})(we||(we={}));const yw=yr.create,mw=Jr.create,k_=du.create,E_=js.create,gw=Us.create,x_=Di.create,S_=ru.create,__=zs.create,C_=Fs.create,N_=xo.create,A_=Mi.create,T_=mr.create,I_=iu.create,L_=Pn.create,O_=rt.create,P_=rt.strictCreate,R_=Vs.create,$_=au.create,D_=Ws.create,M_=tr.create,B_=lu.create,j_=uu.create,U_=Bi.create,z_=_o.create,F_=Zs.create,V_=Hs.create,W_=Ks.create,Z_=Gs.create,H_=Co.create,ww=Rn.create,K_=nr.create,G_=ji.create,Q_=Rn.createWithPreprocess,q_=qs.create;var Lt=Object.freeze({__proto__:null,defaultErrorMap:Bs,setErrorMap:function(o){lw=o},getErrorMap:Xl,makeIssue:eu,EMPTY_PATH:[],addIssueToContext:le,ParseStatus:Zt,INVALID:ve,DIRTY:uw,OK:Bt,isAborted:Ef,isDirty:xf,isValid:tu,isAsync:nu,get util(){return Me},ZodParsedType:X,getParsedType:qr,ZodType:Ce,ZodString:yr,ZodNumber:Jr,ZodBigInt:js,ZodBoolean:Us,ZodDate:Di,ZodSymbol:ru,ZodUndefined:zs,ZodNull:Fs,ZodAny:xo,ZodUnknown:Mi,ZodNever:mr,ZodVoid:iu,ZodArray:Pn,get objectUtil(){return ou},ZodObject:rt,ZodUnion:Vs,ZodDiscriminatedUnion:au,ZodIntersection:Ws,ZodTuple:tr,ZodRecord:lu,ZodMap:uu,ZodSet:Bi,ZodFunction:_o,ZodLazy:Zs,ZodLiteral:Hs,ZodEnum:Ks,ZodNativeEnum:Gs,ZodPromise:Co,ZodEffects:Rn,ZodTransformer:Rn,ZodOptional:nr,ZodNullable:ji,ZodDefault:Qs,ZodCatch:cu,ZodNaN:du,BRAND:v_,ZodBranded:hw,ZodPipeline:qs,custom:pw,Schema:Ce,ZodSchema:Ce,late:b_,get ZodFirstPartyTypeKind(){return we},coerce:{string:o=>yr.create({...o,coerce:!0}),number:o=>Jr.create({...o,coerce:!0}),boolean:o=>Us.create({...o,coerce:!0}),bigint:o=>js.create({...o,coerce:!0}),date:o=>Di.create({...o,coerce:!0})},any:N_,array:L_,bigint:E_,boolean:gw,date:x_,discriminatedUnion:$_,effect:ww,enum:W_,function:z_,instanceof:(o,r={message:`Input not instance of ${o.name}`})=>pw(s=>s instanceof o,r,!0),intersection:D_,lazy:F_,literal:V_,map:j_,nan:k_,nativeEnum:Z_,never:T_,null:C_,nullable:G_,number:mw,object:O_,oboolean:()=>gw().optional(),onumber:()=>mw().optional(),optional:K_,ostring:()=>yw().optional(),pipeline:q_,preprocess:Q_,promise:H_,record:B_,set:U_,strictObject:P_,string:yw,symbol:S_,transformer:ww,tuple:M_,undefined:__,union:R_,unknown:A_,void:I_,NEVER:ve,ZodIssueCode:K,quotelessJson:o=>JSON.stringify(o,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:pr});const J_=Lt.enum(["awake/init","awake/res","awake/msg"]),vw=Lt.object({awv:Lt.literal("0.1.0"),type:J_}),Y_=Lt.object({did:Lt.string().startsWith("did:",{message:"should be a DID `did:key:z...`"}),sig:Lt.string()}).strict(),X_=Lt.object({"awake/ack":Lt.string().startsWith("did:",{message:"should be a DID `did:key:z...`"})}).strict();vw.extend({type:Lt.literal("awake/init"),did:Lt.string().startsWith("did:",{message:"should be a DID `did:key:z...`"}),caps:Lt.array(Lt.object({with:Lt.string(),can:Lt.string()})).nonempty()}).strict();const bw=Lt.string().startsWith("did:",{message:"should be a DID `did:key:z...`"});vw.extend({type:Lt.literal("awake/res"),iss:bw,aud:bw,msg:Lt.string().min(1)}).strict();class eC{constructor(r){this.channel=r.channel,this.agent=r.agent,this.did=r.agent.did(),this.challenge=void 0,this.nextdid=void 0,this.audience=void 0,this.pin=Math.floor(1e6*Math.random())}async bootstrap(r){this.channel.sendInit(r);const{ucan:s}=await this.channel.awaitRes(),l=kw(s.facts,"awake/challenge");if(this.nextdid=Jn(kw(s.facts,"awake/nextdid")),l==="oob-pin")return await this.sendPinSignature(),this.pin.toString()}async awaitBootstrap(){const r=await this.channel.awaitInit();this.nextdid=r.did;const s=await Km({issuer:this.agent.issuer,audience:this.nextdid,capabilities:[{with:"awake:",can:"*"}],facts:[{"awake/challenge":"oob-pin"},{"awake/nextdid":this.channel.keypair.did}]});await this.channel.sendRes(this.nextdid,s);const l=await this.channel.awaitMsg(this.nextdid),{did:d,sig:h}=Y_.parse(l.msg);this.audience=Jn(d),this.challenge=h}async ack(r){if(!this.challenge||!this.nextdid||!this.audience)throw new Error("No challenge active.");const s=Jl(this.challenge,"base64"),l=Wg(this.audience.did()),d=Jl(this.channel.keypair.did+r),h=await Ee.encode(d);if(!await l.verify(h,Vd(s)))throw new Error(`Challenge failed: ${r} is not valid for the current challenge.`);await this.channel.sendMsg(this.nextdid,{"awake/ack":this.did})}async awaitAck(){if(!this.nextdid)throw new Error("No session is active. await ack");const r=await this.channel.awaitMsg(this.nextdid),s=X_.parse(r.msg);this.audience=Jn(s["awake/ack"])}async link(r){if(!this.nextdid||!this.audience)throw new Error("No session is active. request link");const s={type:"link",meta:r.meta,caps:r.caps};this.channel.sendMsg(this.nextdid,s);const l=await this.channel.awaitMsg(this.nextdid),d=sw(l.msg.delegation);return await this.channel.sendFin(this.nextdid),await this.agent.addProof(d[0]),{delegation:d[0],meta:l.msg.meta}}async awaitLink(){if(!this.nextdid||!this.audience)throw new Error("No challenge active.");const r=await this.channel.awaitMsg(this.nextdid),s=await this.agent.delegate({abilities:["*"],audience:this.audience,expiration:1/0,audienceMeta:r.msg.meta});this.channel.subscribe("awake/msg",l=>{this.channel.close()}),this.channel.sendMsg(this.nextdid,{meta:{name:this.agent.did(),type:"device"},delegation:p_([s])})}async sendPinSignature(){if(!this.nextdid)throw new Error("No session is active.");const r=Jl(this.nextdid.did()+this.pin.toString()),s=await this.agent.issuer.sign(await Ee.encode(r));this.channel.sendMsg(this.nextdid,{did:this.did,sig:rw(s,"base64")})}}function kw(o,r){for(const s of o)if(s[r])return s[r]}function Ge(o,r){return o.with===r.with||new Wt(`Can not derive ${o.can} with ${o.with} from ${r.with}`)}function gr(o,r,s){return r===void 0||r==="*"||String(o)===String(r)||new Wt(`Constrain violation: ${o} violates imposed ${s} constraint ${r}`)}const Ew=(o,r)=>o.with!==r.with?new Wt(`Expected 'with: "${r.with}"' instead got '${o.with}'`):!r.nb.link||`${r.nb.link}`==`${o.nb.link}`||new Wt(`Link ${o.nb.link?`${o.nb.link}`:""} violates imposed ${r.nb.link} constraint.`);function Ht(o){return o===!0?void 0:o}function xw(o){const[r,...s]=o.split("/");return{namespace:r,segments:s}}function tC(o,r){const s=xw(o),l=xw(r);return s.namespace==="*"&&s.segments.length===0||(l.namespace!=="*"||l.segments.length!==0)&&s.namespace===l.namespace&&(s.segments[0]==="*"||s.segments.length===l.segments.length&&s.segments.reduce((d,h,y)=>d&&l.segments[y]===h,!0))}const wr=At({can:"*",with:pt({protocol:"did:"}),derives:Ge}),nC=wr.derive({to:At({can:"store/*",with:pt({protocol:"did:"}),derives:Ge}),derives:Ge}),_f=wr.or(nC),Sw=_f.derive({to:At({can:"store/add",with:pt({protocol:"did:"}),nb:{link:Wl,size:af(),origin:Lg()},derives:(o,r)=>{const s=Ew(o,r);return s.error?s:o.nb.size===void 0||r.nb.size===void 0||!(o.nb.size>r.nb.size)||new Wt(`Size constraint violation: ${o.nb.size} > ${r.nb.size}`)}}),derives:Ge}),_w=_f.derive({to:At({can:"store/remove",with:pt({protocol:"did:"}),nb:{link:Wl},derives:Ew}),derives:Ge}),Cw=_f.derive({to:At({can:"store/list",with:pt({protocol:"did:"}),nb:{cursor:zl().optional(),size:af().optional(),pre:Eg().optional()},derives:(o,r)=>o.with===r.with||new Wt(`Expected 'with: "${r.with}"' instead got '${o.with}'`)}),derives:Ge});Sw.or(_w).or(Cw);const rC=wr.derive({to:At({can:"upload/*",with:pt({protocol:"did:"}),derives:Ge}),derives:Ge}),Cf=wr.or(rC),iC=Ig({code:514,version:1}),Nw=Cf.derive({to:At({can:"upload/add",with:pt({protocol:"did:"}),nb:{root:Wl,shards:iC.array().optional()},derives:(o,r)=>Ht(Ge(o,r))||Ht(gr(o.nb.root,r.nb.root,"root"))||Ht(gr(o.nb.shards,r.nb.shards,"shards"))||!0}),derives:Ge}),Aw=Cf.derive({to:At({can:"upload/remove",with:pt({protocol:"did:"}),nb:{root:Wl},derives:(o,r)=>Ht(Ge(o,r))||Ht(gr(o.nb.root,r.nb.root,"root"))||!0}),derives:Ge}),Tw=Cf.derive({to:At({can:"upload/list",with:pt({protocol:"did:"}),nb:{cursor:zl().optional(),size:af().optional(),pre:Eg().optional()}}),derives:Ge});Nw.or(Aw).or(Tw);const oC=wr.derive({to:At({can:"space/*",with:pt({protocol:"did:"}),derives:Ge}),derives:Ge}),Nf=wr.or(oC),sC=Nf.or(Sw).or(Cw).or(_w).or(Nw).or(Tw).or(Aw).derive({to:At({can:"space/info",with:pt({protocol:"did:"}),derives:Ge}),derives:Ge}),aC=Nf.derive({to:At({can:"space/recover-validation",with:pt({protocol:"did:"}),nb:{identity:pt({protocol:"mailto:"})},derives:Ge}),derives:Ge}),lC=Nf.derive({to:At({can:"space/recover",with:pt({protocol:"did:"}),nb:{identity:pt({protocol:"mailto:"})},derives:(o,r)=>Ht(Ge(o,r))||Ht(function(s,l){return l===void 0||(s!==void 0&&l.endsWith("*")?!!s.startsWith(l.slice(0,-1))||new Wt(`${s} does not match ${l}`):s===l||new Wt(`${s} is different from ${l}`))}(o.nb.identity,r.nb.identity))||!0}),derives:Ge}),Iw=Ag,Lw=pt({protocol:"mailto:"}),uC=lf({}),Ow=wr.derive({to:At({can:"voucher/*",with:pt({protocol:"did:"}),derives:Ge}),derives:Ge}),cC=wr.or(Ow).derive({to:At({can:"voucher/claim",with:pt({protocol:"did:"}),nb:{product:Iw,identity:Lw,service:uC.optional()},derives:(o,r)=>Ht(Ge(o,r))||Ht(gr(o.nb.product,r.nb.product,"product"))||Ht(gr(o.nb.identity,r.nb.identity,"identity"))||Ht(gr(o.nb.service,r.nb.service,"service"))||!0}),derives:Ge}),dC=Ow.derive({to:At({can:"voucher/redeem",with:pt({protocol:"did:"}),nb:{product:Iw,identity:Lw,space:pt({protocol:"did:"})},derives:(o,r)=>Ht(Ge(o,r))||Ht(gr(o.nb.product,r.nb.product,"product"))||Ht(gr(o.nb.identity,r.nb.identity,"identity"))||Ht(gr(o.nb.space,r.nb.space,"account"))||!0}),derives:Ge});var No=null;typeof WebSocket<"u"?No=WebSocket:typeof MozWebSocket<"u"?No=MozWebSocket:typeof Su<"u"?No=Su.WebSocket||Su.MozWebSocket:typeof window<"u"?No=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(No=self.WebSocket||self.MozWebSocket);var fC=No;class hC extends Error{constructor(r){super(r),this.name="TimeoutError"}}class pC extends Error{constructor(r){super(),this.name="AbortError",this.message=r}}const Pw=o=>globalThis.DOMException===void 0?new pC(o):new DOMException(o),Rw=o=>{const r=o.reason===void 0?Pw("This operation was aborted."):o.reason;return r instanceof Error?r:Pw(r)},Af=Symbol("resolveValue");async function Tf(o,r={}){const{interval:s=20,timeout:l=Number.POSITIVE_INFINITY,before:d=!0}=r;let h;const y=new Promise((g,b)=>{const _=async()=>{try{const I=await o();if(typeof I=="object"&&I[Af])g(I[Af]);else{if(typeof I!="boolean")throw new TypeError("Expected condition to return a boolean");I===!0?g():h=setTimeout(_,s)}}catch(I){b(I)}};d?_():h=setTimeout(_,s)});if(l===Number.POSITIVE_INFINITY)return y;try{return await function(g,b){const{milliseconds:_,fallback:I,message:P,customTimers:B={setTimeout,clearTimeout}}=b;let q;const se=new Promise((ye,Re)=>{if(typeof _!="number"||Math.sign(_)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${_}\``);if(_!==Number.POSITIVE_INFINITY){if(b.signal){const{signal:pe}=b;pe.aborted&&Re(Rw(pe)),pe.addEventListener("abort",()=>{Re(Rw(pe))})}q=B.setTimeout.call(void 0,()=>{if(I){try{ye(I())}catch(ke){Re(ke)}return}const pe=P instanceof Error?P:new hC(typeof P=="string"?P:`Promise timed out after ${_} milliseconds`);typeof g.cancel=="function"&&g.cancel(),Re(pe)},_),(async()=>{try{ye(await g)}catch(pe){Re(pe)}finally{B.clearTimeout.call(void 0,q)}})()}else ye(g)});return se.clear=()=>{B.clearTimeout.call(void 0,q),q=void 0},se}(y,typeof l=="number"?{milliseconds:l}:l)}finally{clearTimeout(h)}}Tf.resolveWith=o=>({[Af]:o});class yC{constructor(r,s){Ze(this,br,void 0);this.url=new URL(s,r),r.protocol==="http:"&&(this.url.protocol="ws:"),r.protocol==="https:"&&(this.url.protocol="wss:"),this.ws=void 0,bn(this,br,new Map),this.attemps=0,this.onMessage=void 0,this.timeout=void 0,this.forceClose=!1}async open(){return this.ws=this.connect(),await Tf(()=>{var r;return((r=this.ws)==null?void 0:r.readyState)===1}),this}connect(){if(this.attemps>10)return;const r=new fC(this.url);return this.ws=r,r.addEventListener("close",s=>{this.forceClose||this.timeout?(clearTimeout(this.timeout),this.timeout=void 0):(this.timeout=setTimeout(()=>{this.attemps++,this.connect()},1e3),console.log("WebSocket closed, reconnecting:",s.code,s.reason))}),r.addEventListener("error",s=>{}),r.addEventListener("open",s=>{clearTimeout(this.timeout),this.timeout=void 0}),r.addEventListener("message",s=>{const l=JSON.parse(s.data);l.error&&console.error(l.error),l.type&&this.publish(l),this.onMessage!==void 0&&l.type&&this.onMessage(l)}),r}async close(r,s){return this.ws&&(this.forceClose=!0,this.ws.close(r,s),await Tf(()=>{var l;return((l=this.ws)==null?void 0:l.readyState)===3})),this}send(r){var s;if(((s=this.ws)==null?void 0:s.readyState)!==1)throw new Error("Websocket is not active.");this.ws.send(JSON.stringify(r))}subscribe(r,s,l){let d=te(this,br).get(r),h=s;return l&&(h=y=>{d==null||d.splice(d.indexOf(h)>>>0,1),Reflect.apply(s,this,[y])}),d?d.push(h):(d=[h],te(this,br).set(r,d)),()=>{d==null||d.splice(d.indexOf(h)>>>0,1)}}unsubscribe(r,s){const l=te(this,br).get(r);l&&(s?l.splice(l.indexOf(s)>>>0,1):te(this,br).set(r,[]))}publish(r){var d;const{type:s}=r,l=(d=te(this,br).get(s))==null?void 0:d.slice();if(l)for(const h of l)h(r)}awaitMsg(r){return new Promise((s,l)=>{r!=null&&r.signal&&r.signal.addEventListener("abort",()=>{var d;this.onMessage=void 0,l(new Js("Await message cancelled.",{cause:(d=r.signal)==null?void 0:d.reason}))}),this.onMessage=d=>{try{this.onMessage=void 0,s(d)}catch(h){l(h)}}})}}br=new WeakMap;class Js extends Error{constructor(r,s){super(r,s),this.name="AbortError",this.message=r,this.code=Js.code}}Js.code="ERR_AWAIT_MSG_CANCEL";const Ui=(globalThis||window||self).crypto,If=(o,r)=>{const s=Y(o),l=new Uint8Array(r.byteLength+s);return F(o,l,0),l.set(r,s),l},Lf=(o,r,s=0)=>{const l=s!==0?r.subarray(s):r,[d,h]=W(l);if(d!==o)throw new Error(`Expected multiformat with 0x${o.toString(16)} tag instead got 0x${d.toString(16)}`);return new Uint8Array(l.buffer,l.byteOffset+h)},fu=o=>{if(o<=127)return new Uint8Array([o]);const r=[];for(;o!==0;)r.push(255&o),o>>>=8;return r.reverse(),new Uint8Array([128|255&r.length,...r])},$w=(o,r,s)=>{const l=Ao(o,r,s);return l.position+l.length},Ao=(o,r,s)=>{const l=o[s];if(l!==r)throw new Error(`ASN parsing error: Expected tag 0x${r.toString(16)} at position ${s}, but got 0x${l.toString(16)}.`);const d=((h,y=0)=>{if(!(128&h[y]))return{number:h[y],consumed:1};const g=127&h[y];if(h.length<g+1)throw new Error(`ASN parsing error: Too few bytes. Expected encoded length's length to be at least ${g}`);let b=0;for(let _=0;_<g;_++)b<<=8,b|=h[y+_+1];return{number:b,consumed:g+1}})(o,s+1);return{position:s+1+d.consumed,length:d.number}},mC=o=>{const r=fu(o.byteLength+1),s=new Uint8Array(1+r.byteLength+1+o.byteLength);let l=0;return s[l]=3,l+=1,s.set(r,l),l+=r.byteLength,s[l]=0,l+=1,s.set(o,l),s},gC=o=>{const r=fu(o.byteLength),s=new Uint8Array(1+r.byteLength+o.byteLength);let l=0;return s[l]=4,l+=1,s.set(r,l),l+=r.byteLength,s.set(o,l),s},Of=o=>{let r=0;for(const h of o)r+=h.byteLength;const s=fu(r),l=new Uint8Array(1+s.byteLength+r);let d=0;l[d]=48,d+=1,l.set(s,d),d+=s.byteLength;for(const h of o)l.set(h,d),d+=h.byteLength;return l},Dw=o=>{const r=o.byteLength===0||128&o[0]?1:0,s=fu(o.byteLength+r),l=new Uint8Array(1+s.byteLength+o.byteLength+r);let d=0;return l[d]=2,d+=1,l.set(s,d),d+=s.byteLength,r>0&&(l[d]=0,d+=r),l.set(o,d),l},Mw=(o,r=0)=>Ao(o,48,r).position,Bw=(o,r=0)=>$w(o,48,r),vr=(o,r=0)=>{const{position:s,length:l}=Ao(o,2,r);let d=0;for(;o[s+d]===0;)d++;return new Uint8Array(o.buffer,o.byteOffset+s+d,l-d)},wC=(o,r,s=0)=>{const l=[],d=((y,g=0)=>{const{position:b,length:_}=Ao(y,48,g);return new Uint8Array(y.buffer,y.byteOffset+b,_)})(r,s);let h=0;for(const y of o){const g=y(d,h);l.push(g),h=g.byteOffset+g.byteLength-d.byteOffset}return l},vC=new Uint8Array([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]),bC=o=>{const r=Mw(o,0);return((s,l=0)=>{const{position:d,length:h}=Ao(s,3,l),y=s[d];if(y!==0)throw new Error(`Can not read bitstring, expected length to be multiple of 8, but got ${y} unused bits in last byte.`);return new Uint8Array(s.buffer,s.byteOffset+d+1,h-1)})(o,Bw(o,r))},kC=new Uint8Array([2,1,0,48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]),EC=o=>{let r=0;return r=Mw(o,r),r=((s,l=0)=>$w(s,2,l))(o,r),r=Bw(o,r),((s,l=0)=>{const{position:d,length:h}=Ao(s,4,l);return new Uint8Array(s.buffer,s.byteOffset+d,h)})(o,r)},Ys=4869,hu=4613,Xs=Ud,Pf="RS256",pu="RSASSA-PKCS1-v1_5",Rf="SHA-256",jw={name:pu,hash:{name:Rf}},Uw=async({size:o=2048,extractable:r=!1}={})=>{const{publicKey:s,privateKey:l}=await Ui.subtle.generateKey({name:pu,modulusLength:o,publicExponent:new Uint8Array([1,0,1]),hash:{name:Rf}},r,["sign","verify"]),d=await Ui.subtle.exportKey("spki",s),h=If(hu,bC(new Uint8Array(d))),y=new zi({bytes:h,publicKey:s});if(r){const g=await Ui.subtle.exportKey("pkcs8",l),b=If(Ys,EC(new Uint8Array(g)));return new Ww({privateKey:l,bytes:b,verifier:y})}return new Zw({privateKey:l,verifier:y})},zw=({id:o,keys:r})=>{if(o.startsWith("did:key:")){const s=o,l=r[s];return l instanceof Uint8Array?Fw(l):new Zw({privateKey:l,verifier:zi.parse(s)})}throw new TypeError(`RSA can not import from ${o} archive, try generic Signer instead`)},Fw=o=>{const r=((d,h=0)=>{const[y,g,b,_,I,P,B,q,se]=wC([vr,vr,vr,vr,vr,vr,vr,vr,vr],d,h);return{v:y,n:g,e:b,d:_,p:I,q:P,dp:B,dq:q,qi:se}})(Lf(Ys,o)),s=If(hu,(({n:d,e:h})=>Of([Dw(d),Dw(h)]))(r));return new Ww({bytes:o,privateKey:Ui.subtle.importKey("pkcs8",(l=Lf(Ys,o),Of([kC,gC(l)])),jw,!0,["sign"]),verifier:zi.decode(s)});var l};class zi{constructor({publicKey:r,bytes:s}){this.publicKey=r,this.bytes=s}withDID(r){return gf(this,r)}toDIDKey(){return this.did()}static decode(r){return new this({bytes:r,publicKey:Ui.subtle.importKey("spki",(s=Lf(hu,r),Of([vC,mC(s)])),jw,!0,["verify"])});var s}static parse(r){return zi.decode(Jn(r))}static or(r){return Ug(this,r)}get code(){return hu}get signatureCode(){return Xs}get signatureAlgorithm(){return Pf}did(){return`did:key:${dn.encode(this.bytes)}`}async verify(r,s){return s.code===Xs&&Ui.subtle.verify({name:pu,hash:{name:Rf}},await this.publicKey,s.raw,r)}}class Vw{constructor({privateKey:r,verifier:s}){this.verifier=s,this.privateKey=r}get signer(){return this}get code(){return Ys}get signatureCode(){return Xs}get signatureAlgorithm(){return Pf}did(){return this.verifier.did()}toDIDKey(){return this.verifier.toDIDKey()}verify(r,s){return this.verifier.verify(r,s)}async sign(r){const s=await Ui.subtle.sign({name:pu,saltLength:128},await this.privateKey,r);return Fd(Xs,new Uint8Array(s))}}class Ww extends Vw{constructor(r){super(r),this.bytes=r.bytes}withDID(r){return Ql(this,r)}toArchive(){const r=this.did();return{id:r,keys:{[r]:this.bytes}}}}class Zw extends Vw{constructor(r){super(r),this.privateKey=r.privateKey}withDID(r){return Ql(this,r)}toArchive(){const r=this.did();return{id:r,keys:{[r]:this.privateKey}}}}var xC=Object.freeze({__proto__:null,name:"RSA",code:Ys,signatureCode:Xs,signatureAlgorithm:Pf,generate:Uw,from:zw,or:o=>Hg({from:zw},o),decode:Fw,Verifier:zi});const SC=Ug({parse:Wg},zi),_C=(o=>Hg({from:j2},o))(xC);function $f(o){return o.expiration===void 0||o.expiration<=Math.floor(Date.now()/1e3)}function Hw(o){return!!o.notBefore&&o.notBefore>Math.floor(Date.now()/1e3)}function CC(o,r){for(const s of o.capabilities)if(s.with===r.with&&tC(s.can,r.can))return!0;return!1}const Eu=class{constructor(r,s={}){Ze(this,Yr,void 0);this.meta=r.meta,this.principal=r.principal,this.spaces=r.spaces,this.delegations=r.delegations,this.currentSpace=r.currentSpace,bn(this,Yr,l=>s.store?s.store.save(l):void 0)}static async create(r={},s={}){const l=new Eu({meta:{name:"agent",type:"device",...r.meta},principal:r.principal??await Qg(),spaces:r.spaces??new Map,delegations:r.delegations??new Map,currentSpace:r.currentSpace},s);return s.store&&await s.store.save(l.export()),l}static fromExport(r,s){const l=new Map;for(const[d,h]of r.delegations)l.set(d,{delegation:Yx(h.delegation.map(y=>({cid:Ke.parse(y.cid),bytes:y.bytes}))),meta:h.meta});return new Eu({meta:r.meta,principal:_C.from(r.principal),currentSpace:r.currentSpace,spaces:r.spaces,delegations:l},s)}export(){const r={meta:this.meta,principal:this.principal.toArchive(),currentSpace:this.currentSpace,spaces:this.spaces,delegations:new Map};for(const[s,l]of this.delegations)r.delegations.set(s,{meta:l.meta,delegation:[...l.delegation.export()].map(d=>({cid:d.cid.toString(),bytes:d.bytes}))});return r}async addSpace(r,s,l){this.spaces.set(r,s),await(l?this.addDelegation(l):te(this,Yr).call(this,this.export()))}async setCurrentSpace(r){this.currentSpace=r,await te(this,Yr).call(this,this.export())}async addDelegation(r,s){this.delegations.set(r.cid.toString(),{delegation:r,meta:s??{}}),await te(this,Yr).call(this,this.export())}async removeDelegation(r){this.delegations.delete(r.toString()),await te(this,Yr).call(this,this.export())}};let yu=Eu;Yr=new WeakMap;const Kw="https://access.web3.storage",NC=Jn("did:web:web3.storage");function AC(o={}){return(r=>new Ne(r))({id:o.principal??NC,encoder:OS,decoder:$S,channel:o.channel??DS({url:o.url??new URL(Kw),method:"POST",fetch:o.fetch??globalThis.fetch.bind(globalThis)})})}const xu=class{constructor(r,s={}){Ze(this,ra);Ze(this,ia);Ze(this,Ye,void 0);var d;const l=(d=s.connection)==null?void 0:d.channel;this.url=s.url??(l==null?void 0:l.url)??new URL(Kw),this.connection=s.connection??AC({principal:s.servicePrincipal,url:this.url}),bn(this,Ye,r)}static async create(r,s={}){const l=await yu.create(r,s);return new xu(l,s)}static from(r,s={}){const l=yu.fromExport(r,s);return new xu(l,s)}get issuer(){return te(this,Ye).principal}get meta(){return te(this,Ye).meta}get spaces(){return te(this,Ye).spaces}did(){return te(this,Ye).principal.did()}async addProof(r){(function(s,l){const{checkAudience:d,checkIsExpired:h=!0,checkIsTooEarly:y=!0}=l??{};if(d&&s.audience.did()!==d.did())throw new Error("Delegation audience does not match required DID.");if(h&&$f(s))throw new Error("Delegation expired.");if(y&&Hw(s))throw new Error("Delegation is not active yet (too early).")})(r,{checkAudience:this.issuer,checkIsExpired:!0}),await te(this,Ye).addDelegation(r,{audience:this.meta}),await this.removeExpiredDelegations()}async removeExpiredDelegations(){for(const[,r]of te(this,Ye).delegations)$f(r.delegation)&&await te(this,Ye).removeDelegation(r.delegation.cid)}proofs(r){const s=[];for(const l of Ot(this,ra,zp).call(this,r))l.delegation.audience.did()===this.issuer.did()&&s.push(l.delegation);return s}delegations(r){const s=[];for(const{delegation:l}of this.delegationsWithMeta(r))s.push(l);return s}delegationsWithMeta(r){const s=[];for(const l of Ot(this,ra,zp).call(this,r))l.delegation.audience.did()!==this.issuer.did()&&s.push(l);return s}async createSpace(r){const s=await Qg(),l=await wr.delegate({issuer:s,audience:this.issuer,with:s.did(),expiration:1/0}),d={isRegistered:!1};if(r!=null){if(typeof r!="string")throw new TypeError("invalid name");d.name=r}return await te(this,Ye).addSpace(s.did(),d,l),{did:s.did(),meta:d,proof:l}}async importSpaceFromDelegation(r){if(r.capabilities[0].can!=="*")throw new Error("Space can only be import with full capabilities delegation.");const s=r.facts[0].space,l=r,d=SC.parse(l.capabilities[0].with).did();return te(this,Ye).spaces.set(d,s),await this.addProof(l),{did:d,meta:s,proof:l}}async recover(r,s){const l=await this.invokeAndExecute(aC,{with:bo(this.did()),nb:{identity:bo(`mailto:${r}`)}});if(l&&l.error)throw new Error("Recover validation failed",{cause:l});const d=await Ot(this,ia,Fp).call(this,s);await this.addProof(d);const h=await this.invokeAndExecute(lC,{with:bo(this.connection.id.did()),nb:{identity:bo(`mailto:${r}`)}});if(h&&h.error)throw new Error("Spaces recover failed",{cause:h});const y=[];for(const g of h)y.push(aw(g));return y}async setCurrentSpace(r){if(this.proofs([{can:"space/info",with:r}]).length===0)throw new Error(`Agent has no proofs for ${r}.`);return await te(this,Ye).setCurrentSpace(r),r}currentSpace(){return te(this,Ye).currentSpace}currentSpaceWithMeta(){if(!te(this,Ye).currentSpace)return;const r=this.proofs([{can:"space/info",with:te(this,Ye).currentSpace}]),s=new Set;for(const l of r)for(const d of l.capabilities)s.add(d.can);return{did:te(this,Ye).currentSpace,proofs:r,capabilities:[...s],meta:te(this,Ye).spaces.get(te(this,Ye).currentSpace)}}async registerSpace(r,s){const l=this.currentSpace(),d=this.connection.id,h=l?te(this,Ye).spaces.get(l):void 0;if(!l||!h)throw new Error("No space selected");if(h&&h.isRegistered)throw new Error("Space already registered with web3.storage.");const y=await this.invokeAndExecute(cC,{nb:{identity:bo(`mailto:${r}`),product:"product:free",service:d.did()}});if(y&&y.error)throw new Error("Voucher claim failed",{cause:y});const g=await Ot(this,ia,Fp).call(this,s);await this.addProof(g);const b=await this.delegate({abilities:["*"],audience:d,expiration:1/0,audienceMeta:{name:"w3access",type:"service"}}),_=await this.invokeAndExecute(dC,{with:bo(d.did()),nb:{space:l,identity:g.capabilities[0].nb.identity,product:g.capabilities[0].nb.product},proofs:[b],facts:[{space:h,agent:this.meta}]});if(_&&_.error)throw new Error("Space registration failed",{cause:_});h.isRegistered=!0,te(this,Ye).addSpace(l,h),te(this,Ye).removeDelegation(g.cid)}async delegate(r){const s=this.currentSpaceWithMeta();if(!s)throw new Error("there no space selected.");const l=r.abilities.map(h=>({with:s.did,can:h})),d=await Jd({issuer:this.issuer,capabilities:l,proofs:this.proofs(l),facts:[{space:s.meta}],...r});return await te(this,Ye).addDelegation(d,{audience:r.audienceMeta}),await this.removeExpiredDelegations(),d}async invokeAndExecute(r,s){return(await this.invoke(r,s)).execute(this.connection)}execute(...r){return this.connection.execute(...r)}async invoke(r,s){const l=s.with||this.currentSpace();if(!l)throw new Error("No space selected, you need pass a resource.");const d=this.proofs([{with:l,can:r.can}]);if(d.length===0&&s.with!==this.did())throw new Error(`no proofs available for resource ${l} and ability ${r.can}`);const h=s.proofs||[];return Jm({...s,audience:s.audience||this.connection.id,capability:r.create({with:l,nb:s.nb}),issuer:this.issuer,proofs:[...d,...h]})}peer(r){return new eC({agent:this,channel:r})}async getSpaceInfo(r){const s=r||this.currentSpace();if(!s)throw new Error("No space selected, you need pass a resource.");const l=await this.invokeAndExecute(sC,{with:s});if(l.error)throw l;return l}};let mu=xu;Ye=new WeakMap,ra=new WeakSet,zp=function(r){const s=new Set(r),l=[];for(const[,d]of te(this,Ye).delegations)if(!$f(d.delegation)&&!Hw(d.delegation))if(Array.isArray(r)&&r.length>0)for(const h of s)CC(d.delegation,h)&&(s.delete(h),l.push(d));else l.push(d);return l},ia=new WeakSet,Fp=async function(r){const s=new yC(this.url,"validate-ws");await s.open(),s.send({did:this.did()});try{const l=await s.awaitMsg(r);if(l.type==="timeout")throw await s.close(),new Error("Email validation timed out.");if(l.type==="delegation"){const d=aw(l.delegation);return s.close(),d}}catch(l){if(l instanceof Js)throw await s.close(),new TypeError("Failed to get delegation",{cause:l})}throw new TypeError("Failed to get delegation")};function ea(){const o={};return o.promise=new Promise((r,s)=>{o.resolve=r,o.reject=s}),o}class TC{constructor(r,s={}){Ze(this,To);Ze(this,oa,void 0);Ze(this,sa,void 0);Ze(this,Xr,void 0);Ze(this,kr,void 0);Ze(this,aa,void 0);bn(this,oa,r),bn(this,sa,s.dbVersion),bn(this,Xr,s.dbStoreName??"AccessStore"),bn(this,aa,s.autoOpen??!0)}async open(){if(te(this,kr))return;const{resolve:r,reject:s,promise:l}=ea(),d=indexedDB.open(te(this,oa),te(this,sa));return d.addEventListener("upgradeneeded",()=>{d.result.createObjectStore(te(this,Xr),{keyPath:"id"})}),d.addEventListener("success",()=>{bn(this,kr,d.result),r()}),d.addEventListener("error",()=>s(d.error)),l}async close(){const r=te(this,kr);if(!r)throw new Error("Store is not open");r.close(),bn(this,kr,void 0)}async save(r){return await Df(await Ot(this,To,lc).call(this),"readwrite",te(this,Xr),async l=>{const{resolve:d,reject:h,promise:y}=ea(),g=l.put({id:1,...r});return g.addEventListener("success",()=>d()),g.addEventListener("error",()=>h(new Error("failed to query DB",{cause:g.error}))),y})()}async load(){return await Df(await Ot(this,To,lc).call(this),"readonly",te(this,Xr),async s=>{const{resolve:l,reject:d,promise:h}=ea(),y=s.get(1);return y.addEventListener("success",()=>l(y.result)),y.addEventListener("error",()=>d(new Error("failed to query DB",{cause:y.error}))),h})()}async reset(){Df(await Ot(this,To,lc).call(this),"readwrite",te(this,Xr),r=>{const{resolve:s,reject:l,promise:d}=ea(),h=r.clear();return h.addEventListener("success",()=>{s()}),h.addEventListener("error",()=>l(new Error("failed to query DB",{cause:h.error}))),d})}}oa=new WeakMap,sa=new WeakMap,Xr=new WeakMap,kr=new WeakMap,aa=new WeakMap,To=new WeakSet,lc=async function(){if(!te(this,kr)){if(!te(this,aa))throw new Error("Store is not open");await this.open()}return te(this,kr)};function Df(o,r,s,l){return async()=>{const d=o.transaction(s,r),{resolve:h,reject:y,promise:g}=ea();let b;d.addEventListener("complete",()=>h(b)),d.addEventListener("abort",()=>y(d.error||new Error("transaction aborted"))),d.addEventListener("error",()=>y(new Error("transaction error",{cause:d.error})));try{b=await l(d.objectStore(s)),d.commit()}catch(_){y(_),d.abort()}return g}}class IC extends TC{}var ta=f("did"),$n=f("meta");class Gw{constructor(r,s={}){Object.defineProperty(this,ta,{writable:!0,value:void 0}),Object.defineProperty(this,$n,{writable:!0,value:void 0}),p(this,ta)[ta]=r,p(this,$n)[$n]=s}name(){return p(this,$n)[$n].name!=null?String(p(this,$n)[$n].name):void 0}did(){return p(this,ta)[ta]}registered(){return Boolean(p(this,$n)[$n].isRegistered)}meta(){return p(this,$n)[$n]}sameAs(r){return this.did()===(r==null?void 0:r.did())}}function gu(o){const r=o.currentSpace();if(r==null)return;const s=o.spaces.get(r);return new Gw(r,s)}function Qw(o){const r=[];for(const[s,l]of o.spaces.entries())r.push(new Gw(s,l));return r}const qw=[{space:void 0,spaces:[],agent:void 0},{loadAgent:async()=>{},unloadAgent:async()=>{},resetAgent:async()=>{},createSpace:async()=>{throw new Error("missing keyring context provider")},setCurrentSpace:async()=>{},registerSpace:async()=>{},cancelRegisterSpace:()=>{},getProofs:async()=>[],createDelegation:async()=>{throw new Error("missing keyring context provider")},addSpace:async()=>{}}],Mf=i.createContext(qw);function Bf(){return i.useContext(Mf)}var Jw,wu={exports:{}},na={};function vu(o){const r=(s,l)=>o({ref:l,...s});return i.forwardRef(r)}function bu(o,r){const{as:s,wrapElement:l,...d}=r;let h;if(s&&typeof s!="string")h=wu.exports.jsx(s,{...d});else if(typeof r.children=="function"){const{children:y,...g}=d;h=r.children(g)}else h=s?wu.exports.jsx(s,{...d}):wu.exports.jsx(o,{...d});return l?l(h):h}(function(o){o.exports=function(){if(Jw)return na;Jw=1;var r=u.default,s=Symbol.for("react.element"),l=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,h=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function g(b,_,I){var P,B={},q=null,se=null;for(P in I!==void 0&&(q=""+I),_.key!==void 0&&(q=""+_.key),_.ref!==void 0&&(se=_.ref),_)d.call(_,P)&&!y.hasOwnProperty(P)&&(B[P]=_[P]);if(b&&b.defaultProps)for(P in _=b.defaultProps)B[P]===void 0&&(B[P]=_[P]);return{$$typeof:s,type:b,key:q,ref:se,props:B,_owner:h.current}}return na.Fragment=l,na.jsx=g,na.jsxs=g,na}()})(wu);const jf=i.createContext([{spaces:[],submitted:!1},{setEmail:()=>{throw new Error("missing set email function")},loadAgent:async()=>{},unloadAgent:async()=>{},resetAgent:async()=>{},createSpace:async()=>{throw new Error("missing keyring context provider")},setCurrentSpace:async()=>{},registerSpace:async()=>{},cancelRegisterSpace:()=>{},getProofs:async()=>[],createDelegation:async()=>{throw new Error("missing keyring context provider")},addSpace:async()=>{}}]),Yw=({children:o})=>{const[,{loadAgent:r}]=Bf();return i.useEffect(()=>{r()},[]),o},Xw=vu(o=>{const[r,s]=Bf(),{createSpace:l,registerSpace:d}=s,[h,y]=i.useState(""),[g,b]=i.useState(!1),_=i.useCallback(async P=>{P.preventDefault(),b(!0);try{await l(),await d(h)}catch(B){throw new Error("failed to register",{cause:B})}finally{b(!1)}},[h,b,l,d]),I=i.useMemo(()=>[{...r,email:h,submitted:g,handleRegisterSubmit:_},{...s,setEmail:y}],[r,s,h,g,_]);return u.default.createElement(Yw,null,u.default.createElement(jf.Provider,{value:I},bu(i.Fragment,o)))}),ev=vu(o=>{const[{handleRegisterSubmit:r}]=ku();return bu("form",{...o,onSubmit:r})}),tv=vu(o=>{const[{email:r},{setEmail:s}]=ku();return bu("input",{...o,type:"email",value:r,onChange:i.useCallback(l=>{s(l.target.value)},[])})}),nv=vu(o=>{const[,{cancelRegisterSpace:r}]=ku();return bu("button",{...o,onClick:r})});function ku(){return i.useContext(jf)}const LC=Object.assign(Xw,{Form:ev,EmailInput:tv,CancelButton:nv});n.AgentLoader=Yw,n.Authenticator=LC,n.AuthenticatorContext=jf,n.AuthenticatorRoot=Xw,n.CancelButton=nv,n.EmailInput=tv,n.Form=ev,n.KeyringContext=Mf,n.KeyringProvider=function({children:o,servicePrincipal:r,connection:s}){const[l,d]=i.useState(),[h,y]=i.useState(),[g,b]=i.useState([]),[_,I]=i.useState(),[P,B]=i.useState(),q=async()=>{if(l==null){const pe=await async function(ke={}){const We="w3ui"+(ke.servicePrincipal!=null?"@"+ke.servicePrincipal.did():""),qe=new IC(We,{dbVersion:1,dbStoreName:"keyring"}),Qe=await qe.load();if(Qe!=null)return Object.assign(mu.from(Qe,{...ke,store:qe}),{store:qe});const Yt=await Uw();return Object.assign(await mu.create({principal:Yt},{...ke,store:qe}),{store:qe})}({servicePrincipal:r,connection:s});return d(pe),I(pe.issuer),y(gu(pe)),b(Qw(pe)),pe}return l},se=async()=>{y(void 0),b([]),I(void 0),d(void 0)},ye={space:h,spaces:g,agent:_},Re={loadAgent:async()=>{l==null&&await q()},unloadAgent:se,resetAgent:async()=>{const pe=await q();await Promise.all([pe.store.reset(),se()])},createSpace:async pe=>{const ke=await q(),{did:We}=await ke.createSpace(pe);return await ke.setCurrentSpace(We),y(gu(ke)),We},registerSpace:async pe=>{const ke=await q(),We=new AbortController;B(We);try{await ke.registerSpace(pe,{signal:We.signal}),y(gu(ke)),b(Qw(ke))}catch(qe){if(!We.signal.aborted)throw qe}},cancelRegisterSpace:()=>{P!=null&&P.abort()},setCurrentSpace:async pe=>{const ke=await q();await ke.setCurrentSpace(pe),y(gu(ke))},getProofs:async pe=>(await q()).proofs(pe),createDelegation:async(pe,ke,We)=>{const qe=await q(),Qe=We.audienceMeta??{name:"agent",type:"device"};return await qe.delegate({...We,abilities:ke,audience:pe,audienceMeta:Qe})},addSpace:async pe=>{await(await q()).importSpaceFromDelegation(pe)}};return u.default.createElement(Mf.Provider,{value:[ye,Re]},o)},n.keyringContextDefaultValue=qw,n.useAuthenticator=ku,n.useKeyring=Bf,Object.defineProperty(n,"__esModule",{value:!0})})})(mI,Gc);var ts={},OI={get exports(){return ts},set exports(e){ts=e}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i=[],a=0;a<arguments.length;a++){var u=arguments[a];if(u){var c=typeof u;if(c==="string"||c==="number")i.push(u);else if(Array.isArray(u)){if(u.length){var f=n.apply(null,u);f&&i.push(f)}}else if(c==="object"){if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]")){i.push(u.toString());continue}for(var p in u)t.call(u,p)&&u[p]&&i.push(p)}}}return i.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(OI);function PI({count:e,completedCount:t,onClearCompleted:n,nowShowing:i}){const a=e>1?"items":"item",u=null;return nn("footer",{className:"footer",children:[nn("span",{className:"todo-count",children:[oe("strong",{children:e})," ",a," left"]}),nn("ul",{className:"filters",children:[oe("li",{children:oe(ic,{to:"",className:ts({selected:i==="all"}),children:"All"})})," ",oe("li",{children:oe(ic,{to:`${i==="active"?"../":""}active`,className:ts({selected:i==="active"}),children:"Active"})})," ",oe("li",{children:oe(ic,{to:`${i==="completed"?"../":""}completed`,className:ts({selected:i==="completed"}),children:"Completed"})})]}),u]})}const RI=27,$I=13;class DI extends J.Component{constructor(){super(...arguments);jt(this,"state",{editText:this.props.todo.title});jt(this,"EditFieldRef",J.createRef());jt(this,"handleSubmit",n=>{const i=this.state.editText.trim();i?(this.props.onSave(i),this.setState({editText:i})):this.props.onDestroy()});jt(this,"handleEdit",()=>{this.props.onEdit(),this.setState({editText:this.props.todo.title})});jt(this,"handleKeyDown",n=>{n.which===RI?(this.setState({editText:this.props.todo.title}),this.props.onCancel(n)):n.which===$I&&this.handleSubmit(n)});jt(this,"handleChange",n=>{this.props.editing&&this.setState({editText:n.target.value})})}shouldComponentUpdate(n,i){return n.todo!==this.props.todo||n.editing!==this.props.editing||i.editText!==this.state.editText}componentDidUpdate(n){if(!n.editing&&this.props.editing){const i=this.EditFieldRef.current;i.focus(),i.setSelectionRange(i.value.length,i.value.length)}}render(){return nn("li",{className:ts({completed:this.props.todo.completed,editing:this.props.editing}),children:[nn("div",{className:"view",children:[oe("input",{className:"toggle",type:"checkbox",checked:this.props.todo.completed,onChange:this.props.onToggle}),oe("label",{onDoubleClick:this.handleEdit,children:this.props.todo.title}),oe("button",{className:"destroy",onClick:this.props.onDestroy})]}),oe("input",{ref:this.EditFieldRef,className:"edit",value:this.state.editText,onBlur:this.handleSubmit,onChange:this.handleChange,onKeyDown:this.handleKeyDown})]})}}function n1(){const{ready:e,database:t,addSubscriber:n}=J.useContext(am),{addTodo:i,toggle:a,destroy:u,clearCompleted:c,updateTitle:f}=um({ready:e,database:t});let{list:p,todos:m}=Tk();const[w,E]=J.useState(""),S=Ak();n("List",async()=>{S.revalidate()});const[{agent:k,space:N},{getProofs:T,loadAgent:O}]=Gc.useKeyring();Boolean(N==null?void 0:N.registered());const x=_k(),{filter:v}=y5(),C=v||"all",L={all:m,active:m.filter(Y=>!Y.completed),completed:m.filter(Y=>Y.completed)},$=L[C],V=Y=>()=>E(Y._id),W=async()=>await c(p._id),F=async Y=>await i(p._id,Y);return nn("div",{children:[nn("div",{className:"listNav",children:[oe("button",{onClick:()=>x("/"),children:"Back to all lists"}),oe("label",{children:p.title})]}),oe("ul",{className:"todo-list",children:$.map(Y=>{const ue=$e=>tt=>$e(Y,tt);return oe(DI,{todo:Y,onToggle:ue(a),onDestroy:ue(u),onSave:ue(f),onEdit:V(Y),editing:w===Y._id,onCancel:console.log},Y._id)})}),oe(cm,{autoFocus:!1,onSubmit:F,placeholder:"Add a new item to your list."}),oe(PI,{count:$.length,completedCount:L.completed.length,onClearCompleted:W,nowShowing:C})]})}const MI=[{title:"",_id:"",type:"list"},{title:"",_id:"",type:"list"},{title:"",_id:"",type:"list"}],BI=({title:e,_id:t},n)=>t===""?oe("li",{children:oe("label",{children:""})},t||n):oe("li",{children:oe("label",{children:oe(ic,{to:`/list/${t}`,children:e})})},t||n);function jI(){const{ready:e,database:t,addSubscriber:n}=J.useContext(am),{addList:i}=um({ready:e,database:t}),a=Ak();n("AllLists",()=>{a.revalidate()});let u=Tk();return u.length==0&&(u=MI),console.log("revalidator",u.length,a),nn("div",{children:[nn("div",{className:"listNav",children:[oe("button",{onClick:async()=>{console.log("await database.changesSince()",await t.changesSince())},children:"Choose a list."}),oe("label",{})]}),oe("ul",{className:"todo-list",children:u.map(BI)}),oe(cm,{autoFocus:!1,onSubmit:i,placeholder:"Create a new list or choose one"})]})}const UI=()=>oe(PE,{children:nn("div",{children:[nn("div",{className:"listNav",children:[oe("button",{children:"Choose a list."}),oe("label",{})]}),oe("section",{className:"main",children:nn("ul",{className:"todo-list",children:[oe("li",{children:oe("label",{children:""})}),oe("li",{children:oe("label",{children:""})}),oe("li",{children:oe("label",{children:""})})]})}),oe(cm,{autoFocus:!1,placeholder:"Create a new list or choose one"})]})});function PE({children:e}){return nn(sv,{children:[oe(fI,{}),oe("div",{children:oe("header",{className:"header",children:e?oe(sv,{children:e}):oe(_5,{})})})]})}const zI=e=>(e.allLists=new J0(e,function(t,n){t.type==="list"&&n(t.type,t)}),e.todosByList=new J0(e,function(t,n){t.type==="todo"&&t.listId&&n([t.listId,t.createdAt],t)}),window.fireproof=e,e);function FI(){console.log("render App");const e=sI(zI,dI),{fetchListWithTodos:t,fetchAllLists:n}=um(e),i=async({params:{listId:f}})=>await t(f),a=async({params:f})=>await n();function u(){return nn(Lo,{element:oe(PE,{}),children:[oe(Lo,{path:"/",loader:a,element:oe(jI,{})}),oe(Lo,{path:"list",children:oe(Lo,{path:":listId",loader:i,element:oe(n1,{}),children:oe(Lo,{path:":filter",element:oe(n1,{})})})})]})}const c=document.location.pathname.split("/list")[0]||"";return oe(am.Provider,{value:e,children:oe(S5,{router:O5(Rc(u()),{basename:c}),fallbackElement:oe(UI,{})})})}_h.createRoot(document.getElementById("root")).render(oe(FI,{}));
